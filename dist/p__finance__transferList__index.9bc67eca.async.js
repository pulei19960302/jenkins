(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{RIJA:function(e,t,a){"use strict";a.r(t);var n,r,l,i,o=a("2Taf"),c=a.n(o),s=a("vZ4D"),u=a.n(s),p=a("MhPg"),m=a.n(p),f=a("l4Ni"),d=a.n(f),y=a("ujKo"),v=a.n(y),h=a("MuoO"),E=a("q1tI"),k=a.n(E),_=a("Kvkj"),g=a("gWZ8"),x=a.n(g),C=a("wd/R"),w=a.n(C),b=a("ZmS2"),L=a.n(b),I=a("F1Dt"),R=function(e,t){var a=I["l"]&&Object.keys(I["l"]).reduce(function(e,t){return e.concat([{value:t,name:I["l"][t]}])},[]),n=e&&Object.keys(e).reduce(function(t,a){return t.concat([{value:a,name:e[a]}])},[]),r=t&&Object.keys(t).reduce(function(e,a){return e.concat([{value:a,name:t[a]}])},[]),l=a?[{value:"",name:"\u5168\u90e8\u4ea4\u6613\u72b6\u6001"}].concat(x()(a)):[{value:"",name:"\u5168\u90e8\u4ea4\u6613\u72b6\u6001"}],i=(n&&[{value:"",name:"\u5168\u90e8\u4ea4\u6613\u7c7b\u578b"}].concat(x()(n)),n?[{value:"",name:"\u5168\u90e8\u4ea4\u6613\u6e20\u9053"}].concat(x()(r)):[{value:"",name:"\u5168\u90e8\u4ea4\u6613\u6e20\u9053"}]);return[{type:"enum",key:"status",placeholder:"\u5168\u90e8\u4ea4\u6613\u72b6\u6001",enums:l},{key:"timeType",type:"enum",placeholder:"\u4ea4\u6613\u7533\u8bf7\u65f6\u95f4",enums:[{value:0,name:"\u4ea4\u6613\u7533\u8bf7\u65f6\u95f4"},{value:1,name:"\u4ea4\u6613\u5b8c\u6210\u65f6\u95f4"}],inputProps:{onSelect:this.onChangeTimeType}},{type:"dateRange",key:"time",searchKeys:["start_time","end_time"],placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputProps:{ranges:I["c"]},initialValue:[w()().subtract(30,"days"),w()()]},{key:"member_id",placeholder:"\u7528\u6237ID"},{key:"order_no",placeholder:"\u4ea4\u6613\u5355\u53f7"},{key:"pay_way",type:"enum",enums:i,placeholder:"\u5168\u90e8\u4ea4\u6613\u6e20\u9053"}]},D=function(e){var t=this;return[{title:"\u7533\u8bf7\u65f6\u95f4",dataIndex:"created_at",render:function(e,t){return e?k.a.createElement("span",null,w()(1e3*e).format(I["d"].DATETIME)):null}},{title:"\u4ea4\u6613\u5355\u53f7",dataIndex:"order_no"},{title:"\u7528\u6237\u540d / ID",dataIndex:"nickname",render:function(e,t){return k.a.createElement("span",null,e,"\xa0/\xa0",t.member_id)}},{title:"\u4ea4\u6613\u91d1\u989d",dataIndex:"money",money:!0},{title:"\u4ea4\u6613\u6e20\u9053",dataIndex:"pay_way",render:function(t){return k.a.createElement("span",null,e&&e[t])}},{title:"\u4ea4\u6613\u72b6\u6001",dataIndex:"status",render:function(e){return k.a.createElement("span",null,I["l"][e])}},{title:"\u5b8c\u6210\u65f6\u95f4",dataIndex:"updated_at",render:function(e){return k.a.createElement("span",null,e&&w()(1e3*e).format(I["d"].DATETIME))}},{title:"\u64cd\u4f5c",dataIndex:"operation",render:function(e,a){return a.status===I["k"].APPLY_FOR?$api.finance.transferCheck.permission()&&k.a.createElement("a",{onClick:function(){t.toggleReviewModal(a,!0)}},"\u5ba1\u6838"):k.a.createElement("a",{onClick:function(){t.toggleReviewModal(a)}},"\u67e5\u770b")}}]},M=(a("2qtc"),a("kLXV")),S=(a("5NDa"),a("5rEg")),O=(a("7Kak"),a("9yH6")),T=(a("14J3"),a("BMrR")),F=(a("jCWc"),a("kPKH")),P=a("p0pE"),j=a.n(P),A=a("9UV2"),N=a.n(A),q=a("WsrF");a("XlDN");function $(e){return function(){var t,a=v()(e);if(J()){var n=v()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return d()(this,t)}}function J(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var V,Z,K,W=100,G=(n=q["a"].create(),r=Object(h["connect"])(function(e){var t=e.transferList;return j()({},t)}),n(l=r((i=function(e){m()(a,e);var t=$(a);function a(){var e;c()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),e.handleCancel=function(){var t=e.props.onCancel;t&&t()},e.handleOk=function(){var t=e.props,a=t.form,n=t.onOk;a&&a.validateFields(function(t,a){if(!t){var r=e.props.details.id,l=void 0===r?"":r,i=l&&l.toString();$api.finance.transferCheck(j()({ids:i},a)).then(function(e){n&&n()})}})},e}return u()(a,[{key:"renderInfos",value:function(){var e=this.props,t=e.forCheck,a=e.details,n=e.payWay,r=a.status,l=void 0===r?"":r,i=a.order_no,o=void 0===i?"":i,c=a.money,s=void 0===c?"":c,u=a.real_money,p=void 0===u?"":u,m=(a.type_txt,a.created_at),f=void 0===m?"":m,d=(a.remark,a.data),y=void 0===d?"":d,v=a.fee,h=void 0===v?"":v,_=a.pay_way,g=void 0===_?"":_,x=a.account,C=void 0===x?"":x,b=a.real_name,R=void 0===b?"":b,D=a.audit,M=void 0===D?"":D,S=a.audit_txt,O=void 0===S?"":S;y&&JSON.parse(y);return"bank"===g?null:k.a.createElement("div",{className:L.a.reviewTransfer},k.a.createElement(T["a"],{type:"flex"},k.a.createElement(F["a"],{span:6},"\u63d0\u73b0\u72b6\u6001\xa0:\xa0\xa0"),k.a.createElement(F["a"],{span:18},I["l"][l])),k.a.createElement(T["a"],{type:"flex"},k.a.createElement(F["a"],{span:6},"\u63d0\u73b0\u5355\u53f7\xa0:\xa0\xa0"),k.a.createElement(F["a"],{span:18},o)),k.a.createElement(T["a"],{type:"flex"},k.a.createElement(F["a"],{span:6},"\u63d0\u73b0\u91d1\u989d(\u5143)\xa0:\xa0\xa0"),k.a.createElement(F["a"],{span:18},N.a.formatMoney(s,"\uffe5"))),k.a.createElement(T["a"],{type:"flex"},k.a.createElement(F["a"],{span:6},"\u624b\u7eed\u8d39\u6bd4\u4f8b(%)\xa0:\xa0\xa0"),k.a.createElement(F["a"],{span:18},h)),k.a.createElement(T["a"],{type:"flex"},k.a.createElement(F["a"],{span:6},"\u5b9e\u9645\u63d0\u73b0(\u5143)\xa0:\xa0\xa0"),k.a.createElement(F["a"],{span:18},N.a.formatMoney(p,"\uffe5"))),k.a.createElement(T["a"],{type:"flex"},k.a.createElement(F["a"],{span:6},"\u63d0\u73b0\u6e20\u9053\xa0:\xa0\xa0"),k.a.createElement(F["a"],{span:18},n&&n[g])),k.a.createElement(T["a"],{type:"flex"},k.a.createElement(F["a"],{span:6},"\u63d0\u73b0\u8d26\u53f7\xa0:\xa0\xa0"),k.a.createElement(F["a"],{span:18},C)),k.a.createElement(T["a"],{type:"flex"},k.a.createElement(F["a"],{span:6},"\u7528\u6237\u771f\u5b9e\u59d3\u540d\xa0:\xa0\xa0"),k.a.createElement(F["a"],{span:18},R)),k.a.createElement(T["a"],{type:"flex"},k.a.createElement(F["a"],{span:6},"\u521b\u5efa\u65f6\u95f4\xa0:\xa0\xa0"),k.a.createElement(F["a"],{span:18},f&&w()(1e3*f).format(I["d"].DATETIME))),!t&&k.a.createElement(E["Fragment"],null,k.a.createElement(T["a"],{type:"flex"},k.a.createElement(F["a"],{span:6},"\u5ba1\u6838\u610f\u89c1\xa0:\xa0\xa0"),k.a.createElement(F["a"],{span:18},M)),k.a.createElement(T["a"],{type:"flex"},k.a.createElement(F["a"],{span:6},"\u5907\u6ce8\xa0:\xa0\xa0"),k.a.createElement(F["a"],{span:18},O))))}},{key:"renderForm",value:function(){var e=this.props.form,t=e.getFieldDecorator,a=e&&e.getFieldValue("remark"),n=a?a.length:0;return k.a.createElement(q["a"],{className:L.a.form},k.a.createElement(q["a"].Item,{label:"\u5ba1\u6838\u610f\u89c1",type:"flex",style:{margin:"0 13px 10px 13px"}},t("status",{initialValue:1})(k.a.createElement(O["a"].Group,{className:L.a.radioGroup,style:{marginLeft:"15px"}},k.a.createElement(O["a"],{value:1},"\u901a\u8fc7"),k.a.createElement(O["a"],{value:2},"\u62d2\u7edd")))),k.a.createElement(q["a"].Item,{label:"\u5907\u6ce8",type:"flex",className:L.a.notes},t("remark")(k.a.createElement("div",{style:{position:"relative"}},k.a.createElement(S["a"].TextArea,{rows:4,maxLength:100}),k.a.createElement("span",{className:L.a.nums},n,"/",W)))))}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.forCheck,n=e.details;return n?a?k.a.createElement(M["a"],{title:"\u4ea4\u6613\u5ba1\u6838",visible:t,maskClosable:!1,destroyOnClose:!0,onCancel:this.handleCancel,onOk:this.handleOk},this.renderInfos(),this.renderForm()):k.a.createElement(M["a"],{title:"\u4ea4\u6613\u5ba1\u6838",visible:t,maskClosable:!1,destroyOnClose:!0,footer:null,onCancel:this.handleCancel},this.renderInfos()):null}}]),a}(E["PureComponent"]),l=i))||l)||l),B=G;function H(e){return function(){var t,a=v()(e);if(U()){var n=v()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return d()(this,t)}}function U(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Q=(V=Object(h["connect"])(function(e){var t=e.transferList,a=e.loading;return{transferList:t,loading:a}}),V((K=function(e){m()(a,e);var t=H(a);function a(e){var n;return c()(this,a),n=t.call(this,e),n.mutipulClick=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=(arguments.length>2&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],t&&t.join(","));switch(e){case"agree":$api.finance.transferCheck({ids:a,status:I["k"].SUCCESS});break;case"reject":$api.finance.transferCheck({ids:a,status:I["k"].FAILED});break}},n.toggleReviewModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;n.setState(function(a){return{reviewModal:!a.reviewModal,forCheck:t,details:e}})},n.onSearch=function(e){var t=n.props.dispatch;t({type:"transferList/onSearch",payload:e}),t({type:"transferList/getList",payload:e})},n.onDisabled=function(e){return e.status!==I["k"].APPLY_FOR},n.getList=function(e){var t=n.props.dispatch;t({type:"transferList/getList",payload:e})},n.state={reviewModal:!1,details:null,forCheck:!0},n}return u()(a,[{key:"renderList",value:function(){var e=this.props,t=e.transferList,a=e.loading,n=t.list,r=void 0===n?[]:n,l=t.pagination,i=t.query,o=t.type,c=t.pay_way,s={search:i},u=[{name:"\u6279\u91cf\u540c\u610f",key:"agree",permission:$api.finance.transferCheck.permission()},{name:"\u6279\u91cf\u62d2\u7edd",key:"reject",permission:$api.finance.transferCheck.permission()}];return k.a.createElement(_["i"],{dataSource:r,pagination:l,searchProp:s,mutipulBtns:u,searchFields:R.call(this,o,c),columns:D.call(this,c),loading:a.effects["transferList/getList"],mutipulClick:this.mutipulClick,onSearch:this.onSearch,getList:this.getList,onDisabled:this.onDisabled})}},{key:"render",value:function(){var e=this,t=this.props.transferList,a=t.pay_way,n=t.query,r=void 0===n?"":n,l=this.state,i=l.reviewModal,o=l.details,c=l.forCheck,s=[{type:"export",name:"\u5bfc\u51fa",url:$api.finance.settleExport.url,query:r,permission:$api.finance.settleExport.permission()}].filter(function(e){return e.permission});return k.a.createElement(_["x"],{inner:!0},k.a.createElement(_["y"],{btns:s}),this.renderList(),k.a.createElement(B,{visible:i,details:o,payWay:a,forCheck:c,onCancel:this.toggleReviewModal,onOk:function(){e.getList(),e.toggleReviewModal()}}))}}]),a}(E["PureComponent"]),Z=K))||Z);t["default"]=Q},ZmS2:function(e,t,a){e.exports={totalRow:"totalRow___fUEDZ",totalCol:"totalCol___2JkNG",num:"num___1cHQS",title:"title___1vA5C",questionIcon:"questionIcon___2Ivf5",reviewTransfer:"reviewTransfer___3tVqG",notes:"notes___3QxRF",nums:"nums___2Zx6E",form:"form___2eB0L"}}}]);