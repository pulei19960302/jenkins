(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{Df42:function(e,t,n){"use strict";n.r(t);var a,r=n("jehZ"),i=n.n(r),o=n("2Taf"),c=n.n(o),l=n("vZ4D"),s=n.n(l),u=n("MhPg"),d=n.n(u),f=n("l4Ni"),p=n.n(f),v=n("ujKo"),h=n.n(v),m=n("MuoO"),y=n("q1tI"),g=n.n(y),E=n("Kvkj"),C=n("eHn4"),_=n.n(C),k=n("wd/R"),R=n.n(k),D=n("TFei"),w=(a={},_()(a,D["j"].ORDER,"\u8ba2\u5355"),_()(a,D["j"].AFTERSALE,"\u552e\u540e"),_()(a,D["j"].PRODUCT,"\u5546\u54c1"),a),x=[{title:"\u4f1a\u8bdd\u67e5\u8be2",value:D["c"].CONVERSATION,key:"conversation"}],S=[{key:"person_type",placeholder:"\u5ba2\u670d\u8d26\u53f7",enums:[{value:D["a"].SERVICE,name:"\u5ba2\u670d\u8d26\u53f7"},{value:D["a"].CLIENT,name:"\u5ba2\u6237\u8d26\u53f7"}],inputProps:{defaultValue:D["a"].SERVICE}},{key:"person_name",placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7\u67e5\u8be2"},{key:"person_id",placeholder:"\u8f93\u5165\u5ba2\u6237ID\u67e5\u8be2"},{key:"key",placeholder:"\u8f93\u5165\u4f1a\u8bddID\u67e5\u8be2"},{key:"time",searchKeys:["start_date","end_date"],placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],type:"dateRange"},{key:"sn_code",placeholder:"\u8f93\u5165\u8ba2\u5355\u53f7\u67e5\u8be2"}],I=function(){var e=this;return[{title:"\u4f1a\u8bddID",dataIndex:"key",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return g.a.createElement("div",{style:{width:"190px"}},g.a.createElement(E["r"],{text:e.toString(),maxLine:"1"}))}},{title:"\u5ba2\u6237\u8d26\u53f7",dataIndex:"customer",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return g.a.createElement("div",{style:{width:"250px"}},g.a.createElement(E["r"],{text:e,maxLine:"1"}))}},{title:"\u5ba2\u670d\u8d26\u53f7",dataIndex:"service",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return g.a.createElement("div",{style:{width:"190px"}},g.a.createElement(E["r"],{text:e,maxLine:"1"}))}},{title:"\u8ba2\u5355ID",dataIndex:"sn_code",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return g.a.createElement("div",{style:{width:"11%"}},g.a.createElement(E["r"],{text:e,maxLine:"1"}))}},{title:"\u54a8\u8be2\u6765\u6e90",dataIndex:"sn_type",width:"11%",render:function(e){return g.a.createElement("span",null,w[e])}},{title:"\u54a8\u8be2\u65f6\u95f4",dataIndex:"created_at",render:function(e){return g.a.createElement("span",null,e&&R()(e).format(D["e"]))}},{title:"\u64cd\u4f5c",dataIndex:"operation",render:function(t,n){return g.a.createElement("a",{onClick:function(){e.handleViewDetails(n)}},"\u67e5\u770b\u8be6\u60c5")}}]},b=(n("bbsP"),n("/wGt")),M=(n("T2oS"),n("W9HT")),L=(n("14J3"),n("BMrR")),P=(n("jCWc"),n("kPKH")),T=(n("/zsF"),n("PArb")),N=n("nk2g"),O=n.n(N);function V(e){return function(){var t,n=h()(e);if(A()){var a=h()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return p()(this,t)}}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var j=function(e){d()(n,e);var t=V(n);function n(){var e;c()(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),e.handleClose=function(){var t=e.props.onClose;t&&t()},e}return s()(n,[{key:"renderList",value:function(){var e=this.props.list,t=void 0===e?[]:e;if(!t||!t.length)return null;var n=t.map(function(e,t){var n=e.created_at,a=void 0===n?"":n,r=e.person_name,i=void 0===r?"":r,o=e.content,c=void 0===o?"":o;return g.a.createElement("div",{key:t},g.a.createElement("div",null,g.a.createElement("span",{className:O.a.time},a&&R()(a).format(D["e"])),g.a.createElement("span",{className:O.a.name},i)),g.a.createElement("div",{className:O.a.content},c),g.a.createElement(T["a"],null))});return g.a.createElement("div",{className:O.a.details},n)}},{key:"renderTitle",value:function(){var e=this.props.details,t=void 0===e?{}:e,n=t.customer,a=void 0===n?"":n,r=t.service,i=void 0===r?"":r,o=t.created_at,c=void 0===o?"":o;return g.a.createElement(L["a"],null,g.a.createElement(P["a"],null,g.a.createElement(E["r"],{text:"\u5ba2\u6237\u8d26\u53f7 : ".concat(a)})),g.a.createElement(P["a"],null,g.a.createElement("span",null,"\u54a8\u8be2\u65f6\u95f4\xa0:\xa0"),g.a.createElement("span",null,c&&R()(c).format(D["e"]))),g.a.createElement(P["a"],null,g.a.createElement(E["r"],{text:"\u5ba2\u670d\u8d26\u53f7 : ".concat(i)})))}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.loading;return g.a.createElement(b["a"],{title:this.renderTitle(),className:O.a.details,visible:t,destroyOnClose:!0,maskClosable:!1,width:800,onClose:this.handleClose},n&&g.a.createElement("div",{className:O.a.loading},g.a.createElement(M["a"],null)),this.renderList())}}]),n}(y["PureComponent"]),K=j;function F(e){return function(){var t,n=h()(e);if(H()){var a=h()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return p()(this,t)}}function H(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var J,Q,q,W=function(e){d()(n,e);var t=F(n);function n(e){var a;return c()(this,n),a=t.call(this,e),a.toggleDetails=function(){a.setState(function(e){return{showDetails:!e.showDetails}})},a.handleViewDetails=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,n=void 0===t?"":t;a.props.dispatch({type:"dataManage/getConversationDetails",payload:{conversation_key:n}}),a.setState({row:e}),a.toggleDetails()},a.onSearch=function(e){var t=a.props.dispatch;t({type:"dataManage/updateState",payload:{conversationQuery:e}}),t({type:"dataManage/getConversationList",query:e})},a.getList=function(e){var t=a.props.dispatch;t({type:"dataManage/getConversationList",payload:e})},a.state={showDetails:!1,row:{}},a}return s()(n,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"dataManage/getConversationList"})}},{key:"render",value:function(){var e=this.state,t=e.showDetails,n=e.row,a=this.props,r=a.loading,i=a.list,o=void 0===i?[]:i,c=a.pagination,l=void 0===c?{}:c,s=a.conversationQuery,u=void 0===s?{}:s,d=a.msg_list,f=void 0===d?[]:d,p={search:u};return g.a.createElement("div",null,g.a.createElement(E["i"],{dataSource:o,pagination:l,searchFields:S,columns:I.call(this),loading:r.effects["dispatchManage/getList"],onSearch:this.onSearch,getList:this.getList,searchProp:p}),g.a.createElement(K,{visible:t,onClose:this.toggleDetails,details:n,list:f,loading:r.effects["dispatchManage/getConversationDetails"]}))}}]),n}(y["PureComponent"]),Z=W;function z(e){return function(){var t,n=h()(e);if(B()){var a=h()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return p()(this,t)}}function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var G=(J=Object(m["connect"])(function(e){var t=e.dataManage,n=e.loading;return{dataManage:t,loading:n}}),J((q=function(e){d()(n,e);var t=z(n);function n(e){var a;return c()(this,n),a=t.call(this,e),a.onTabsChange=function(e){var t=e.value;a.setState({tab:t})},a.state={tab:D["c"].CONVERSATION},a}return s()(n,[{key:"renderContents",value:function(){var e=this.state.tab,t=this.props,n=t.dataManage,a=void 0===n?{}:n,r=t.loading,o=t.dispatch;switch(e){case D["c"].CONVERSATION:return g.a.createElement(Z,i()({},a,{loading:r,dispatch:o}))}}},{key:"render",value:function(){var e=this.state.tab;return g.a.createElement(E["x"],{inner:!0},g.a.createElement(E["E"],{defaultActiveKey:e,tabs:x,onChange:this.onTabsChange}),this.renderContents())}}]),n}(y["PureComponent"]),Q=q))||Q);t["default"]=G},nk2g:function(e,t,n){e.exports={details:"details___1HP04",name:"name___1VMVS",time:"time___3TOsy",content:"content___1o7PQ",loading:"loading___3AVYM"}}}]);