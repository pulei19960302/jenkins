(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{iWKa:function(e,t,a){e.exports={"text-overflow":"text-overflow___ypNkv","text-gradient":"text-gradient___1b5zP","background-hover":"background-hover___3VRwv",flex:"flex___3Bc-c",flex_1:"flex_1___306S7",width100:"width100___3u0mv",block:"block___WX3Rm",spin:"spin___2nCqa",totalTitle:"totalTitle___2mMnF",totalRow:"totalRow___1NIdO",totalCol:"totalCol___YF7dZ",num:"num___ybgE3",title:"title___3DMLW",questionIcon:"questionIcon___3RDHL",list:"list___BBRnT",listTitle:"listTitle___3j6LW",listContent:"listContent___1Nd3m",goodsInfo:"goodsInfo___1-pUe",goods:"goods___2-QIK",img:"img___i6Wmz",info:"info___28wpt",nums:"nums___3sX0Z"}},kBKh:function(e,t,a){"use strict";a.r(t);a("T2oS");var n,r,l,o=a("W9HT"),i=a("p0pE"),s=a.n(i),c=(a("14J3"),a("BMrR")),u=(a("jCWc"),a("kPKH")),d=a("2Taf"),m=a.n(d),f=a("vZ4D"),p=a.n(f),_=a("MhPg"),v=a.n(_),E=a("l4Ni"),y=a.n(E),g=a("ujKo"),h=a.n(g),k=a("9UV2"),S=a.n(k),N=a("wd/R"),x=a.n(N),M=a("MuoO"),b=a("q1tI"),C=a.n(b),L=a("Kvkj"),T=a("7Qib"),w=a("F1Dt"),R=(a("Q9mQ"),a("diRs")),I=a("gWZ8"),O=a.n(I),j=a("JyMx"),D=a("iWKa"),P=a.n(D),q=a("TSYQ"),A=a.n(q),W=function(e){var t=e.item,a=e.field,n=t.goods_infos,r=void 0===n?[]:n;if(!r||!r.length)return null;var l=r.map(function(e,t){var a=e.goods_avatar,n=void 0===a?"":a,r=e.goods_title,l=void 0===r?"":r,o=e.goods_sku_properties_name,i=void 0===o?"":o,s=e.goods_sale_price,c=void 0===s?"":s,u=e.count,d=void 0===u?"":u,m=(e.goods_id,e.goods_sku_id),f=void 0===m?"":m;return C.a.createElement("div",{className:A()(P.a.goods,P.a.flex),key:t},C.a.createElement("img",{src:n,alt:"",className:P.a.img,onClick:function(){Object(L["A"])({imgUrl:n})}}),C.a.createElement("div",{className:A()(P.a.flex_1,P.a.info)},C.a.createElement("span",null,f),C.a.createElement(L["r"],{text:l,maxLine:"1"}),C.a.createElement("span",null,i),C.a.createElement("div",{className:"".concat(P.a.flex," ").concat(P.a.nums)},C.a.createElement("span",null,"\u552e\u540e\u6570\u91cf:\xa0",d),C.a.createElement("span",null,"\u5355\u4ef7:\xa0",S.a.formatMoney(c,"\uffe5")))))});return C.a.createElement("div",{style:{flex:a.span},className:P.a.goodsInfo},l)},K=function(e){var t=e.item,a=e.field;return C.a.createElement("div",{style:{flex:a.span}},t.type_name)},z=function(e){var t=e.item,a=e.field,n=t.sale_fee_count_by_backend,r=void 0===n?"":n;return C.a.createElement("div",{style:{flex:a.span}},C.a.createElement("div",null,C.a.createElement("span",null,S.a.formatMoney(r,"\uffe5"))))},B=function(e){var t=e.item,a=e.field,n=t.total_fee,r=void 0===n?"":n;return C.a.createElement("div",{style:{flex:a.span}},C.a.createElement("div",null,C.a.createElement("span",null,S.a.formatMoney(r,"\uffe5"))))},Q=function(e){var t=e.item,a=e.field,n=t.add_fee,r=void 0===n?"":n;return C.a.createElement("div",{style:{flex:a.span}},C.a.createElement("div",null,C.a.createElement("span",null,S.a.formatMoney(r,"\uffe5"))))},J=function(e){var t=e?[{value:"",name:"\u5168\u90e8\u552e\u540e\u7c7b\u578b"}].concat(O()(e)):[{value:"",name:"\u5168\u90e8\u552e\u540e\u7c7b\u578b"}];return[{key:"member_id",placeholder:"\u8bf7\u8f93\u5165\u5ba2\u6237\u8d26\u53f7/\u5ba2\u6237ID\u641c\u7d22"},{key:"order_id",placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7\u641c\u7d22"},{key:"time",type:"dateRange",placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],searchKeys:["start_time","end_time"],inputProps:{ranges:w["c"],disabledDate:function(e){return e<x()().subtract(3,"months")||e>x()().endOf("day")}},initialValue:[x()().subtract(30,"days"),x()()]},{key:"good_name",placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0\u641c\u7d22"},{key:"sale_type",placeholder:"\u5168\u90e8\u552e\u540e\u7c7b\u578b",enums:t}]},V=function(){return[{title:"\u8ba2\u5355\u4fe1\u606f",key:"goodsInfo",span:"3",render:function(e,t){return C.a.createElement(W,{item:e,field:t,key:"goodsInfo"})}},{title:"\u552e\u540e\u7c7b\u578b",key:"afterType",span:"1",render:function(e,t){return C.a.createElement(K,{item:e,field:t,key:"afterType"})}},{title:function(){return C.a.createElement("span",{className:P.a.title},"\u7533\u8bf7\u91d1\u989d",C.a.createElement(R["a"],{content:"\u552e\u540e\u7533\u8bf7\u7684\u5408\u8ba1\u552e\u540e\u91d1\u989d\uff0c\u552e\u540e\u4f20\u53c2\uff1b\u5c55\u793a\u91d1\u989d+\u552e\u540e\u6e20\u9053"},C.a.createElement(j["a"],{className:P.a.questionIcon})))},key:"totalMoney",span:"1",render:function(e,t){return C.a.createElement(z,{item:e,field:t,key:"totalMoney"})}},{title:function(){return C.a.createElement("span",{className:P.a.title},"\u9000\u6b3e\u91d1\u989d",C.a.createElement(R["a"],{content:"\u5f53\u524d\u8ba2\u5355\u7684\u552e\u540e\u4ea7\u751f\u7684\u5b9e\u9645\u9000\u6b3e\u91d1\u989d\uff1b\u5c55\u793a\u91d1\u989d+\u552e\u540e\u6e20\u9053"},C.a.createElement(j["a"],{className:P.a.questionIcon})))},key:"returnMoney",span:"1",render:function(e,t){return C.a.createElement(B,{item:e,field:t,key:"returnMoney"})}},{title:function(){return C.a.createElement("span",{className:P.a.title},"\u8865\u507f\u91d1\u989d",C.a.createElement(R["a"],{content:"\u5f53\u524d\u8ba2\u5355\u5728\u552e\u540e\u4e2d\u9664\u9000\u6b3e\u5916\u5f97\u5230\u7684\u989d\u5916\u8865\u507f\u91d1\u989d\u53ca\u8fd4\u8fd8\u6e20\u9053\uff08\u4f59\u989d\u6216\u4f63\u91d1\uff09"},C.a.createElement(j["a"],{className:P.a.questionIcon})))},key:"compensation",span:"1",render:function(e,t){return C.a.createElement(Q,{item:e,field:t,key:"compensation"})}}]},Z=a("7h30"),F=a("w4ly");function H(e){return function(){var t,a=h()(e);if(U()){var n=h()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return y()(this,t)}}function U(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var X=(n=Object(M["connect"])(function(e){var t=e.afterSaleList,a=e.loading;return{afterSaleList:t,loading:a}}),n((l=function(e){v()(a,e);var t=H(a);function a(e){var n;return m()(this,a),n=t.call(this,e),n.toggleAfterSaleModal=function(){n.setState(function(e){return{afterSaleModal:!e.afterSaleModal}})},n.handlePageChange=function(e,t){var a=n.props.dispatch;a({type:"afterSaleList/getList",payload:{page:e,pageSize:t}})},n.onSearch=function(e){var t=n.props.dispatch;t({type:"afterSaleList/onSearch",payload:e}),t({type:"afterSaleList/getList",payload:e})},n.getList=function(e){var t=n.props.dispatch;t({type:"afterSaleList/getList",payload:e})},n.routeAfterSale=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState({details:e}),n.toggleAfterSaleModal()},n.routeToOrder=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";T["j"].push({pathname:"/order/orderDetail/".concat(e)})},n.renderOrders=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=V(),r=e.order_sn,l=void 0===r?"":r,o=e.order_id,i=void 0===o?"":o,s=e.return_sn,c=void 0===s?"":s,u=e.created_at,d=void 0===u?"":u,m=e.uid_name,f=void 0===m?"":m,p=e.uid,_=void 0===p?"":p;return C.a.createElement("div",{className:P.a.list,key:t},C.a.createElement("div",{className:P.a.listTitle},C.a.createElement("span",null,"\u8ba2\u5355\xa0:\xa0\xa0",$api.order.getOrderDetail.permission()?C.a.createElement("a",{onClick:function(){n.routeToOrder(i)}},l):l),C.a.createElement("span",null,"\u552e\u540e\u670d\u52a1\u5355\xa0:\xa0\xa0",C.a.createElement("a",{onClick:function(){n.routeAfterSale(e)}},c)),C.a.createElement("span",null,"\u7533\u8bf7\u65f6\u95f4\xa0:\xa0\xa0",d&&x()(d).format(w["d"].DATETIME)),C.a.createElement("span",{className:"pull-right"},"\u7528\u6237\u540d:\xa0",f,"\xa0(",_,")")),C.a.createElement("div",{className:"".concat(P.a.listContent," ").concat(P.a.flex)},a&&a.map(function(t){return t.render(e,t)})))},n.state={afterSaleModal:!1,details:{}},n}return p()(a,[{key:"renderAfterSaleModal",value:function(){var e=this.state,t=e.afterSaleModal,a=e.details;return a&&t?C.a.createElement(F["a"],{onCancel:this.toggleAfterSaleModal,modalVisible:t,order:a}):null}},{key:"renderTotals",value:function(){var e=this.props.afterSaleList.sum,t=void 0===e?{}:e,a=t||{},n=a.sales_num,r=void 0===n?"":n,l=a.sum_return_money,o=void 0===l?"":l,i=a.sum_total_fee,s=void 0===i?"":i,d=a.sum_add_fee,m=void 0===d?"":d;return C.a.createElement(c["a"],{type:"flex",justify:"space-around",className:P.a.totalRow,gutter:16},C.a.createElement(u["a"],{span:6},C.a.createElement("div",{className:P.a.totalCol},C.a.createElement("div",null,C.a.createElement("span",null,"\u552e\u540e\u8ba2\u5355\u603b\u91cf\xa0(\u5355)"),C.a.createElement("span",{className:P.a.num},S.a.formatNumber(r))))),C.a.createElement(u["a"],{span:6},C.a.createElement("div",{className:P.a.totalCol},C.a.createElement("div",null,C.a.createElement("span",null,"\u552e\u540e\u7533\u8bf7\u603b\u989d\xa0(\u5143)"),C.a.createElement("span",{className:P.a.num},S.a.formatMoney(s,"\uffe5"))))),C.a.createElement(u["a"],{span:6},C.a.createElement("div",{className:P.a.totalCol},C.a.createElement("div",null,C.a.createElement("span",null,"\u552e\u540e\u9000\u6b3e\u603b\u989d\xa0(\u5143)"),C.a.createElement("span",{className:P.a.num},S.a.formatMoney(o,"\uffe5"))))),C.a.createElement(u["a"],{span:6},C.a.createElement("div",{className:P.a.totalCol},C.a.createElement("div",null,C.a.createElement("span",null,"\u552e\u540e\u8865\u507f\u603b\u989d\xa0(\u5143)"),C.a.createElement("span",{className:P.a.num},S.a.formatMoney(m,"\uffe5"))))))}},{key:"renderList",value:function(){var e=this,t=this.props,a=t.afterSaleList,n=(t.loading,a.list),r=void 0===n?[]:n,l=(a.pagination,r&&r.map(function(t,a){return e.renderOrders(t,a)}));return l}},{key:"render",value:function(){var e=this,t=this.props,a=t.afterSaleList,n=t.loading,r=a.pagination,l=a.query,i=a.type,c=void 0===i?{}:i,u=c&&Object.keys(c)&&Object.keys(c).reduce(function(e,t){return e.concat([{value:t,name:c[t]}])},[]),d=[{type:"export",name:"\u5bfc\u51fa",url:$api.finance.afterSaleExport.url,query:l,permission:Object(w["m"])("afterSaleExport")}].filter(function(e){return e.permission}),m={search:l,fields:J.call(this,u),onSearch:this.onSearch},f=s()({},r,{onChange:this.handlePageChange,onShowSizeChange:function(t,a){return e.handlePageChange(1,a)}}),p=n.effects["afterSaleList/getList"];return C.a.createElement(L["x"],{inner:!0,className:P.a.afterSaleList},C.a.createElement(L["y"],{btns:d,className:P.a.totalTitle}),this.renderTotals(),C.a.createElement(L["C"],m),C.a.createElement("div",{style:{position:"relative"}},p&&C.a.createElement(o["a"],{className:P.a.spin}),C.a.createElement(Z["a"],{fields:V()}),this.renderList(),C.a.createElement(L["z"],{paginationProps:f})),this.renderAfterSaleModal())}}]),a}(b["PureComponent"]),r=l))||r);t["default"]=X}}]);