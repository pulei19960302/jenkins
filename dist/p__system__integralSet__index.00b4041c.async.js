(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[87],{"7r+9":function(e,a,t){e.exports={container:"container___8MJui",title:"title___3ITOv",icon:"icon___24k49",switch:"switch___2nNgL"}},PIz0:function(e,a,t){e.exports={pageBlockContainer:"pageBlockContainer___3gKti",panelContainer:"panelContainer___1Coxe",blockContainer:"blockContainer___3NrY2",pageLoading:"pageLoading___2k7Pc"}},SSfP:function(e,a,t){e.exports={container:"container___3PVWA",left:"left___1v535",right:"right___3c3oV",rightBallBox:"rightBallBox___JtrUg",rightBall:"rightBall___20UfO",rightAdd:"rightAdd___cOqPR",rightAddContainer:"rightAddContainer___3Z7lT",rightAddDesc:"rightAddDesc___3-0zq",closeIcon:"closeIcon___N10fi",inputContainer:"inputContainer___2-OdJ",inputIcon:"inputIcon___3gdll"}},V9U6:function(e,a,t){"use strict";t.r(a);t("T2oS");var n=t("W9HT"),l=(t("14J3"),t("BMrR")),i=(t("+L6B"),t("2/Rp")),c=(t("giR+"),t("fyUT")),r=t("eHn4"),o=t.n(r),s=t("p0pE"),d=t.n(s),m=(t("y8nQ"),t("Vl3Y")),u=t("qIgq"),g=t.n(u),h=t("q1tI"),p=t.n(h),f=(t("XlDN"),t("Kvkj")),_=(t("Q9mQ"),t("diRs")),E=t("Lyp1"),v=t("7r+9"),y=t.n(v),C=function(e){var a=e.className,t=e.onChange,n=e.defaultChecked,l=e.name,i=e.desc;return p.a.createElement("div",{className:a,style:{display:"flex",alignItems:"center"}},l&&p.a.createElement("div",{style:{color:"rgba(0,0,0,0.85)",fontWeight:"bold",fontSize:14,width:94}},l),p.a.createElement(f["m"],{onChange:t,value:n,texts:["\u662f","\u5426"]}),p.a.createElement("div",{className:"ml8",style:{color:"rgba(0,0,0,0.65)",fontSize:12}},n?"\u5df2\u5f00\u542f".concat(i[0]||""):"\u5df2\u5173\u95ed".concat(i[1]||"")))},b=function(e){var a=e.title,t=e.help,n=e.onChange,l=e.desc,i=e.defaultChecked,c=p.a.createElement("div",null,t);return p.a.createElement("div",{className:y.a.container},p.a.createElement("div",{className:y.a.title},a),t&&p.a.createElement(_["a"],{content:c},p.a.createElement(E["a"],{className:y.a.icon})),p.a.createElement(C,{className:y.a.switch,onChange:n,defaultChecked:i,desc:l}))},N=t("jehZ"),k=t.n(N),w=(t("OaEy"),t("2fM7")),x=t("jN4g"),I=t("xvlK"),O=t("Bh7D"),B=t.n(O),j=t("Fu38"),S=t.n(j),A=t("SSfP"),F=t.n(A),D=w["a"].Option,J=["A","B","C","D","E","F","G","H","I","J","K","L","M","N"],L=[{name:"\u6d88\u8d39\u91d1\u989d",value:1,rules:{min:0,max:100}},{name:"\u56fa\u5b9a\u79ef\u5206",value:2,rules:{min:0}},{name:"\u65e0",value:3}],T=function(){return L.map(function(e){return p.a.createElement(D,{key:e.value,value:e.value},e.name)})},P=function(e){var a=e.item,t=e.index,n=e.onChange,l=e.length,i=(e.type,["#DDF0FF","#49A1EE"]),c="\u7528\u6237",r=function(){n("add",null,null)},s=function(){n("del",t,null)},m=function(e,l){n("change",t,d()({},a,o()({},e,l)))},u=function(e){n("change",t,d()({},a,{integral_way:Number(e)}))};return p.a.createElement("div",{className:"".concat(F.a.container," animated fadeInLeft")},0!==t&&p.a.createElement("div",{className:F.a.left},p.a.createElement("div",{style:{width:"100%"}},p.a.createElement("img",{src:B.a,width:127,style:{marginBottom:16},alt:""}),p.a.createElement("div",{style:{height:32,textAlign:"center"}},"\u63a8\u8350\u4eba"))),t<l-1?p.a.createElement("div",{className:F.a.right},p.a.createElement("div",{className:F.a.rightBallBox},p.a.createElement("div",{className:F.a.rightBall,style:{backgroundColor:0===t?"#FFE2D5":i[0],color:0===t?"#D4755F":i[1]}},0===t?"\u6d88\u8d39\u8005":"".concat(c).concat(J[t-1]))),p.a.createElement("div",{className:F.a.inputContainer,style:{marginTop:7}},p.a.createElement(f["n"],{className:F.a.inputIcon,type:"iconjifen1"}),p.a.createElement(w["a"],{onChange:u,defaultValue:a.integral_way,style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9"},T())),p.a.createElement("div",{className:F.a.inputContainer,style:{marginTop:7}},p.a.createElement(f["n"],{style:{opacity:0},className:F.a.inputIcon,type:"iconjifen1"}),(1===+a.integral_way||2===+a.integral_way)&&p.a.createElement(f["p"],k()({value:a.integral,onChange:function(e){m("integral",e)},precision:0,min:0},1===a.integral_way?{max:100}:null,{placeholder:"\u79ef\u5206",addonAfter:1===+a.integral_way?"%":""}))),t>1&&p.a.createElement(x["a"],{onClick:s,className:F.a.closeIcon})):p.a.createElement("div",{onClick:r,className:"".concat(F.a.right," ").concat(F.a.rightAdd)},p.a.createElement("div",{className:F.a.rightAddContainer},p.a.createElement("img",{width:70,src:S.a,style:{marginBottom:20}}),p.a.createElement("div",{className:F.a.rightAddDesc},p.a.createElement(I["a"],null),p.a.createElement("span",{className:"ml8"},"\u65b0\u589e".concat(c))))))},V=t("7Qib"),q=t("PIz0"),z=t.n(q);t("17x9");t.d(a,"getOrderItem",function(){return R});var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.integral,t=void 0===a?"":a,n=e.integral_way,l=void 0===n?3:n;return{uuid:Object(V["b"])(),integral_way:l,integral:t}},K=[R(),R(),R()],M=[{integral:"",uuid:Object(V["b"])()},{integral:"",uuid:Object(V["b"])()},{integral:"",uuid:Object(V["b"])()}],Q=function(){var e=m["a"].useForm(),a=g()(e,1),t=a[0],r=Object(h["useState"])(!0),s=g()(r,2),u=s[0],_=s[1],E=Object(h["useState"])(K),v=g()(E,2),y=v[0],C=v[1],N=Object(h["useState"])(0),k=g()(N,2),w=k[0],x=k[1],I=Object(h["useState"])(M),O=g()(I,2),B=O[0],j=O[1],S=Object(h["useState"])(0),A=g()(S,2),F=A[0],D=A[1];function J(e,a){console.log(">",e)}function L(e){var a={order:{switch:w,data:y.map(function(e){return d()({},e,{uuid:void 0})})},share:{switch:F,data:B.map(function(a){var t=a.integral,n=a.uuid;return{integral:e[n]||t}})}};$api.system.setIntegral({data:a},{loadingFn:_})}function T(e,a,t){var n=JSON.parse(JSON.stringify(y));switch(e){case"del":n.splice(a,1);break;case"add":n.push(R({}));break;case"change":n.splice(a,1,t);break}C(n)}return Object(h["useEffect"])(function(){$api.system.getIntegral({},{loadingFn:_}).then(function(e){var a=e.data,n=a||{},l=n.order,i=n.share;l&&(x(l.switch),l.data.length&&C(l.data.map(function(e){return d()({},e,{uuid:Object(V["b"])()})}))),i&&(D(i.switch),i.data.length&&j(i.data.map(function(e){var a=Object(V["b"])();return t.setFieldsValue(o()({},a,e.integral)),d()({},e,{uuid:a})})))})},[]),p.a.createElement(f["x"],{inner:!0,style:{padding:0,backgroundColor:"inherit"}},p.a.createElement("div",{className:z.a.pageBlockContainer},p.a.createElement(b,{onChange:x,defaultChecked:w,title:"\u6d88\u8d39\u79ef\u5206",desc:["\uff0c\u4ea7\u751f\u79ef\u5206","\uff0c\u4e0d\u4ea7\u751f\u79ef\u5206"]}),1===w&&p.a.createElement("div",{className:"".concat(z.a.panelContainer," animated fadeIn")},p.a.createElement("div",{className:z.a.blockContainer},y.map(function(e,a,t){return p.a.createElement(P,{key:e.uuid,item:e,index:a,length:t.length,onChange:T,type:1})})),p.a.createElement("div",{className:"fcblack5 fs12"},"\u6ce8\u610f\uff1a\u79ef\u5206\u4ec5\u652f\u6301\u6309\u63a8\u8350\u5173\u7cfb\u53d1\u653e\uff1b"),p.a.createElement("div",{className:"fcblack5 fs12"},"\u79ef\u5206\u5728\u8ba2\u5355\u4ea4\u6613\u5b8c\u6210\u540e\u53d1\u653e\uff0c\u8ba2\u5355\u53d6\u6d88\uff0c\u5219\u79ef\u5206\u9000\u6362\u5546\u5bb6\u3002"))),p.a.createElement(m["a"],{form:t,onFinish:L,labelCol:{span:7,lg:6,xl:4,xxl:3},onValuesChange:J},p.a.createElement("div",{className:z.a.pageBlockContainer},p.a.createElement(b,{onChange:D,defaultChecked:F,title:"\u5206\u4eab\u79ef\u5206",help:"\u5f53\u6709\u4eba\u901a\u8fc7\u5206\u4eab\u94fe\u63a5\u6216\u8005\u5206\u9500\u540d\u7247\u6210\u4e3a\u5206\u4eab\u8005\u4e0b\u7ea7\uff0c\u5c06\u7ed9\u5206\u4eab\u8005\u53d1\u653e\u79ef\u5206\u3002",desc:[]}),1===F&&p.a.createElement("div",{style:{padding:"20px 44px"}},B.map(function(e,a){return p.a.createElement(m["a"].Item,{key:e.uuid+"test",label:"\u5206\u4eab\u8005".concat(a>0?"".concat("".padEnd(a,"\u4e0a"),"\u7ea7"):"","\u83b7\u5f97\u79ef\u5206")},p.a.createElement(m["a"].Item,{noStyle:!0,name:[e.uuid],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5927\u4e8e\u7b49\u4e8e0\u7684\u6574\u6570"}]},p.a.createElement(c["a"],{min:0,placeholder:"\u8bf7\u8f93\u5165",style:{width:164}})),p.a.createElement("span",{style:{paddingLeft:20}},"\u79ef\u5206"))}))),$api.system.setIntegral.permission()&&p.a.createElement(l["a"],{type:"flex",justify:"center",style:{backgroundColor:"#fff",padding:12}},p.a.createElement(i["a"],{loading:u,type:"submit",htmlType:"submit"},"\u63d0\u4ea4"))),u&&p.a.createElement("div",{className:z.a.pageLoading},p.a.createElement(n["a"],null)))};a["default"]=Q}}]);