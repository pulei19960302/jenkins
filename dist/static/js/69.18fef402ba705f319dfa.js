webpackJsonp([69],{"42Q0":function(e,t){},iOSt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("aA9S"),n=a.n(i),r=a("lC5x"),o=a.n(r),s=a("J0Oq"),l=a.n(s),c=a("4YfN"),u=a.n(c),d=a("48sp"),p=a("FFUX"),f={name:"afterSaleProblem",data:function(){return{current:1,pageSize:10,count:0,dialogVisible:!1,loading:!1,form:{title:""},oldRowData:{},rules:{title:[{required:!0,message:"请输入",trigger:"change"}]},tableData:[],searchOPtions:[{type:"input",key:"keywords",placeholder:"名称"}],multipleSelection:[],options:[{value:1,label:"取消订单"},{value:2,label:"申请售后"}],paginationOptions:[{value:"del",label:"批量删除"}],isEdit:!1,id:null}},computed:u()({},Object(d.e)("user",["button_permissions"])),created:function(){this.getData()},methods:{switchChange:function(e,t){var a=this;return l()(o.a.mark(function i(){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.$api.order.reasonSetStatus({status:e,id:t});case 2:case"end":return i.stop()}},i,a)}))()},resetForm:function(){this.$refs.form.resetFields()},handelEdit:function(e){var t=e.title,a=e.id;this.id=a,this.isEdit=!0,this.dialogVisible=!0,this.form={title:t},this.oldRowData={title:t}},AddReason:function(e){var t,a=this;this.$refs.form.validate((t=l()(o.a.mark(function t(i){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=20;break}if(t.prev=1,r=n()({},a.form),!e){t.next=8;break}if(!p.e.isEqual(a.oldRowData,a.form)){t.next=7;break}return a.$message({message:"暂无数据变更",type:"warning"}),t.abrupt("return");case 7:r.id=a.id;case 8:return t.next=10,a.$api.service.typeEdittype(r);case 10:a.form.title="",a.isEdit=!1,a.dialogVisible=!1,a.resetForm(),a.getData(),t.next=20;break;case 17:throw t.prev=17,t.t0=t.catch(1),new Error(t.t0);case 20:case"end":return t.stop()}},t,a,[[1,17]])})),function(e){return t.apply(this,arguments)}))},handelSearch:function(e,t){var a=this;({search:function(){a.query=u()({},t),a.current=1,a.getData()},reset:function(){a.query={},a.pageSize=10,a.current=1,a.getData()}})[e]()},getData:function(){var e=this;return l()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$api.service.typelist(u()({},e.query,{pageSize:e.pageSize,page:e.current}));case 4:a=t.sent,i=a.data,e.tableData=i.items,e.count=i.count,e.loading=!1,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),e.loading=!1;case 14:case"end":return t.stop()}},t,e,[[0,11]])}))()},handleSelectionChange:function(e){this.multipleSelection=e.map(function(e){return e.id})},handlePageChange:function(e){this.current=e,this.getData()},handleSizeChange:function(e){this.pageSize=e,this.getData()},handleOpreate:function(){this.multipleSelection.length<1?this.$message.error("请选择退货原因"):this.handleDel(this.multipleSelection)},jumpTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";this.$router.push({name:e,params:{id:t}})},handleDel:function(e){var t=this,a=void 0;a=p.e.isArray(e)?e.join(","):e,this.$confirm("删除类型会删除关联的问题，是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.service.typeDeltype({ids:a});case 2:t.getData();case 3:case"end":return e.stop()}},e,t)})))}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Search",{attrs:{searchOPtions:e.searchOPtions},on:{searchCallback:e.handelSearch}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.order.reason.edit],expression:"[$api.order.reason.edit]"}],attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加类型")])],1),e._v(" "),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","highlight-current-row":!0,border:"",data:e.tableData,"tooltip-effect":"dark","header-cell-style":{background:"#fafafa",border:"none",borderBottom:"1px solid #e8e8e8"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"title",label:"类型名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"数量",prop:"num"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("validDateTime")(t.row.created_at)))]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"180px",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.jumpTo("problemForDetail",t.row.id)}}},[e._v("问题")]),e._v(" "),a("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.order.reason.edit],expression:"[$api.order.reason.edit]"}],staticClass:"look-word",attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return e.handelEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.order.reason.del],expression:"[$api.order.reason.del]"}],staticClass:"look-word",attrs:{size:"mini",type:"danger",plain:""},on:{click:function(a){return e.handleDel(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{current:e.current,pageSize:e.pageSize,count:parseInt(e.count,10),options:e.paginationOptions},on:{opreateCBK:e.handleOpreate,pageChangeCBK:e.handlePageChange,sizeChangeCBK:e.handleSizeChange}})],e._v(" "),a("el-dialog",{attrs:{title:"添加类型",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"类型名称：",prop:"title"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1,e.isEdit=!1,e.resetForm()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.AddReason(e.isEdit)}}},[e._v("\n                确定\n            ")])],1)],1)],2)},staticRenderFns:[]};var m=a("C7Lr")(f,h,!1,function(e){a("42Q0")},"data-v-20875828",null);t.default=m.exports}});