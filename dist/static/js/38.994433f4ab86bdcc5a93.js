webpackJsonp([38],{"8yd5":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("lC5x"),n=a.n(i),l=a("J0Oq"),r=a.n(l),o=a("4YfN"),s=a.n(o),u={name:"ParametersList",data:function(){return{show:!0,options:[{value:"del",label:"删除"}],query:{},current:1,pageSize:10,count:0,tableData:[],dialogVisible:!1,submit:{type_id:this.$route.params.id,name:"",sort:"",id:"",choose_type:"select"},rules:{name:[{required:!0,message:"请输入",trigger:"change"}],sort:[{required:!0,message:"请输入",trigger:"change"}]},columnSelect:[],param_id:this.$route.params.id,type_id:this.$route.params.id,addType:"",typeoptions:[{value:"select",label:"下拉框"},{value:"checkbox ",label:"多选框"},{value:"radio",label:"单选框"}]}},created:function(){this.getData()},methods:{handelSearch:function(t,e){var a=this;({search:function(){a.query=s()({},e),a.current=1,a.getData()},reset:function(){a.query={},a.pageSize=10,a.current=1,a.getData()}})[t]()},getData:function(){var t=this;return r()(n.a.mark(function e(){var a,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.product.paramList(s()({},t.query,{pageSize:t.pageSize,page:t.current,type_id:t.type_id}));case 3:a=e.sent,i=a.data,t.tableData=i.items,t.count=i.count,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}},e,t,[[0,9]])}))()},handlePageChange:function(t){this.current=t,this.getData()},handleSizeChange:function(t){this.pageSize=t,this.getData()},handleSelectionChange:function(t){var e=[];t.length<1?this.columnSelect=[]:(t.map(function(t){e.push(t.id)}),this.columnSelect=e)},jumpTo:function(t,e,a,i){this.$router.push({name:t,params:{type:e,pid:a,id:i}})},open:function(t,e){this.dialogVisible=!0,this.addType=t,e&&(this.submit.id=e.id,this.submit.name=e.name,this.submit.sort=e.sort)},add:function(){var t=this,e=this;this.$refs.submit.validate(function(a){if(!a)return console.log("error submit!!"),!1;"add"==t.addType?t.$api.product.paramAdd(t.submit).then(function(){e.submit.name="",e.submit.sort="",e.dialogVisible=!1,e.getData()}):t.$api.product.paramEdit(t.submit).then(function(){e.submit.name="",e.submit.sort="",e.dialogVisible=!1,e.submit.id="",e.getData()})})},handleDel:function(t){var e=this;this.$confirm("确认删除选中商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.del(t)}).catch(function(){})},del:function(t){console.log(t);var e=this;if("many"==t){if(this.columnSelect.length<1)return void this.$message({message:"请至少选择一条申请",type:"error"});this.$api.product.paramDelall({ids:this.columnSelect.join(",")}).then(function(){e.getData()})}else this.$api.product.paramDel({id:t}).then(function(){e.getData()})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"types-list"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.open("add")}}},[t._v("添 加")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"id",label:"编号"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"参数名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"values",label:"可选值列表"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"sort",label:"排序"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return t.open("edit",e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return t.jumpTo("ParametersValusList","ValusList",t.param_id,e.row.id)}}},[t._v("编辑参数值")]),t._v(" "),a("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return t.handleDel(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("Pagination",{attrs:{current:t.current,count:t.count,pageSize:t.pageSize},on:{opreateCBK:function(e){return t.handleDel("many")},pageChangeCBK:t.handlePageChange,sizeChangeCBK:t.handleSizeChange}}),t._v(" "),a("el-dialog",{attrs:{title:"添加参数",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"submit",attrs:{model:t.submit,rules:t.rules,"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"类型名称：",prop:"name"}},[a("el-input",{model:{value:t.submit.name,callback:function(e){t.$set(t.submit,"name",e)},expression:"submit.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[a("el-input",{model:{value:t.submit.sort,callback:function(e){t.$set(t.submit,"sort",e)},expression:"submit.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择类型："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.submit.choose_type,callback:function(e){t.$set(t.submit,"choose_type",e)},expression:"submit.choose_type"}},t._l(t.typeoptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("\n                确定\n            ")])],1)],1)],1)},staticRenderFns:[]};var p=a("C7Lr")(u,c,!1,function(t){a("j3G3")},"data-v-ca14eeaa",null);e.default=p.exports},j3G3:function(t,e){}});