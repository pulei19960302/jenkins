webpackJsonp([59],{AIEt:function(e,t){},"Dxg+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("lC5x"),i=n.n(a),r=n("aA9S"),s=n.n(r),o=n("J0Oq"),l=n.n(o),c=n("4YfN"),u=n.n(c),p=n("48sp"),d=n("FFUX"),h={name:"freightFormwork",data:function(){return{isAdd:!0,drawerVisible:!1,form:{merchant_no:"",terminal_id:"",status:0},rules:{merchant_no:[{required:!0,message:"请输入商户号",trigger:"blur"},{min:6,message:"应该包含至少6个字符",trigger:"blur"}],terminal_id:[{required:!0,message:"请输入终端ID",trigger:"blur"},{min:6,message:"应该包含至少6个字符",trigger:"blur"}],token:[{required:!0,message:"请输入Token",trigger:"blur"},{min:16,message:"应该包含至少16个字符",trigger:"blur"}]},paginationOptions:[],current:1,pageSize:10,count:0,loading:!1,tableData:[],multipleSelection:[],value2:"",searchOPtions:[{type:"input",key:"keyword",placeholder:"搜索关键字"}],query:{}}},computed:u()({},Object(p.e)("user",["button_permissions"])),created:function(){this.getMerchantList(),this.button_permissions.includes(this.$api.setting.merchant_setting.delete)||(this.paginationOptions=[])},methods:{handleAdd:function(){this.isAdd=!0,this.drawerVisible=!0,this.form={merchant_no:"",terminal_id:"",status:0}},handleEdit:function(e){this.isAdd=!1,this.drawerVisible=!0,this.getData(e)},submit:function(){var e,t=this;this.$refs.ruleForm.validate((e=l()(i.a.mark(function e(n){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=12;break}return e.prev=1,a=s()({},t.form),e.next=5,t.$api.setting.editMerchant(a);case 5:t.drawerVisible=!1,t.getMerchantList(),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),new Error(e.t0);case 12:case"end":return e.stop()}},e,t,[[1,9]])})),function(t){return e.apply(this,arguments)}))},getData:function(e){var t=this;return l()(i.a.mark(function n(){var a,r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$api.setting.getMerchantInfo({id:e});case 3:a=n.sent,r=a.data,t.form=r,n.next=11;break;case 8:throw n.prev=8,n.t0=n.catch(0),new Error(n.t0);case 11:case"end":return n.stop()}},n,t,[[0,8]])}))()},changeDisplayStatus:function(e){var t=this,n=e.is_enable,a=e.id;return l()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.setting.setEnableMerchant({is_enable:n,id:a});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.tableData.map(function(e){e.id===a&&t.$set(e,"is_enable",1==n?0:1)});case 8:case"end":return e.stop()}},e,t,[[0,5]])}))()},handelSearch:function(e,t){var n=this;({search:function(){n.query=u()({},t),n.current=1,n.getMerchantList()},reset:function(){n.query={},n.pageSize=10,n.current=1,n.getMerchantList()}})[e]()},getMerchantList:function(){var e=this;return l()(i.a.mark(function t(){var n,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$api.setting.getMerchantList(u()({},e.query,{pagesize:e.pageSize,page:e.current}));case 4:n=t.sent,a=n.data,e.tableData=a.data,e.count=Number(a.total),e.loading=!1,t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(0),e.loading=!1,new Error(t.t0);case 15:case"end":return t.stop()}},t,e,[[0,11]])}))()},handleSelectionChange:function(e){this.multipleSelection=e.map(function(e){return e.id})},handlePageChange:function(e){this.current=e,this.getMerchantList()},handleSizeChange:function(e){this.pageSize=e,this.getMerchantList()},jumpTo:function(e,t,n){this.$router.push({name:e,params:{type:t,id:n}})},handleDel:function(e){var t=this;this.$confirm("确认删除选中设置？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return void 0,d.e.isArray(e)?e.join(","):e,n.prev=2,n.next=5,t.$api.setting.deleteMerchant({id:e});case 5:t.getMerchantList(),n.next=11;break;case 8:throw n.prev=8,n.t0=n.catch(2),new Error(n.t0);case 11:case"end":return n.stop()}},n,t,[[2,8]])}))).catch(function(e){throw new Error(e)})}}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"min-height":"calc(100vh - 135px)",background:"#fff"}},[n("Search",{attrs:{searchOPtions:e.searchOPtions},on:{searchCallback:e.handelSearch}},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.setting.merchant_setting.edit],expression:"[$api.setting.merchant_setting.edit]"}],attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleAdd(t)}}},[e._v("添加")])],1),e._v(" "),[n("div",{staticStyle:{padding:"0 16px 16px 16px",background:"#fff","border-radius":"0 0 4px 4px",width:"100%"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","highlight-current-row":!0,border:"",data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{sortable:"",prop:"id",label:"编号"}}),e._v(" "),n("el-table-column",{attrs:{label:"商户号",prop:"merchant_no","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{label:"终端ID",prop:"terminal_id","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{width:"260px",label:"Token",prop:"token","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{label:"是否启用",prop:"is_enable"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{disabled:!e.button_permissions.includes(e.$api.setting.merchant_setting.setEnable),"active-value":"1","inactive-value":"0"},on:{change:function(n){return e.changeDisplayStatus(t.row)}},model:{value:t.row.is_enable,callback:function(n){e.$set(t.row,"is_enable",n)},expression:"scope.row.is_enable"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"120px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.setting.merchant_setting.edit],expression:"[$api.setting.merchant_setting.edit]"}],staticClass:"look-word",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(n){return n.stopPropagation(),e.handleEdit(t.row.id)}}},[e._v("编辑")]),e._v(" "),n("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.setting.merchant_setting.delete],expression:"[$api.setting.merchant_setting.delete]"}],staticClass:"look-word",attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(n){return e.handleDel(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),n("RightSidePopup",{attrs:{mask:"",visible:e.drawerVisible,width:"50%"},on:{"update:visible":function(t){e.drawerVisible=t}}},[n("div",{staticClass:"platformSetting"},[n("p",{staticClass:"title"},[e._v(e._s(e.isAdd?"添加商户号":"编辑商户号"))]),e._v(" "),n("el-form",{ref:"ruleForm",staticStyle:{width:"565px",margin:"0 auto"},attrs:{"label-position":"right","label-width":"150px",model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"商户号：",prop:"merchant_no"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入商户号"},model:{value:e.form.merchant_no,callback:function(t){e.$set(e.form,"merchant_no",t)},expression:"form.merchant_no"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"终端ID：",prop:"terminal_id"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入终端ID"},model:{value:e.form.terminal_id,callback:function(t){e.$set(e.form,"terminal_id",t)},expression:"form.terminal_id"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Token：",prop:"token"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入Token"},model:{value:e.form.token,callback:function(t){e.$set(e.form,"token",t)},expression:"form.token"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"是否启用：",prop:"is_enable"}},[n("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.is_enable,callback:function(t){e.$set(e.form,"is_enable",t)},expression:"form.is_enable"}})],1),e._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.setting.config.save],expression:"[$api.setting.config.save]"}],staticClass:"submit",attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)]),e._v(" "),n("Pagination",{attrs:{options:e.paginationOptions,current:e.current,pageSize:e.pageSize,count:e.count},on:{pageChangeCBK:e.handlePageChange,sizeChangeCBK:e.handleSizeChange}})]],2)},staticRenderFns:[]};var g=n("C7Lr")(h,m,!1,function(e){n("AIEt")},"data-v-46c1b1f5",null);t.default=g.exports}});