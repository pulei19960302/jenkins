webpackJsonp([63],{ZjQg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("aA9S"),r=a.n(n),i=a("lC5x"),o=a.n(i),s=a("J0Oq"),l=a.n(s),c=a("4YfN"),u=a.n(c),p=a("48sp"),d=a("FFUX"),f={name:"causeOfReturn",data:function(){return{current:1,pageSize:10,count:0,dialogVisible:!1,loading:!1,form:{content:"",type:"",sort:"",status:""},oldRowData:{},rules:{content:[{required:!0,message:"请输入",trigger:"change"}],type:[{required:!0,message:"请选择",trigger:"change"}],sort:[{required:!0,message:"请输入",trigger:"change"}]},tableData:[],searchOPtions:[{type:"input",key:"keywords",placeholder:"原因"},{type:"select",key:"type",placeholder:"类型",options:[{label:"取消订单",value:1},{label:"申请售后",value:2}]},{type:"select",key:"status",placeholder:"状态",options:[{label:"启用",value:10},{label:"禁用",value:0}]}],multipleSelection:[],options:[{value:1,label:"取消订单"},{value:2,label:"申请售后"}],paginationOptions:[{value:"del",label:"批量删除",type:"danger"}],isEdit:!1,id:null}},computed:u()({},Object(p.e)("user",["button_permissions"])),created:function(){this.getData(),this.button_permissions.includes(this.$api.order.reason.del)||(this.paginationOptions=[])},methods:{switchChange:function(e,t){var a=this;return l()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.$api.order.reasonSetStatus({status:e,id:t});case 2:case"end":return n.stop()}},n,a)}))()},resetForm:function(){this.$refs.form.resetFields()},handelEdit:function(e){var t=e.content,a=e.type,n=e.sort,r=e.status,i=e.id;this.id=i,this.isEdit=!0,this.dialogVisible=!0,this.form={content:t,sort:n,type:a,status:r},this.oldRowData={content:t,sort:n,type:a,status:r}},AddReason:function(e){var t,a=this;this.$refs.form.validate((t=l()(o.a.mark(function t(n){var i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=18;break}if(t.prev=1,i=r()({},a.form),!e){t.next=8;break}if(!d.e.isEqual(a.oldRowData,a.form)){t.next=7;break}return a.$message({message:"暂无数据变更",type:"warning"}),t.abrupt("return");case 7:i.id=a.id;case 8:return t.next=10,a.$api.order.reasonEdit(i);case 10:a.isEdit=!1,a.dialogVisible=!1,a.getData(),t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(1),new Error(t.t0);case 18:case"end":return t.stop()}},t,a,[[1,15]])})),function(e){return t.apply(this,arguments)}))},handelSearch:function(e,t){var a=this;({search:function(){a.query=u()({},t),a.current=1,a.getData()},reset:function(){a.query={},a.pageSize=10,a.current=1,a.getData()}})[e]()},getData:function(){var e=this;return l()(o.a.mark(function t(){var a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$api.order.reasonList(u()({},e.query,{pageSize:e.pageSize,page:e.current}));case 4:a=t.sent,n=a.data,e.tableData=n.items,e.count=n.count,e.loading=!1,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),e.loading=!1;case 14:case"end":return t.stop()}},t,e,[[0,11]])}))()},handleSelectionChange:function(e){this.multipleSelection=e.map(function(e){return e.id})},handlePageChange:function(e){this.current=e,this.getData()},handleSizeChange:function(e){this.pageSize=e,this.getData()},handleOpreate:function(){this.multipleSelection.length<1?this.$message.error("请选择退货原因"):this.handleDel(this.multipleSelection)},handleDel:function(e){var t=this,a=void 0;a=d.e.isArray(e)?e.join(","):e,this.$confirm("确认删除选中退货原因？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.order.reasonDel({ids:a});case 2:case"end":return e.stop()}},e,t)})))}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Search",{attrs:{searchOPtions:e.searchOPtions},on:{searchCallback:e.handelSearch}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.order.reason.edit],expression:"[$api.order.reason.edit]"}],attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){e.dialogVisible=!0,e.form={status:0}}}},[e._v("添 加")])],1),e._v(" "),[a("div",{staticClass:"common-table-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","highlight-current-row":!0,border:"",data:e.tableData,"tooltip-effect":"dark","header-cell-style":{background:"#fafafa",border:"none",borderBottom:"1px solid #e8e8e8"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"content",label:"原因"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v("取消订单")]):2==t.row.type?a("span",[e._v("申请售后")]):a("span",[e._v("--")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"排序",prop:"sort"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"usernum",label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:!e.button_permissions.includes(e.$api.order.reason.edit),"active-value":10,"inactive-value":0},on:{change:function(a){return e.switchChange(a,t.row.id)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"添加时间","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("validDateTime")(t.row.created_at)))]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"180px",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.order.reason.edit],expression:"[$api.order.reason.edit]"}],staticClass:"look-word",attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return e.handelEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.order.reason.del],expression:"[$api.order.reason.del]"}],staticClass:"look-word",attrs:{size:"mini",type:"danger",plain:""},on:{click:function(a){return e.handleDel(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("Pagination",{attrs:{current:e.current,pageSize:e.pageSize,count:e.count,options:e.paginationOptions},on:{opreateCBK:e.handleOpreate,pageChangeCBK:e.handlePageChange,sizeChangeCBK:e.handleSizeChange}})],e._v(" "),a("el-dialog",{attrs:{title:"添加退货原因",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"原因：",prop:"content"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{autocomplete:"off"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型：",prop:"type"}},[a("el-select",{staticStyle:{width:"70%"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{autocomplete:"off"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否启用："}},[a("el-switch",{attrs:{"active-value":10,"inactive-value":0},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1,e.isEdit=!1,e.resetForm()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.AddReason(e.isEdit)}}},[e._v("\n                    确定\n                ")])],1)],1)],2)},staticRenderFns:[]};var h=a("C7Lr")(f,m,!1,function(e){a("g7CU")},"data-v-379cb718",null);t.default=h.exports},g7CU:function(e,t){}});