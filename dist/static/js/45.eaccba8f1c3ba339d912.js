webpackJsonp([45],{QQcQ:function(e,t){},"ll/g":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("4YfN"),i=a.n(n),l=a("lC5x"),r=a.n(l),o=a("J0Oq"),s=a.n(o),c={0:"拼团"},u={0:"取消",1:"待支付",2:"待发货",3:"待收货",4:"待反馈",5:"已完成",6:"售后",7:"已关闭"},p={name:"assembleList",data:function(){return{loading:!1,current:1,pageSize:10,count:0,query:{},searchOPtions:[{type:"input",key:"good_name",placeholder:"商品名称"},{type:"dateRangePicker",key:"start_time-end_time",placeholder:"拼团时间"}],options:[{label:"选中用户",value:1},{label:"所有用户",value:2}],tableData:[],columnSelect:[],joinUserDialogVisible:!1,joinLoading:!1,joinUserList:[]}},created:function(){this.getData()},filters:{groupType:function(e){return c[e]},getStatus:function(e){return u[e]}},methods:{openJoinUser:function(e){var t=this;this.joinLoading=!0,this.joinUserDialogVisible=!0,this.$api.activity.getJoinPeople({id:e.id,is_enable:e.is_enable}).then(function(e){t.joinUserList=e.data}).finally(function(e){t.joinLoading=!1})},changeStatus:function(e){var t=this;return s()(r.a.mark(function a(){var n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n={id:e.id,is_enable:e.is_enable},a.prev=1,a.next=4,t.$api.activity.changeAssembleStatus(n);case 4:t.getData(),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),t.tableData.map(function(a){a.id===e.id&&t.$set(a,"is_enable","0"===e.is_enable?1:0)});case 10:case"end":return a.stop()}},a,t,[[1,7]])}))()},filterTag:function(e,t){return t.tag===e},handelSearch:function(e,t){var a=this;({search:function(){a.query=i()({},t),a.current=1,a.getData()},reset:function(){a.query={},a.pageSize=10,a.current=1,a.getData()}})[e]()},getData:function(){var e=this;return s()(r.a.mark(function t(){var a,n,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$api.activity.getAssembleList(i()({},e.query,{pagesize:e.pageSize,page:e.current}));case 4:for(a=t.sent,n=a.data,l=0;l<n.data.length;l++);e.tableData=n.data,e.count=n.total,e.loading=!1,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.loading=!1;case 15:case"end":return t.stop()}},t,e,[[0,12]])}))()},handleSelectionChange:function(e){var t=[];e.length<1?this.columnSelect=[]:(e.map(function(e){t.push(e.id)}),this.columnSelect=t)},handlePageChange:function(e){this.current=e,this.getData()},handleSizeChange:function(e){this.pageSize=e,this.getData()},jumpTo:function(e,t,a){this.$router.push({name:e,params:{type:t,id:a}})},handleDel:function(e){var t=this;this.$confirm("确认删除选中项？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.del(e)}).catch(function(){})},del:function(e){var t=this;if("many"==e){if(this.columnSelect.length<1)return void this.$message({message:"请至少选择一条申请",type:"error"});this.$api.activity.deleteAssemble({id:this.columnSelect.join(",")}).then(function(){t.getData()})}else this.$api.activity.deleteAssemble({id:e}).then(function(){t.getData()})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Search",{attrs:{searchOPtions:e.searchOPtions},on:{searchCallback:e.handelSearch}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.activity.assembleManager.add],expression:"[$api.activity.assembleManager.add]"}],attrs:{type:"primary",plain:""},on:{click:function(t){return e.jumpTo("addAssembleManager","add","_")}}},[e._v("添 加")])],1),e._v(" "),a("div",[[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{loading:e.loading,border:"",data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"group_type",label:"拼团类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("validVal")(e._f("groupType")(t.row.group_type)))+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"good_name",label:"拼团商品"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"success_num",label:"成团人数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"market_price",label:"市场价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("validVal")(t.row.market_price))+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"shop_price",label:"销售价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("validVal")(t.row.shop_price))+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"shop_price",label:"会员拼团价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("validVal")(t.row.member_group_price))+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"store_group_price",label:"店主拼团价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("validVal")(t.row.store_group_price))+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"partner_group_price",label:"合伙人拼团价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("validVal")(t.row.partner_group_price))+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"start_time",width:"140",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("validVal")(t.row.start_time))+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"140",prop:"end_time",label:"结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("validVal")(t.row.end_time))+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"valid_hours",width:"140",label:"拼团有效时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("validVal")(t.row.valid_hours))+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"is_enable",label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.activity.assembleManager.status],expression:"[$api.activity.assembleManager.status]"}],attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.is_enable,callback:function(a){e.$set(t.row,"is_enable",a)},expression:"scope.row.is_enable"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"goods_sale_num",label:"商品销量"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"270px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.activity.assembleManager.joinPeople],expression:"[$api.activity.assembleManager.joinPeople]"}],attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.openJoinUser(t.row)}}},[e._v("参与人员")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.activity.assembleManager.edit],expression:"[$api.activity.assembleManager.edit]"}],attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.jumpTo("editAssembleManager","edit",t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.activity.assembleManager.delete],expression:"[$api.activity.assembleManager.delete]"}],attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return e.handleDel(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{current:e.current,pageSize:e.pageSize,count:e.count},on:{opreateCBK:function(t){return e.handleDel("many")},pageChangeCBK:e.handlePageChange,sizeChangeCBK:e.handleSizeChange}})]],2),e._v(" "),a("el-dialog",{attrs:{title:"参与人员",visible:e.joinUserDialogVisible},on:{"update:visible":function(t){e.joinUserDialogVisible=t}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{loading:e.joinLoading,border:"",data:e.joinUserList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",prop:"order_sn",label:"订单号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"buyer_nickname",label:"昵称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"buyer_cellphone",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"logistics_sn",label:"快递编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"logistics_name",label:"快递名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e._f("getStatus")(t.row.status))+"\n                ")]}}])})],1),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-top":"20px"},on:{click:function(t){e.joinUserDialogVisible=!1}}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var _=a("C7Lr")(p,d,!1,function(e){a("QQcQ")},"data-v-790196c0",null);t.default=_.exports}});