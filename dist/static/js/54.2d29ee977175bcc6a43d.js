webpackJsonp([54],{ZDEw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("aA9S"),n=a.n(i),l=a("lC5x"),r=a.n(l),s=a("J0Oq"),o=a.n(s),u=a("4YfN"),c=a.n(u),d={name:"TypeValusList",props:{id1:{},id2:{}},data:function(){return{attr_name:"",pageOptions:[{value:"del",label:"批量删除"}],searchOPtions:[{type:"input",key:"value",placeholder:"属性值"}],show:!0,options:[{value:"del",label:"删除"}],query:{},current:1,pageSize:10,count:0,tableData:[],dialogVisible:!1,submit:{value:"",sort:"10",id:"",color:"",is_color:0},rules:{value:[{required:!0,message:"请输入",trigger:"change"}],sort:[{required:!0,message:"请输入",trigger:"change"}]},columnSelect:[],addType:""}},watch:{id2:function(){this.reset()}},methods:{reset:function(){this.query={},this.pageSize=10,this.current=1,this.getData()},handelSearch:function(t,e){var a=this;({search:function(){a.query=c()({},e),a.current=1,a.getData()},reset:function(){a.query={},a.pageSize=10,a.current=1,a.getData()}})[t]()},getData:function(){var t=this;return o()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.product.attrValueList(c()({},t.query,{pageSize:t.pageSize,page:t.current,attr_id:t.id2,type_id:t.id1}));case 3:a=e.sent,i=a.data,t.tableData=i.items,t.attr_name=i.items[0].attr_name,t.count=i.count,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}},e,t,[[0,10]])}))()},handlePageChange:function(t){this.current=t,this.getData()},handleSizeChange:function(t){this.pageSize=t,this.getData()},handleSelectionChange:function(t){var e=[];t.length<1?this.columnSelect=[]:(t.map(function(t){e.push(t.id)}),this.columnSelect=e)},jumpTo:function(t,e){this.$router.push({name:t,query:{type:e}})},open:function(t,e){if(this.dialogVisible=!0,this.addType=t,"edit"===t)this.submit.id=e.id,this.submit.value=e.value,this.submit.sort=e.sort;else for(var a in this.submit)this.submit[a]="",this.submit.is_color=0},add:function(){var t=this,e=this,a=n()({},this.submit);a.type_id=this.id1,a.attr_id=this.id2,this.$refs.submit.validate(function(i){i&&("add"==t.addType?t.$api.product.attrValueAdd(a).then(function(){for(var t in e.submit)e.submit[t]="",e.submit.is_color=0;e.dialogVisible=!1,e.getData()}):t.$api.product.attrValueEdit(a).then(function(){for(var t in e.submit)e.submit[t]="",e.submit.is_color=0;e.dialogVisible=!1,e.submit.id="",e.getData()}))})},handleDel:function(t){var e=this;this.$confirm("确认删除选中商品属性值？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.del(t)}).catch(function(){})},del:function(t){var e=this;if("many"==t){if(this.columnSelect.length<1)return void this.$message({message:"请至少选择一条商品属性值",type:"error"});this.$api.product.attrValueDelall({ids:this.columnSelect.join(",")}).then(function(){e.getData()})}else this.$api.product.attrValueDel({id:t}).then(function(){e.getData()})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"types-value-list-container"},[a("Search",{attrs:{searchOPtions:t.searchOPtions},on:{searchCallback:t.handelSearch}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.open("add")}}},[t._v("添 加")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{width:"55",type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{width:"60",align:"center",prop:"id",label:"编号"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"attr_name",label:"属性名"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"value",label:"属性值"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"color",label:"色值"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("validVal")(e.row.color))+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"sort",label:"排序"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return t.open("edit",e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return t.handleDel(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("Pagination",{attrs:{options:t.pageOptions,current:t.current,pageSize:t.pageSize,count:t.count},on:{opreateCBK:function(e){return t.handleDel("many")},pageChangeCBK:t.handlePageChange,sizeChangeCBK:t.handleSizeChange}}),t._v(" "),a("el-dialog",{attrs:{title:"添加商品属性值",visible:t.dialogVisible,modal:!1,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"submit",attrs:{model:t.submit,rules:t.rules,"label-width":"150px","label-position":"right"}},[a("el-form-item",{attrs:{label:"属性名："}},[a("span",[t._v(t._s(t.attr_name))])]),t._v(" "),a("el-form-item",{attrs:{label:"属性值：",prop:"value"}},[a("el-input",{model:{value:t.submit.value,callback:function(e){t.$set(t.submit,"value",e)},expression:"submit.value"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[a("el-input",{model:{value:t.submit.sort,callback:function(e){t.$set(t.submit,"sort",e)},expression:"submit.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否设置单独sku图：",prop:"is_color"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.submit.is_color,callback:function(e){t.$set(t.submit,"is_color",e)},expression:"submit.is_color"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"色值："}},[a("el-input",{model:{value:t.submit.color,callback:function(e){t.$set(t.submit,"color",e)},expression:"submit.color"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("\n                确定\n            ")])],1)],1)],1)},staticRenderFns:[]};var h=a("C7Lr")(d,p,!1,function(t){a("sSzL")},null,null);e.default=h.exports},sSzL:function(t,e){}});