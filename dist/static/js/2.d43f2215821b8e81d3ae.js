webpackJsonp([2],{"4A4y":function(t,e,r){(function(e){
/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(e){"use strict";"function"==typeof bootstrap?bootstrap("promise",e):t.exports=e()}(function(){"use strict";var t=!1;try{throw new Error}catch(e){t=!!e.stack}var r,o=w(),i=function(){},a=function(){var t={task:void 0,next:null},r=t,o=!1,i=void 0,n=!1,s=[];function l(){for(var e,r;t.next;)e=(t=t.next).task,t.task=void 0,(r=t.domain)&&(t.domain=void 0,r.enter()),c(e,r);for(;s.length;)c(e=s.pop());o=!1}function c(t,e){try{t()}catch(t){if(n)throw e&&e.exit(),setTimeout(l,0),e&&e.enter(),t;setTimeout(function(){throw t},0)}e&&e.exit()}if(a=function(t){r=r.next={task:t,domain:n&&e.domain,next:null},o||(o=!0,i())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)n=!0,i=function(){e.nextTick(l)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,l):function(){setImmediate(l)};else if("undefined"!=typeof MessageChannel){var u=new MessageChannel;u.port1.onmessage=function(){i=d,u.port1.onmessage=l,l()};var d=function(){u.port2.postMessage(0)};i=function(){setTimeout(l,0),d()}}else i=function(){setTimeout(l,0)};return a.runAfter=function(t){s.push(t),o||(o=!0,i())},a}(),n=Function.call;function s(t){return function(){return n.apply(t,arguments)}}var l,c=s(Array.prototype.slice),u=s(Array.prototype.reduce||function(t,e){var r=0,o=this.length;if(1===arguments.length)for(;;){if(r in this){e=this[r++];break}if(++r>=o)throw new TypeError}for(;r<o;r++)r in this&&(e=t(e,this[r],r));return e}),d=s(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),p=s(Array.prototype.map||function(t,e){var r=this,o=[];return u(r,function(i,a,n){o.push(t.call(e,a,n,r))},void 0),o}),f=Object.create||function(t){function e(){}return e.prototype=t,new e},m=Object.defineProperty||function(t,e,r){return t[e]=r.value,t},v=s(Object.prototype.hasOwnProperty),h=Object.keys||function(t){var e=[];for(var r in t)v(t,r)&&e.push(r);return e},_=s(Object.prototype.toString);l="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var b="From previous event:";function g(e,r){if(t&&r.stack&&"object"==typeof e&&null!==e&&e.stack){for(var o=[],i=r;i;i=i.source)i.stack&&(!e.__minimumStackCounter__||e.__minimumStackCounter__>i.stackCounter)&&(m(e,"__minimumStackCounter__",{value:i.stackCounter,configurable:!0}),o.unshift(i.stack));o.unshift(e.stack);var a=function(t){for(var e=t.split("\n"),r=[],o=0;o<e.length;++o){var i=e[o];!k(i)&&(-1===(a=i).indexOf("(module.js:")&&-1===a.indexOf("(node.js:"))&&i&&r.push(i)}var a;return r.join("\n")}(o.join("\n"+b+"\n"));m(e,"stack",{value:a,configurable:!0})}}function y(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(r)return[r[1],Number(r[2])];var o=/.*@(.+):(\d+)$/.exec(t);return o?[o[1],Number(o[2])]:void 0}function k(t){var e=y(t);if(!e)return!1;var i=e[0],a=e[1];return i===r&&a>=o&&a<=Y}function w(){if(t)try{throw new Error}catch(t){var e=t.stack.split("\n"),o=y(e[0].indexOf("@")>0?e[1]:e[2]);if(!o)return;return r=o[0],o[1]}}function x(t){return t instanceof $?t:E(t)?(e=t,r=C(),x.nextTick(function(){try{e.then(r.resolve,r.reject,r.notify)}catch(t){r.reject(t)}}),r.promise):L(t);var e,r}x.resolve=x,x.nextTick=a,x.longStackSupport=!1;var F=1;function C(){var e,r=[],o=[],i=f(C.prototype),a=f($.prototype);if(a.promiseDispatch=function(t,i,a){var n=c(arguments);r?(r.push(n),"when"===i&&a[1]&&o.push(a[1])):x.nextTick(function(){e.promiseDispatch.apply(e,n)})},a.valueOf=function(){if(r)return a;var t=A(e);return j(t)&&(e=t),t},a.inspect=function(){return e?e.inspect():{state:"pending"}},x.longStackSupport&&t)try{throw new Error}catch(t){a.stack=t.stack.substring(t.stack.indexOf("\n")+1),a.stackCounter=F++}function n(i){e=i,x.longStackSupport&&t&&(a.source=i),u(r,function(t,e){x.nextTick(function(){i.promiseDispatch.apply(i,e)})},void 0),r=void 0,o=void 0}return i.promise=a,i.resolve=function(t){e||n(x(t))},i.fulfill=function(t){e||n(L(t))},i.reject=function(t){e||n(V(t))},i.notify=function(t){e||u(o,function(e,r){x.nextTick(function(){r(t)})},void 0)},i}function S(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=C();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function G(t){return S(function(e,r){for(var o=0,i=t.length;o<i;o++)x(t[o]).then(e,r)})}function $(t,e,r){void 0===e&&(e=function(t){return V(new Error("Promise does not support operation: "+t))}),void 0===r&&(r=function(){return{state:"unknown"}});var o=f($.prototype);if(o.promiseDispatch=function(r,i,a){var n;try{n=t[i]?t[i].apply(o,a):e.call(o,i,a)}catch(t){n=V(t)}r&&r(n)},o.inspect=r,r){var i=r();"rejected"===i.state&&(o.exception=i.reason),o.valueOf=function(){var t=r();return"pending"===t.state||"rejected"===t.state?o:t.value}}return o}function D(t,e,r,o){return x(t).then(e,r,o)}function A(t){if(j(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function j(t){return t instanceof $}function E(t){return(e=t)===Object(e)&&"function"==typeof t.then;var e}"object"==typeof e&&e&&Object({NODE_ENV:"production",ENV_CONFIG:"prod"})&&Object({NODE_ENV:"production",ENV_CONFIG:"prod"}).Q_DEBUG&&(x.longStackSupport=!0),x.defer=C,C.prototype.makeNodeResolver=function(){var t=this;return function(e,r){e?t.reject(e):arguments.length>2?t.resolve(c(arguments,1)):t.resolve(r)}},x.Promise=S,x.promise=S,S.race=G,S.all=q,S.reject=V,S.resolve=x,x.passByCopy=function(t){return t},$.prototype.passByCopy=function(){return this},x.join=function(t,e){return x(t).join(e)},$.prototype.join=function(t){return x([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},x.race=G,$.prototype.race=function(){return this.then(x.race)},x.makePromise=$,$.prototype.toString=function(){return"[object Promise]"},$.prototype.then=function(t,e,r){var o=this,i=C(),a=!1;return x.nextTick(function(){o.promiseDispatch(function(e){a||(a=!0,i.resolve(function(e){try{return"function"==typeof t?t(e):e}catch(t){return V(t)}}(e)))},"when",[function(t){a||(a=!0,i.resolve(function(t){if("function"==typeof e){g(t,o);try{return e(t)}catch(t){return V(t)}}return V(t)}(t)))}])}),o.promiseDispatch(void 0,"when",[void 0,function(t){var e,o=!1;try{e=function(t){return"function"==typeof r?r(t):t}(t)}catch(t){if(o=!0,!x.onerror)throw t;x.onerror(t)}o||i.notify(e)}]),i.promise},x.tap=function(t,e){return x(t).tap(e)},$.prototype.tap=function(t){return t=x(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},x.when=D,$.prototype.thenResolve=function(t){return this.then(function(){return t})},x.thenResolve=function(t,e){return x(t).thenResolve(e)},$.prototype.thenReject=function(t){return this.then(function(){throw t})},x.thenReject=function(t,e){return x(t).thenReject(e)},x.nearer=A,x.isPromise=j,x.isPromiseAlike=E,x.isPending=function(t){return j(t)&&"pending"===t.inspect().state},$.prototype.isPending=function(){return"pending"===this.inspect().state},x.isFulfilled=function(t){return!j(t)||"fulfilled"===t.inspect().state},$.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},x.isRejected=function(t){return j(t)&&"rejected"===t.inspect().state},$.prototype.isRejected=function(){return"rejected"===this.inspect().state};var N,T,M,R=[],I=[],O=[],P=!0;function U(){R.length=0,I.length=0,P||(P=!0)}function V(t){var r=$({when:function(r){return r&&function(t){if(P){var r=d(I,t);-1!==r&&("object"==typeof e&&"function"==typeof e.emit&&x.nextTick.runAfter(function(){var o=d(O,t);-1!==o&&(e.emit("rejectionHandled",R[r],t),O.splice(o,1))}),I.splice(r,1),R.splice(r,1))}}(this),r?r(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return function(t,r){P&&("object"==typeof e&&"function"==typeof e.emit&&x.nextTick.runAfter(function(){-1!==d(I,t)&&(e.emit("unhandledRejection",r,t),O.push(t))}),I.push(t),r&&void 0!==r.stack?R.push(r.stack):R.push("(no stack) "+r))}(r,t),r}function L(t){return $({when:function(){return t},get:function(e){return t[e]},set:function(e,r){t[e]=r},delete:function(e){delete t[e]},post:function(e,r){return null===e||void 0===e?t.apply(void 0,r):t[e].apply(t,r)},apply:function(e,r){return t.apply(e,r)},keys:function(){return h(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function z(t,e,r){return x(t).spread(e,r)}function B(t,e,r){return x(t).dispatch(e,r)}function q(t){return D(t,function(t){var e=0,r=C();return u(t,function(o,i,a){var n;j(i)&&"fulfilled"===(n=i.inspect()).state?t[a]=n.value:(++e,D(i,function(o){t[a]=o,0==--e&&r.resolve(t)},r.reject,function(t){r.notify({index:a,value:t})}))},void 0),0===e&&r.resolve(t),r.promise})}function K(t){if(0===t.length)return x.resolve();var e=x.defer(),r=0;return u(t,function(o,i,a){var n=t[a];r++,D(n,function(t){e.resolve(t)},function(t){if(0==--r){var o=t||new Error(""+t);o.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+o.message,e.reject(o)}},function(t){e.notify({index:a,value:t})})},void 0),e.promise}function Q(t){return D(t,function(t){return t=p(t,x),D(q(p(t,function(t){return D(t,i,i)})),function(){return t})})}x.resetUnhandledRejections=U,x.getUnhandledReasons=function(){return R.slice()},x.stopUnhandledRejectionTracking=function(){U(),P=!1},U(),x.reject=V,x.fulfill=L,x.master=function(t){return $({isDef:function(){}},function(e,r){return B(t,e,r)},function(){return x(t).inspect()})},x.spread=z,$.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},x.async=function(t){return function(){function e(t,e){var a;if("undefined"==typeof StopIteration){try{a=r[t](e)}catch(t){return V(t)}return a.done?x(a.value):D(a.value,o,i)}try{a=r[t](e)}catch(t){return function(t){return"[object StopIteration]"===_(t)||t instanceof l}(t)?x(t.value):V(t)}return D(a,o,i)}var r=t.apply(this,arguments),o=e.bind(e,"next"),i=e.bind(e,"throw");return o()}},x.spawn=function(t){x.done(x.async(t)())},x.return=function(t){throw new l(t)},x.promised=function(t){return function(){return z([this,q(arguments)],function(e,r){return t.apply(e,r)})}},x.dispatch=B,$.prototype.dispatch=function(t,e){var r=this,o=C();return x.nextTick(function(){r.promiseDispatch(o.resolve,t,e)}),o.promise},x.get=function(t,e){return x(t).dispatch("get",[e])},$.prototype.get=function(t){return this.dispatch("get",[t])},x.set=function(t,e,r){return x(t).dispatch("set",[e,r])},$.prototype.set=function(t,e){return this.dispatch("set",[t,e])},x.del=x.delete=function(t,e){return x(t).dispatch("delete",[e])},$.prototype.del=$.prototype.delete=function(t){return this.dispatch("delete",[t])},x.mapply=x.post=function(t,e,r){return x(t).dispatch("post",[e,r])},$.prototype.mapply=$.prototype.post=function(t,e){return this.dispatch("post",[t,e])},x.send=x.mcall=x.invoke=function(t,e){return x(t).dispatch("post",[e,c(arguments,2)])},$.prototype.send=$.prototype.mcall=$.prototype.invoke=function(t){return this.dispatch("post",[t,c(arguments,1)])},x.fapply=function(t,e){return x(t).dispatch("apply",[void 0,e])},$.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},x.try=x.fcall=function(t){return x(t).dispatch("apply",[void 0,c(arguments,1)])},$.prototype.fcall=function(){return this.dispatch("apply",[void 0,c(arguments)])},x.fbind=function(t){var e=x(t),r=c(arguments,1);return function(){return e.dispatch("apply",[this,r.concat(c(arguments))])}},$.prototype.fbind=function(){var t=this,e=c(arguments);return function(){return t.dispatch("apply",[this,e.concat(c(arguments))])}},x.keys=function(t){return x(t).dispatch("keys",[])},$.prototype.keys=function(){return this.dispatch("keys",[])},x.all=q,$.prototype.all=function(){return q(this)},x.any=K,$.prototype.any=function(){return K(this)},x.allResolved=(N=Q,T="allResolved",M="allSettled",function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(T+" is deprecated, use "+M+" instead.",new Error("").stack),N.apply(N,arguments)}),$.prototype.allResolved=function(){return Q(this)},x.allSettled=function(t){return x(t).allSettled()},$.prototype.allSettled=function(){return this.then(function(t){return q(p(t,function(t){function e(){return t.inspect()}return(t=x(t)).then(e,e)}))})},x.fail=x.catch=function(t,e){return x(t).then(void 0,e)},$.prototype.fail=$.prototype.catch=function(t){return this.then(void 0,t)},x.progress=function(t,e){return x(t).then(void 0,void 0,e)},$.prototype.progress=function(t){return this.then(void 0,void 0,t)},x.fin=x.finally=function(t,e){return x(t).finally(e)},$.prototype.fin=$.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=x(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},x.done=function(t,e,r,o){return x(t).done(e,r,o)},$.prototype.done=function(t,r,o){var i=function(t){x.nextTick(function(){if(g(t,a),!x.onerror)throw t;x.onerror(t)})},a=t||r||o?this.then(t,r,o):this;"object"==typeof e&&e&&e.domain&&(i=e.domain.bind(i)),a.then(void 0,i)},x.timeout=function(t,e,r){return x(t).timeout(e,r)},$.prototype.timeout=function(t,e){var r=C(),o=setTimeout(function(){e&&"string"!=typeof e||((e=new Error(e||"Timed out after "+t+" ms")).code="ETIMEDOUT"),r.reject(e)},t);return this.then(function(t){clearTimeout(o),r.resolve(t)},function(t){clearTimeout(o),r.reject(t)},r.notify),r.promise},x.delay=function(t,e){return void 0===e&&(e=t,t=void 0),x(t).delay(e)},$.prototype.delay=function(t){return this.then(function(e){var r=C();return setTimeout(function(){r.resolve(e)},t),r.promise})},x.nfapply=function(t,e){return x(t).nfapply(e)},$.prototype.nfapply=function(t){var e=C(),r=c(t);return r.push(e.makeNodeResolver()),this.fapply(r).fail(e.reject),e.promise},x.nfcall=function(t){var e=c(arguments,1);return x(t).nfapply(e)},$.prototype.nfcall=function(){var t=c(arguments),e=C();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},x.nfbind=x.denodeify=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=c(arguments,1);return function(){var r=e.concat(c(arguments)),o=C();return r.push(o.makeNodeResolver()),x(t).fapply(r).fail(o.reject),o.promise}},$.prototype.nfbind=$.prototype.denodeify=function(){var t=c(arguments);return t.unshift(this),x.denodeify.apply(void 0,t)},x.nbind=function(t,e){var r=c(arguments,2);return function(){var o=r.concat(c(arguments)),i=C();return o.push(i.makeNodeResolver()),x(function(){return t.apply(e,arguments)}).fapply(o).fail(i.reject),i.promise}},$.prototype.nbind=function(){var t=c(arguments,0);return t.unshift(this),x.nbind.apply(void 0,t)},x.nmapply=x.npost=function(t,e,r){return x(t).npost(e,r)},$.prototype.nmapply=$.prototype.npost=function(t,e){var r=c(e||[]),o=C();return r.push(o.makeNodeResolver()),this.dispatch("post",[t,r]).fail(o.reject),o.promise},x.nsend=x.nmcall=x.ninvoke=function(t,e){var r=c(arguments,2),o=C();return r.push(o.makeNodeResolver()),x(t).dispatch("post",[e,r]).fail(o.reject),o.promise},$.prototype.nsend=$.prototype.nmcall=$.prototype.ninvoke=function(t){var e=c(arguments,1),r=C();return e.push(r.makeNodeResolver()),this.dispatch("post",[t,e]).fail(r.reject),r.promise},x.nodeify=function(t,e){return x(t).nodeify(e)},$.prototype.nodeify=function(t){if(!t)return this;this.then(function(e){x.nextTick(function(){t(null,e)})},function(e){x.nextTick(function(){t(e)})})},x.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var Y=w();return x})}).call(e,r("V0EG"))},"5Ccn":function(t,e){},"5QbT":function(t,e){},"5aQG":function(t,e){},"69t0":function(t,e){},Gv5q:function(t,e,r){r("VZ9x"),t.exports=r("ZuHZ").Object.values},KkUl:function(t,e,r){var o=r("uoC7"),i=r("RY2v"),a=r("KKnT"),n=r("2raJ").f;t.exports=function(t){return function(e){for(var r,s=a(e),l=i(s),c=l.length,u=0,d=[];c>u;)r=l[u++],o&&!n.call(s,r)||d.push(t?[r,s[r]]:s[r]);return d}}},MgeX:function(t,e,r){t.exports={default:r("Gv5q"),__esModule:!0}},Ob5N:function(t,e){},VZ9x:function(t,e,r){var o=r("Wtcz"),i=r("KkUl")(!1);o(o.S,"Object",{values:function(t){return i(t)}})},aLiO:function(t,e){},v1P0:function(t,e){},xU0l:function(t,e){},z2PF:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("lC5x"),i=r.n(o),a=r("rVsN"),n=r.n(a),s=r("J0Oq"),l=r.n(s),c=r("4YfN"),u=r.n(c),d=r("48sp"),p={name:"AddProductStep1",props:{editData:{type:Object},id:{type:[String,Number]}},data:function(){return{firstActive:{value:""},secondActive:{value:""},thirdActive:{},categories:[],type:"",goods_id:null}},created:function(){this.getCategory()},methods:u()({},Object(d.d)("product",["SET_STATE"]),{firstClick:function(t){this.firstActive=t,this.secondActive={}},secondClick:function(t){this.secondActive=t,this.thirdActive={}},thirdClick:function(t){this.thirdActive=t},getCategory:function(){var t=this;return l()(i.a.mark(function e(){var r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.product.getCategory();case 3:return r=e.sent,o=r.data,t.SET_STATE({goods_id:o.goods_id}),t.goods_id=o.goods_id,t.categories=o.category,e.abrupt("return",n.a.resolve(!0));case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",n.a.reject(!1));case 15:case"end":return e.stop()}},e,t,[[0,11]])}))()},goNext:function(){if(this.firstActive.value){var t={goods_id:this.goods_id};t.cat1={id:this.firstActive.value,label:this.firstActive.label},t.cat2={id:this.secondActive.value,label:this.secondActive.label},t.cat3={id:this.thirdActive.value,label:this.thirdActive.label},this.$emit("step1CBK",t),this.$emit("update:active",1)}else this.$message({message:"请选择商品分类",type:"error"})}})},f={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"moreRules-content"},[r("el-form",{ref:"form"},[r("div",{staticClass:"card"},[r("div",{staticClass:"left"},[r("div",{staticClass:"left-gary"},[r("svg-icon",{attrs:{"icon-name":"icon_favorite"}}),t._v(" "),r("p",[t._v("选择分类")])],1)]),t._v(" "),r("div",{staticClass:"right"},[r("div",{staticClass:"classify-wrap"},[r("ul",{staticClass:"classify"},[r("li",[t._v("选择一级分类")]),t._v(" "),t._l(t.categories,function(e,o){return r("li",{key:o,class:t.firstActive.value==e.value?"active":"",on:{click:function(r){return t.firstClick(e)}}},[r("span",[t._v(t._s(e.label))]),t._v(" "),r("svg-icon",{style:{color:t.firstActive.value===e.value?"#fff":"#333"},attrs:{"icon-name":"previewright"}})],1)})],2),t._v(" "),r("svg-icon",{staticClass:"arrowright",attrs:{"icon-name":"arrowright"}}),t._v(" "),r("ul",{staticClass:"classify"},[r("li",[t._v("选择二级分类")]),t._v(" "),t._l(t.firstActive.children,function(e,o){return r("li",{key:o,class:t.secondActive.value==e.value?"active":"",on:{click:function(r){return t.secondClick(e)}}},[r("span",[t._v(t._s(e.label))]),t._v(" "),r("svg-icon",{style:{color:t.secondActive.value===e.value?"#fff":"#333"},attrs:{"icon-name":"previewright"}})],1)})],2),t._v(" "),r("svg-icon",{staticClass:"arrowright",attrs:{"icon-name":"arrowright"}}),t._v(" "),r("ul",{staticClass:"classify"},[r("li",[t._v("选择三级分类")]),t._v(" "),t._l(t.secondActive.children,function(e,o){return r("li",{key:o,class:t.thirdActive.value==e.value?"active":"",on:{click:function(r){return t.thirdClick(e)}}},[r("span",[t._v(t._s(e.label))]),t._v(" "),r("svg-icon",{style:{color:t.thirdActive.value===e.value?"#fff":"#333"},attrs:{"icon-name":"previewright"}})],1)})],2)],1),t._v(" "),r("p",{staticClass:"nav"},[t._v("\n                    您当前选择的商品分类是："),r("b",[t._v(t._s(t.firstActive.label))]),t._v(" > "),r("b",[t._v(t._s(t._f("validVal")(t.secondActive.label)))]),t._v(" > "),r("b",[t._v(t._s(t._f("validVal")(t.thirdActive.label)))])]),t._v(" "),r("el-button",{attrs:{type:"success"},on:{click:t.goNext}},[t._v("下一步，填写商品信息")])],1)])])],1)},staticRenderFns:[]};var m=r("C7Lr")(p,f,!1,function(t){r("v1P0")},"data-v-4ed492f0",null).exports,v=r("MgeX"),h=r.n(v),_=r("aA9S"),b=r.n(_),g=r("IHPB"),y=r.n(g),k=r("FFUX"),w=r("czH5"),x=r("3cXf"),F=r.n(x),C={props:{isNew:{type:Boolean,default:!1},hasMove:{type:Boolean,default:!1},imgs:{type:Array,required:!0},limit:{type:Number,default:20},hasLook:{type:Boolean,default:!1}},watch:{imgs:{handler:function(t,e){this.allImags=t.concat([{url:""}])},immediate:!0}},data:function(){return{allImags:[],imgSrc:"",previewImgVisible:!1}},created:function(){},methods:{leftMove:function(t){var e=[].concat(y()(this.imgs));e[t-1]=e.splice(t,1,e[t-1])[0],this.$emit("update:imgs",e)},rightMove:function(t){var e=[].concat(y()(this.imgs));e[t+1]=e.splice(t,1,e[t+1])[0],this.$emit("update:imgs",e)},successUpload:function(t,e,r){var o=void 0;e.url?(o=JSON.parse(F()(this.imgs)))[r]={url:t[0]}:o=this.imgs.concat([{url:t[0]}]),this.$emit("update:imgs",o)},remove:function(t){var e=JSON.parse(F()(this.imgs));e.splice(t,1),this.$emit("update:imgs",e)},showDialog:function(t){this.previewImgVisible=!0,this.imgSrc=t}}},S={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"multiImgUpload-container"},[t._l(t.allImags,function(e,o){return o<=t.limit-1?r("div",{key:e.url,staticClass:"img-item"},[r("FileUpload",{attrs:{isOnly:!0,fileList:[e],width:"107px",height:"107px"},on:{successUploadCBK:function(r){return t.successUpload(r,e,o)}}}),t._v(" "),e.url&&t.hasLook?r("el-button",{staticClass:"look-btn",attrs:{size:"mini"},on:{click:function(r){return t.showDialog(e.url)}}},[t._v("查看")]):t._e(),t._v(" "),e.url&&!t.isNew?r("i",{staticClass:"el-icon-circle-close-outline",on:{click:function(e){return e.stopPropagation(),t.remove(o)}}}):t._e(),t._v(" "),t.isNew&&e.url&&t.hasMove?r("div",{staticClass:"product-bottom"},[t.hasMove&&0!==o?r("div",{staticClass:"left-move",on:{click:function(e){return t.leftMove(o)}}},[r("i",{staticClass:"el-icon-arrow-left"})]):t._e(),t._v(" "),r("div",{staticClass:"remove-btn",on:{click:function(e){return t.remove(o)}}},[r("i",{staticClass:"el-icon-delete"})]),t._v(" "),t.hasMove&&o!==t.allImags.length-2?r("div",{staticClass:"right-move",on:{click:function(e){return t.rightMove(o)}}},[r("i",{staticClass:"el-icon-arrow-right"})]):t._e()]):t._e(),t._v(" "),0===o&&t.isNew&&e.url?r("div",{staticClass:"top-bottom"},[t._v("\n            商品主图\n        ")]):t._e()],1):t._e()}),t._v(" "),r("PreviewImg",{attrs:{visible:t.previewImgVisible,imgSrc:t.imgSrc},on:{"update:visible":function(e){t.previewImgVisible=e}}})],2)},staticRenderFns:[]};var G=r("C7Lr")(C,S,!1,function(t){r("69t0")},"data-v-44c97c54",null).exports,$=(r("4A4y"),["shop_price","cost_price","stock","store_price","partner_price","member_price","team_price"]),D=void 0,A={name:"AddProductStep2",components:{multiImgUpload:G},props:{editData:{type:Object},id:{type:[String,Number]}},data:function(){var t=this.$route.params.type;return{typeNames:$,activeName:"information",productImgs:[],provinceData:[],cityData:[],countyData:[],townData:[],status:"",seckill_flag:!1,is_coupon_convert:!1,showSteps:!0,currImgIndex:null,simpleRule:{required:!0,message:"必填项",trigger:"change"},addParams:[],attr_id:null,dialogVisible:!1,categories:[],type:t,rules:{},imgSrc:"",freights:[],brands:[],param:[],suppliers:[],stock:null,cost_price:null,shop_price:null,partner_price:null,activity_price:null,member_price:null,user_price:null,store_price:null,team_price:null,isScroll:!1,isActive:"information",goodsTypes:[].concat(y()(w.c.GOODS_TYPES)),steps:[].concat(y()(w.c.STEPS)),selectedOptions2:[],visible:!1,imgs:[],thumb:[],sku_imgs:{},videoUrl:"",tableData:[],editSkuData:[],options:[],address:[],addGoodsForm:{label_ids:[],list_label_ids:[],detail_label_ids:[],user_price:"10%",member_price:"",freight_id:"",store_price:"",team_fee:0,first_fee:"2",cross_border:2,second_fee:"0",combination:0,sale_num:0,zu_num:0,stock_double:1,is_quick:0,is_top:0,is_welfare:0,partner_price:"",is_gift:0,team_strategy1:0,team_senior1:0,team_angel1:"",brand_id:"",integral_customer_point:"",buyer_point:"",first_point:"",second_point:"",goods_specification:null,cat_id:null,return_address:""},long_thumb:[],tuan_gou_time:[],cross_border_options:[{value:1,label:"是"},{value:2,label:"否"}],addGoodsFormParam:{},goodsSpecifications:[],attr:[],labelData:[],insuranceData:[],checkbox:{},submit:{value:"",sort:"10",color:"",is_color:1},attr_name:"",submitRules:{value:[{required:!0,message:"请输入",trigger:"change"}],sort:[{required:!0,message:"请输入",trigger:"change"}]}}},computed:{getAttrValue:function(){var t=this;return function(e,r){if("number"==typeof e){var o="";return t.tableData[e].forEach(function(t){t.attr_id==r&&(o=t.value)}),o}}},reverseAttr:function(){return[].concat(y()(this.attr)).reverse()},limit:function(){return 4-this.imgs.length},colors:function(){var t=[],e=[];return this.tableData.map(function(r){k.e.isArray(r)&&r.map(function(r){1==r.is_color&&(e.includes(r.id)||(e.push(r.id),t.push(r)))})}),t},excludeColorAttrs:function(){var t=[],e=[];return this.tableData.map(function(r){k.e.isArray(r)&&r.map(function(r){1!=r.is_color&&(e.includes(r.id)||(e.push(r.id),t.push(r)))})}),t}},watch:{"addGoodsForm.supplier_id":function(t,e){this.freights=[],void 0!==e&&(this.addGoodsForm.freight_id=""),t?this.getFreights(t):this.getFreights(null)},checkbox:{handler:function(t,e){this.checkedColorsChange()},deep:!0},deep:!0},created:function(){var t,e=this;this.id||this.getFreights(null),this.getLabelData(),this.getInsuranceList(),this.getAttrs().then((t=l()(i.a.mark(function t(r){var o,a,n,s,l;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r&&e.id&&(o=e.editData,a=o.detail,n=o.skuData,s=o.attr,e.status=a.status,e.addGoodsForm=a,e.addGoodsForm.cat_id=[String(a.cat_id1),String(a.cat_id2),String(a.cat_id3)],0==e.addGoodsForm.brand_id&&(e.addGoodsForm.brand_id=""),e.addGoodsForm.goods_specification=String(a.type_id),e.addGoodsForm.label_ids=a.label_ids.length>0?a.label_ids.split(",").map(function(t){return Number(t)}):[],e.addGoodsForm.list_label_ids=a.list_label_ids&&a.list_label_ids.length>0?a.list_label_ids.split(",").map(function(t){return Number(t)}):[],e.addGoodsForm.detail_label_ids=a.detail_label_ids&&a.detail_label_ids.length>0?a.detail_label_ids.split(",").map(function(t){return Number(t)}):[],1==a.seckill_flag&&(e.seckill_flag=!0,e.tuan_gou_time=[e.$moment(1e3*+new Date(a.seckill_begin_time)).format("YYYY-MM-DD HH:mm:ss"),e.$moment(1e3*+new Date(a.seckill_end_time)).format("YYYY-MM-DD HH:mm:ss")]),1==a.is_coupon_convert&&(e.is_coupon_convert=!0),a.start_at&&(e.addGoodsForm.start_at=1e3*a.start_at),a.end_at&&(e.addGoodsForm.end_at=1e3*a.end_at),e.long_thumb=a.long_thumb?[{url:a.long_thumb}]:[],(l=[]).push({url:a.thumb}),(a.imgs||[]).forEach(function(t){l.push({url:t})}),e.productImgs=l,a.sku_imgs&&(e.sku_imgs=a.sku_imgs),a.video&&(e.videoUrl=a.video),a.param&&(e.addParams=a.param),s.forEach(function(t){t.showSpecList=!1,e.$set(e.checkbox,t.name,[])}),e.attr=s,a.properties&&a.properties.length>0&&(a.properties.map(function(t){var r=t.values.map(function(t){return t.attribute_id});s.map(function(o){o.id==t.attr_id&&o.values.map(function(o){r.includes(o.id)&&e.checkbox[t.attr_name].push(o)})})}),e.tableData=n,e.editSkuData=n));case 1:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))},mounted:function(){(D=document.querySelector(".app-main")).style.scrollBehavior="smooth",D.addEventListener("scroll",this.handleScroll)},destroyed:function(){D.removeEventListener("scroll",this.handleScroll),D.style.scrollBehavior="auto"},methods:u()({},Object(d.b)("tagsView",["delVisitedViews"]),{changeStoce:function(){var t=0;this.tableData.forEach(function(e){e.stock&&(t+=parseFloat(e.stock))}),this.addGoodsForm.stock=t},removeSkuImg:function(t){this.$set(this.sku_imgs,t,{thumb:""})},getRowspan:function(t){t.row,t.column;var e=t.rowIndex,r=t.columnIndex,o="",i=[];this.tableData.forEach(function(t,e){t[r]?o&&o===t[r].value?i[i.length-1]+=1:(o=t[r].value,i[i.length]=1):o?i[i.length-1]+=1:i[i.length]=1});for(var a=0,n=0,s=0;s<i.length;s++){if(e===a){n=i[s];break}a+=i[s]}return{rowspan:n,size:i.length}},objectSpanMethod:function(t){if(t.columnIndex<this.attr.length){var e=this.getRowspan(t),r=e.rowspan,o=e.size,i=this.getRowspan(u()({},t,{columnIndex:0===t.columnIndex?0:t.columnIndex-1})).size;return{rowspan:0===t.columnIndex?r:o<=i?1:r,colspan:1}}return{rowspan:1,colspan:1}},handleClose:function(t,e){var r=u()({},this.checkbox);r[t].splice(e,1),this.checkbox=r},getCityData:function(t,e){var r=this;return l()(i.a.mark(function o(){var a,n;return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r.$api.common.getAreaList({pid:t});case 3:return a=o.sent,n=a.data,r[e+"Data"]=n,n.forEach(function(t){t.children=[]}),o.abrupt("return",n);case 10:throw o.prev=10,o.t0=o.catch(0),new Error(o.t0);case 13:case"end":return o.stop()}},o,r,[[0,10]])}))()},goodsSpecificationChanged:function(t){var e=this;this.$api.product.getGoodsSpecificationDetail({type_id:t}).then(function(t){t.data.forEach(function(t){t.showSpecList=!1,e.$set(e.checkbox,t.name,[])}),e.attr=t.data,e.checkbox={},e.attr.forEach(function(t){t.showSpecList=!1,e.$set(e.checkbox,t.name,[])}),e.tableData=[]})},getInsuranceList:function(){var t=this;return l()(i.a.mark(function e(){var r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.setting.getInsuranceList();case 3:r=e.sent,o=r.data,t.insuranceData=o.items,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()},getLabelData:function(){var t=this;return l()(i.a.mark(function e(){var r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.product.getLabelList({status:10});case 3:r=e.sent,o=r.data,t.labelData=o.items,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()},getFreights:function(t){var e=this;return l()(i.a.mark(function r(){var o,a;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$api.product.getFreights({supplier_id:t});case 3:o=r.sent,a=o.data,e.freights=a,r.next=11;break;case 8:throw r.prev=8,r.t0=r.catch(0),new Error(r.t0);case 11:case"end":return r.stop()}},r,e,[[0,8]])}))()},handelEditStock:function(t){var e,r=this;this.$prompt("添加 / 减少库存（减库存请输入负值）","编辑库存",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((e=l()(i.a.mark(function e(o){var a,n,s=o.value;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,r.$api.product.goodsSetSkuStock({id:t,stock:s});case 5:a=e.sent,n=a.data,r.$message.success("新库存编辑成功"),r.tableData.forEach(function(e){e.id===t&&r.$set(e,"stock",n.sku_stock)}),r.changeStoce(),r.addGoodsForm.stock=n.total_stock,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(2),new Error(e.t0);case 16:case"end":return e.stop()}},e,r,[[2,13]])})),function(t){return e.apply(this,arguments)}))},shiftMinorImg:function(t,e,r){var o=[].concat(y()(this.imgs)),i="left"===r?t-1:t+1;o.splice(i,1,e),o.splice(t,1,this.imgs[i]),this.imgs=o},removeMinorImgs:function(t){this.imgs.splice(t,1)},removeVideo:function(){this.videoUrl=""},moveMainImg:function(){var t=this.thumb[0];this.thumb=[this.imgs[0]],this.imgs.splice(0,1,t)},removeCurrentColumn:function(t){t.id?this.tableData=this.tableData.filter(function(e){return e.id!==t.id}):this.tableData=this.tableData.filter(function(e){return!k.e.isEqual(e,t)})},clearCurrentColumn:function(t){var e=this;this.typeNames.forEach(function(r){e.tableData[t][r]=null})},handleAddParams:function(){this.addParams.push({key:"",value:""})},removeParam:function(t){var e=this.addParams.indexOf(t);-1!==e&&this.addParams.splice(e,1)},addCurrentAttr:function(t){var e=t.name,r=t.id;0===this.addGoodsForm.goods_specification||this.addGoodsForm.goods_specification?(this.attr_id=r,this.attr_name=e,this.dialogVisible=!0):this.$message.error("请先选择商品类目规格")},handleAddAttr:function(){var t,e=this;this.$refs.submit.validate((t=l()(i.a.mark(function t(r){var o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((o=b()({},e.submit)).attr_id=e.attr_id,o.type_id=e.addGoodsForm.goods_specification,o.goods_id=e.id||e.goods_id,!r){t.next=10;break}return t.next=7,e.$api.product.attrValueAdd(o);case 7:e.getAttrData(),e.resetForm("submit"),e.dialogVisible=!1;case 10:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))},getAttrData:function(){var t=this;return l()(i.a.mark(function e(){var r,o,a,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.product.attrValueList({attr_id:t.attr_id,type_id:t.addGoodsForm.goods_specification,goods_id:t.id||t.goods_id});case 3:r=e.sent,o=r.data,a=t.attr.filter(function(e){return e.id==t.attr_id}),n=a[0].values.map(function(t){return t.id}),s=o.items.filter(function(t){return!n.includes(t.id)}),t.attr.forEach(function(e){e.id==t.attr_id&&e.values.push(s[0])}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}},e,t,[[0,11]])}))()},handleCommand:function(t,e){var r=this;this.tableData.forEach(function(o){"all"!==t?o.forEach(function(i){i.value===t&&("string"==typeof e?r.$set(o,e,r[e]):e.forEach(function(t){r.$set(o,t,r[t])}))}):"string"==typeof e?r.$set(o,e,r[e]):e.forEach(function(t){r.$set(o,t,r[t])})})},copyAll:function(){var t=this;this.colors.map(function(e){t.$set(t.sku_imgs,e.id,{thumb:t.productImgs[0].url})})},handleScroll:Object(k.g)(function(){var t=this;this.$nextTick(function(){D.scrollTop>100?t.isScroll=!0:t.isScroll=!1,t.disableScroll?setTimeout(function(){t.disableScroll=!1},2e3):t.steps.forEach(function(e){var r=document.querySelector("."+e.value);r&&D.scrollTop>parseInt(r.offsetTop)-120&&(t.isActive=e.value,t.activeName=e.value)})})},30),handelClick:function(){var t=this;this.isActive=this.activeName;var e=document.querySelector("."+this.activeName);this.$nextTick(function(){t.disableScroll=!0,D.scrollTo(0,parseInt(e.offsetTop)-50)})},handlePreview:function(t){t&&(this.imgSrc=t,this.visible=!0)},thumbUploadCBK:function(t,e){"thumb"===e?this.thumb=[].concat(y()(t)):this.$set(this.sku_imgs,e,{thumb:t})},imgSuccessUploadCBK:function(t,e){"imgs"===e?this.imgs=[].concat(y()(this.imgs),y()(t)).slice(-4):this.long_thumb=[{url:t[0]}]},videoSuccessUploadCBK:function(t){console.log(t),this.videoUrl=t[0]},handleAddGoods:function(t){var e,r=this;this.$refs[t].validate((e=l()(i.a.mark(function t(e){var o,a,n,s,l;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=58;break}if((o=b()({},r.addGoodsForm)).long_thumb=r.long_thumb[0]?r.long_thumb[0].url:"",o.type=r.addGoodsForm.goods_specification,o.brand_id||(o.brand_id=0),r.seckill_flag?(o.seckill_begin_time=+(+new Date(r.tuan_gou_time[0])/1e3).toFixed(0),o.seckill_end_time=+(+new Date(r.tuan_gou_time[1])/1e3).toFixed(0)):(o.seckill_begin_time="",o.seckill_end_time=""),o.seckill_flag=Number(r.seckill_flag),o.is_coupon_convert=Number(r.is_coupon_convert),o.cat_id1=r.addGoodsForm.cat_id[0]||null,o.cat_id2=r.addGoodsForm.cat_id[1]||0,o.cat_id3=r.addGoodsForm.cat_id[2]||0,o.label_ids=[].concat(y()(o.label_ids)).join(","),o.list_label_ids=[].concat(y()(o.list_label_ids)).join(","),o.detail_label_ids=[].concat(y()(o.detail_label_ids)).join(","),r.productImgs[0]){t.next=17;break}return r.$message.error("请上传商品主图"),t.abrupt("return");case 17:if(a=[],r.productImgs.forEach(function(t){a.push(t.url)}),o.thumb=a[0],o.imgs=a.slice(-4).splice(1),o.sku_imgs=r.sku_imgs,o.video=r.videoUrl,o.start_at=o.start_at?o.start_at/1e3:"",o.end_at=o.end_at?o.end_at/1e3:"",n=[],s=!1,r.tableData.map(function(t,e){var r=t.map(function(t){return t.id});t.shop_price&&+t.shop_price||(t.shop_price_active=!0,t.shop_price=o.shop_price,s=!0),t.store_price&&+t.store_price||(t.store_price_active=!0,t.store_price=o.store_price,s=!0),t.partner_price&&+t.partner_price||(t.partner_price_active=!0,t.partner_price=o.partner_price,s=!0),n.push([t.id||0,r.join(","),t.shop_price,t.cost_price,t.stock,t.member_price,t.store_price,t.user_price,t.activity_price,t.partner_price,t.team_price])}),!s){t.next=34;break}return r.tableData=r.tableData.map(function(t){return t}),l=document.querySelector("#sku-table"),r.$nextTick(function(){D.scrollTo(0,parseInt(l.offsetTop)-40)}),r.$message({message:"检查到部分规格没有填写价格，已为您自动填写。红色价格为系统自动填写，请确认后提交",type:"error",duration:1e4}),t.abrupt("return");case 34:if(o.attr_datas=n,o.params=r.addParams.filter(function(t){return t.key&&t.value}),o.param&&delete o.param,o.thumb){t.next=40;break}return r.$message.error("请上传商品主图"),t.abrupt("return");case 40:if(!(o.imgs.length<1)){t.next=43;break}return r.$message.error("请至少上传一张商品次图"),t.abrupt("return");case 43:return o.properties&&delete o.properties,o.goods_id=r.id||r.goods_id,r.id&&"edit"===r.type&&(o.goods_id=r.id),r.id&&"copy"===r.type&&(o.goods_id=r.goods_id,o.old_goods_id=r.id,delete o.id),t.prev=47,t.next=50,r.$api.product.handleAddGoods(o);case 50:r.$router.push({name:"ProductList"}),t.next=56;break;case 53:throw t.prev=53,t.t0=t.catch(47),new Error(t.t0);case 56:t.next=59;break;case 58:r.$message.error("请确认信息是否填写完整");case 59:case"end":return t.stop()}},t,r,[[47,53]])})),function(t){return e.apply(this,arguments)}))},resetForm:function(t){this.submit.value="",this.submit.sort="10",this.submit.color=""},getAttrs:function(){var t=this;return l()(i.a.mark(function e(){var r,o,a,s,l,c,u,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.product.getAttrs({cat_id:0,goods_id:t.id||0});case 3:return r=e.sent,o=r.data,t.id||(a=o.config,s=a.team_angel1,l=a.integral_customer_point,c=a.buyer_point,u=a.first_point,d=a.second_point,b()(t.addGoodsForm,{team_angel1:s.key_value,integral_customer_point:l.key_value,buyer_point:c.key_value,first_point:u.key_value,second_point:d.key_value})),t.goodsSpecifications=o.typeList,t.goods_id=o.goods_id,t.brands=o.brand,t.suppliers=o.supplier,t.categories=o.category,e.abrupt("return",n.a.resolve(!0));case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",n.a.reject(!1));case 18:case"end":return e.stop()}},e,t,[[0,14]])}))()},goBackOrNext:function(t){this.$emit("update:active",t)},cartesian:function(t){var e=[];return function t(r,o,i){if(0==i)return e.push(r);for(var a=0;a<o[i-1].length;a++)t(r.concat(o[i-1][a]),o,i-1)}([],t,t.length),e},sameArr:function(t,e){return t.every(function(t){return e.includes(t)})&&e.every(function(e){return t.includes(e)})},checkedColorsChange:function(){var t=this,e=[];h()(this.checkbox).map(function(t){t.length>0&&e.push(t)});var r=[].concat(y()(this.tableData));this.tableData=[].concat(y()(this.cartesian(e))),r.length>0&&(r.forEach(function(e,o){t.tableData.forEach(function(i){var a=i.map(function(t){return t.attr_id+":"+t.id});if(k.e.isEqual(t.editSkuData,r))t.sameArr(e.properties.split(","),a)&&(t.checkMethod(r,o,i,"cost_price"),t.checkMethod(r,o,i,"shop_price"),t.checkMethod(r,o,i,"stock"),t.checkMethod(r,o,i,"member_price"),t.checkMethod(r,o,i,"store_price"),t.checkMethod(r,o,i,"team_price"),t.checkMethod(r,o,i,"user_price"),t.checkMethod(r,o,i,"activity_price"),t.checkMethod(r,o,i,"partner_price"),t.checkMethod(r,o,i,"id"));else{var n=e.map(function(t){return t.attr_id+":"+t.id});t.sameArr(n,a)&&(t.checkMethod(r,o,i,"cost_price"),t.checkMethod(r,o,i,"shop_price"),t.checkMethod(r,o,i,"stock"),t.checkMethod(r,o,i,"member_price"),t.checkMethod(r,o,i,"store_price"),t.checkMethod(r,o,i,"team_price"),t.checkMethod(r,o,i,"user_price"),t.checkMethod(r,o,i,"activity_price"),t.checkMethod(r,o,i,"partner_price"),t.checkMethod(r,o,i,"id"))}})}),k.e.isEqual(this.editSkuData,r)&&(this.tableData=this.tableData.filter(function(t){return t.shop_price})))},checkMethod:function(t,e,r,o){t[e]&&t[e][o]&&this.$set(r,o,t[e][o])}})},j={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"add-product-step2"},[r("el-tabs",{on:{"tab-click":function(e){return t.handelClick()}},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.steps,function(e){return r("el-tab-pane",{key:e.value,attrs:{name:e.value}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        "+t._s(e.label)+"\n        "),r("span")])])}),1),t._v(" "),r("ul",{directives:[{name:"show",rawName:"v-show",value:t.isScroll&&!t.showSteps,expression:"isScroll && !showSteps"}],staticClass:"step-scroll unfold",on:{click:function(e){t.showSteps=!0}}},[r("i",{staticClass:"el-icon-plus"}),t._v(" "),r("p",[t._v("展开")])]),t._v(" "),t.isScroll&&t.showSteps?r("el-tabs",{class:{"step-scroll":t.isScroll&&t.showSteps},on:{"tab-click":function(e){return t.handelClick()}},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.steps,function(e){return r("el-tab-pane",{key:e.value,attrs:{name:e.value}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        "+t._s(e.label)+"\n        "),r("span")])])}),1):t._e(),t._v(" "),r("ul",{directives:[{name:"show",rawName:"v-show",value:t.isScroll&&!t.showSteps,expression:"isScroll && !showSteps"}],staticClass:"step-scroll unfold",on:{click:function(e){t.showSteps=!0}}},[r("i",{staticClass:"el-icon-plus"}),t._v(" "),r("p",[t._v("展开")])]),t._v(" "),r("el-form",{ref:"addGoodsForm",staticClass:"form",attrs:{model:t.addGoodsForm,"label-width":"120px"}},[r("div",{staticClass:"information model"},[r("div",{staticClass:"title"},[t._v("基本信息")]),t._v(" "),r("div",{staticClass:"form"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"商品名称:",prop:"title",rules:[t.simpleRule]}},[r("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入商品名称",maxlength:"60","show-word-limit":""},model:{value:t.addGoodsForm.title,callback:function(e){t.$set(t.addGoodsForm,"title",e)},expression:"addGoodsForm.title"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"副标题:",prop:"subtitle"}},[r("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入商品副标题",maxlength:"12","show-word-limit":""},model:{value:t.addGoodsForm.subtitle,callback:function(e){t.$set(t.addGoodsForm,"subtitle",e)},expression:"addGoodsForm.subtitle"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"商品货号:",prop:"goods_sn"}},[r("el-input",{attrs:{placeholder:"不输入商品货号，系统将自动生成唯一的货号"},model:{value:t.addGoodsForm.goods_sn,callback:function(e){t.$set(t.addGoodsForm,"goods_sn",e)},expression:"addGoodsForm.goods_sn"}})],1)],1)],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{key:"cat_id",attrs:{label:"商品分类",prop:"cat_id",rules:[t.simpleRule]}},[r("el-cascader",{staticStyle:{width:"100%"},attrs:{clearable:"","change-on-select":"",filterable:"","expand-trigger":"hover",options:t.categories,placeholder:"请选择商品分类"},model:{value:t.addGoodsForm.cat_id,callback:function(e){t.$set(t.addGoodsForm,"cat_id",e)},expression:"addGoodsForm.cat_id"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"商品排序:",prop:"sort"}},[r("el-input",{attrs:{placeholder:"请输入商品排序"},model:{value:t.addGoodsForm.sort,callback:function(e){t.$set(t.addGoodsForm,"sort",e)},expression:"addGoodsForm.sort"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"商品品牌:",prop:"brand_id"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选商品品牌"},model:{value:t.addGoodsForm.brand_id,callback:function(e){t.$set(t.addGoodsForm,"brand_id",e)},expression:"addGoodsForm.brand_id"}},t._l(t.brands,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1)],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"选供应商:",prop:"supplier_id"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择供应商"},model:{value:t.addGoodsForm.supplier_id,callback:function(e){t.$set(t.addGoodsForm,"supplier_id",e)},expression:"addGoodsForm.supplier_id"}},t._l(t.suppliers,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"运费模板:",prop:"weight"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:""},model:{value:t.addGoodsForm.freight_id,callback:function(e){t.$set(t.addGoodsForm,"freight_id",e)},expression:"addGoodsForm.freight_id"}},t._l(t.freights,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1)],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"跨境商品:",prop:"cross_border",rules:[t.simpleRule]}},[r("el-radio-group",{model:{value:t.addGoodsForm.cross_border,callback:function(e){t.$set(t.addGoodsForm,"cross_border",e)},expression:"addGoodsForm.cross_border"}},[r("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),r("el-radio",{attrs:{label:2}},[t._v("否")])],1)],1)],1)],1)],1)]),t._v(" "),r("div",{staticClass:"parameter model"},[r("div",{staticClass:"title"},[t._v("商品参数")]),t._v(" "),r("div",{staticClass:"form",attrs:{size:"mini"}},[r("el-button",{staticStyle:{"margin-left":"20px","margin-bottom":"20px"},attrs:{type:"primary",size:"mini",icon:"el-icon-plus",plain:""},on:{click:t.handleAddParams}},[t._v("新增")]),t._v(" "),t._l(t.addParams,function(e,o){return r("el-row",{key:o,attrs:{gutter:10}},[r("el-form-item",{staticStyle:{display:"inline-block"},attrs:{"label-width":"26px"}},[r("el-input",{staticStyle:{width:"220px"},model:{value:e.key,callback:function(r){t.$set(e,"key",r)},expression:"params.key"}},[r("template",{slot:"prepend"},[t._v("属性名:")])],2)],1),t._v(" "),r("el-form-item",{staticStyle:{display:"inline-block"},attrs:{"label-width":"10px"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.value,callback:function(r){t.$set(e,"value",r)},expression:"params.value"}},[r("template",{slot:"prepend"},[t._v("属性值:")])],2)],1),t._v(" "),r("i",{staticClass:"el-icon-close",on:{click:function(r){return r.preventDefault(),t.removeParam(e)}}})],1)})],2)]),t._v(" "),r("div",{staticClass:"attribute model"},[r("div",{staticClass:"title"},[t._v("销售属性")]),t._v(" "),r("div",{staticClass:"form"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"类目规格:",prop:"goods_specification",rules:[t.simpleRule]}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择商品规格"},on:{change:t.goodsSpecificationChanged},model:{value:t.addGoodsForm.goods_specification,callback:function(e){t.$set(t.addGoodsForm,"goods_specification",e)},expression:"addGoodsForm.goods_specification"}},t._l(t.goodsSpecifications,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1)],1),t._v(" "),t._l(t.attr,function(e,o){return r("div",{key:o,staticClass:"spec-table-box",attrs:{id:"sku-table"}},[r("div",{staticClass:"spec-table-box-in"},[r("div",{staticClass:"spec-name"},[t._v("\n              "+t._s(e.name)+"\n            ")]),t._v(" "),t._l(t.checkbox[e.name],function(o,i){return r("el-tag",{key:i,attrs:{closable:""},on:{close:function(r){return t.handleClose(e.name,i)}}},[t._v("\n              "+t._s(o.value)+"\n            ")])}),t._v(" "),r("el-button",{staticClass:"add-sku-btn",attrs:{size:"mini",round:""},on:{click:function(r){return t.addCurrentAttr(e)}}},[t._v("添加")])],2),t._v(" "),r("div",{staticClass:"check-block"},[r("el-checkbox-group",{staticClass:"spec-table-checkbox",on:{change:t.checkedColorsChange},model:{value:t.checkbox[e.name],callback:function(r){t.$set(t.checkbox,e.name,r)},expression:"checkbox[item.name]"}},t._l(e.values,function(e){return r("el-checkbox",{key:e.id,attrs:{label:e}},[t._v(t._s(e.value))])}),1)],1)])}),t._v(" "),r("div",{staticClass:"batch-input"},[t._v("\n          批量填写\n          "),r("el-input",{staticStyle:{"max-width":"120px"},attrs:{type:"number",size:"mini",placeholder:"团购价格"},model:{value:t.shop_price,callback:function(e){t.shop_price=e},expression:"shop_price"}}),t._v(" "),r("el-input",{staticStyle:{"max-width":"120px"},attrs:{type:"number",size:"mini",placeholder:"成本价格"},model:{value:t.cost_price,callback:function(e){t.cost_price=e},expression:"cost_price"}}),t._v(" "),r("el-input",{staticStyle:{"max-width":"120px"},attrs:{type:"number",size:"mini",placeholder:"商品库存"},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}}),t._v(" "),r("el-input",{staticStyle:{"max-width":"120px"},attrs:{type:"number",size:"mini",placeholder:"白银价格"},model:{value:t.store_price,callback:function(e){t.store_price=e},expression:"store_price"}}),t._v(" "),r("el-input",{staticStyle:{"max-width":"120px"},attrs:{type:"number",size:"mini",placeholder:"svip价"},model:{value:t.member_price,callback:function(e){t.member_price=e},expression:"member_price"}}),t._v(" "),r("el-input",{staticStyle:{"max-width":"120px"},attrs:{type:"number",size:"mini",placeholder:"钻石价格"},model:{value:t.team_price,callback:function(e){t.team_price=e},expression:"team_price"}}),t._v(" "),r("el-input",{staticStyle:{"max-width":"120px"},attrs:{type:"number",size:"mini",placeholder:"黄金价格"},model:{value:t.partner_price,callback:function(e){t.partner_price=e},expression:"partner_price"}}),t._v(" "),r("el-dropdown",{attrs:{trigger:"click"},on:{command:function(e){return t.handleCommand(e,t.typeNames)}}},[r("span",{staticClass:"el-dropdown-link"},[r("el-button",{attrs:{type:"primary",plain:"",size:"mini"}},[t._v("应用于")])],1),t._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"all"}},[t._v("全部应用")]),t._v(" "),t._l(t.excludeColorAttrs,function(e,o){return r("el-dropdown-item",{key:o,attrs:{command:e.value}},[t._v("仅应用于："+t._s(e.value))])})],2)],1)],1),t._v(" "),t.attr.length>0?r("el-table",{ref:"multipleTable",staticStyle:{width:"calc(100% - 20px)",margin:"0 auto 20px 20px"},attrs:{border:"",data:t.tableData,"tooltip-effect":"dark","span-method":t.objectSpanMethod}},[t._l(t.reverseAttr||[],function(e,o){return r("el-table-column",{key:o,attrs:{width:"71",align:"center",prop:"color",label:e.name},scopedSlots:t._u([{key:"default",fn:function(r){return[t._v("\n              "+t._s(t.getAttrValue(r.$index,e.id))+"\n            ")]}}],null,!0)})}),t._v(" "),r("el-table-column",{attrs:{align:"center",prop:"money",label:"团购价格"},scopedSlots:t._u([{key:"header",fn:function(e){return[r("div",{staticClass:"flex-center"},[r("span",[t._v("团购价格")])])]}},{key:"default",fn:function(e){return[r("el-input",{class:{price_active:e.row.shop_price_active},staticStyle:{width:"70%"},attrs:{type:"number",placeholder:"请输入"},model:{value:e.row.shop_price,callback:function(r){t.$set(e.row,"shop_price",r)},expression:"scope.row.shop_price"}})]}}],null,!1,2196568557)}),t._v(" "),r("el-table-column",{attrs:{align:"center",prop:"money",label:"成本价格"},scopedSlots:t._u([{key:"header",fn:function(e){return[r("div",{staticClass:"flex-center"},[r("span",[t._v("成本价格")])])]}},{key:"default",fn:function(e){return[r("el-input",{staticStyle:{width:"70%"},attrs:{type:"number",placeholder:"请输入"},model:{value:e.row.cost_price,callback:function(r){t.$set(e.row,"cost_price",r)},expression:"scope.row.cost_price"}})]}}],null,!1,2087357422)}),t._v(" "),r("el-table-column",{attrs:{align:"center",prop:"money",label:"商品库存"},scopedSlots:t._u([{key:"header",fn:function(e){return[r("div",{staticClass:"flex-center"},[r("span",[t._v("商品库存")])])]}},{key:"default",fn:function(e){return[!e.row.id||e.row.id&&10!=t.status?r("el-input",{staticStyle:{width:"70%"},attrs:{type:"number",placeholder:"请输入"},on:{change:t.changeStoce},model:{value:e.row.stock,callback:function(r){t.$set(e.row,"stock",r)},expression:"scope.row.stock"}}):r("div",{staticStyle:{"text-align":"center"}},[r("div",[t._v(t._s(e.row.stock))]),t._v(" "),r("el-button",{staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(r){return t.handelEditStock(e.row.id)}}},[t._v("编辑库存")])],1)]}}],null,!1,1982203637)}),t._v(" "),r("el-table-column",{attrs:{align:"center",prop:"store_price",label:"白银价格"},scopedSlots:t._u([{key:"header",fn:function(e){return[r("div",{staticClass:"flex-center"},[r("span",[t._v("白银价格")])])]}},{key:"default",fn:function(e){return[r("el-input",{class:{price_active:e.row.store_price_active},staticStyle:{width:"70%"},attrs:{type:"number",placeholder:"请输入"},model:{value:e.row.store_price,callback:function(r){t.$set(e.row,"store_price",r)},expression:"scope.row.store_price"}})]}}],null,!1,3590147049)}),t._v(" "),r("el-table-column",{attrs:{align:"center",prop:"member_price",label:"svip价"},scopedSlots:t._u([{key:"header",fn:function(e){return[r("div",{staticClass:"flex-center"},[r("span",[t._v("svip价")])])]}},{key:"default",fn:function(e){return[r("el-input",{class:{member_price_active:e.row.member_price_active},staticStyle:{width:"70%"},attrs:{type:"number",placeholder:"请输入"},model:{value:e.row.member_price,callback:function(r){t.$set(e.row,"member_price",r)},expression:"scope.row.member_price"}})]}}],null,!1,2915766701)}),t._v(" "),r("el-table-column",{attrs:{align:"center",prop:"team_price",label:"钻石价"},scopedSlots:t._u([{key:"header",fn:function(e){return[r("div",{staticClass:"flex-center"},[r("span",[t._v("钻石价")])])]}},{key:"default",fn:function(e){return[r("el-input",{class:{team_price_active:e.row.team_price_active},staticStyle:{width:"70%"},attrs:{type:"number",placeholder:"请输入"},model:{value:e.row.team_price,callback:function(r){t.$set(e.row,"team_price",r)},expression:"scope.row.team_price"}})]}}],null,!1,2017706452)}),t._v(" "),r("el-table-column",{attrs:{align:"center",prop:"partner_price",label:"黄金价"},scopedSlots:t._u([{key:"header",fn:function(e){return[r("div",{staticClass:"flex-center"},[r("span",[t._v("黄金价")])])]}},{key:"default",fn:function(e){return[r("el-input",{class:{price_active:e.row.partner_priceFthis_active},staticStyle:{width:"70%"},attrs:{type:"number",placeholder:"请输入"},model:{value:e.row.partner_price,callback:function(r){t.$set(e.row,"partner_price",r)},expression:"scope.row.partner_price"}})]}}],null,!1,1982034187)}),t._v(" "),r("el-table-column",{attrs:{align:"center",prop:"partner_price",label:"操作",width:"50px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("i",{staticClass:"el-icon-close",on:{click:function(r){return r.preventDefault(),t.removeCurrentColumn(e.row)}}})]}}],null,!1,2815184755)})],2):t._e(),t._v(" "),r("div",{staticClass:"sku-images"},[r("div",[t._v("规格图片"),r("span",{staticClass:"prompt"},[t._v("（没有规格图片时，默认显示主图。买家选择不同规格会看到对应规格图片，建议尺寸：500 x 500像素）")]),t._v(" "),r("el-button",{attrs:{size:"mini",round:""},on:{click:t.copyAll}},[t._v("一键复用到所有sku主图")])],1),t._v(" "),r("div",{staticClass:"sku-img-list"},t._l(t.colors,function(e,o){return r("div",{key:o,staticStyle:{"margin-top":"10px"}},[t.sku_imgs[e.id]&&t.sku_imgs[e.id].thumb?r("i",{staticClass:"el-icon-close clear-btn",on:{click:function(r){return r.stopPropagation(),t.removeSkuImg(e.id)}}}):t._e(),t._v(" "),r("FileUpload",{staticClass:"file-button",attrs:{isOnly:!0,isNew:!0,fileList:t.sku_imgs[e.id]?[{url:t.sku_imgs[e.id].thumb}]:[]},on:{successUploadCBK:function(r){return t.thumbUploadCBK(r,e.id)}}}),t._v(" "),r("b",{staticClass:"sku-name"},[t._v(t._s(e.value))])],1)}),0)]),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"商品总库存:",prop:"stock",rules:[t.simpleRule]}},[r("el-input",{attrs:{placeholder:"请输入商品总库存",disabled:"edit"===t.type},model:{value:t.addGoodsForm.stock,callback:function(e){t.$set(t.addGoodsForm,"stock",e)},expression:"addGoodsForm.stock"}},[r("template",{slot:"append"},[t._v("个")])],2)],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"销售数量:",prop:"sale_num"}},[r("el-input",{attrs:{placeholder:"请输入销售数量"},model:{value:t.addGoodsForm.sale_num,callback:function(e){t.$set(t.addGoodsForm,"sale_num",e)},expression:"addGoodsForm.sale_num"}},[r("template",{slot:"append"},[t._v("个")])],2)],1)],1)],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"市场价:",prop:"market_price",rules:[t.simpleRule]}},[r("el-input",{attrs:{placeholder:"请输入市场价",size:"mini"},model:{value:t.addGoodsForm.market_price,callback:function(e){t.$set(t.addGoodsForm,"market_price",e)},expression:"addGoodsForm.market_price"}},[r("template",{slot:"append"},[t._v("元")])],2)],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"成本价:",prop:"cost_price"}},[r("el-input",{attrs:{placeholder:"请输入成本价"},model:{value:t.addGoodsForm.cost_price,callback:function(e){t.$set(t.addGoodsForm,"cost_price",e)},expression:"addGoodsForm.cost_price"}},[r("template",{slot:"append"},[t._v("元")])],2)],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"团购价:",prop:"shop_price",rules:[t.simpleRule]}},[r("el-input",{attrs:{placeholder:"请输入团购价"},model:{value:t.addGoodsForm.shop_price,callback:function(e){t.$set(t.addGoodsForm,"shop_price",e)},expression:"addGoodsForm.shop_price"}},[r("template",{slot:"append"},[t._v("元")])],2)],1)],1)],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"svip价:",prop:"member_price",rules:[t.simpleRule]}},[r("el-input",{attrs:{placeholder:"请输入svip价格"},model:{value:t.addGoodsForm.member_price,callback:function(e){t.$set(t.addGoodsForm,"member_price",e)},expression:"addGoodsForm.member_price"}},[r("template",{slot:"append"},[t._v("元")])],2)],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"白银价格:",prop:"store_price",rules:[t.simpleRule]}},[r("el-input",{attrs:{placeholder:"请输入白银价格"},model:{value:t.addGoodsForm.store_price,callback:function(e){t.$set(t.addGoodsForm,"store_price",e)},expression:"addGoodsForm.store_price"}},[r("template",{slot:"append"},[t._v("元")])],2)],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"黄金价:",prop:"partner_price",rules:[t.simpleRule]}},[r("el-input",{attrs:{placeholder:"请输入黄金价格"},model:{value:t.addGoodsForm.partner_price,callback:function(e){t.$set(t.addGoodsForm,"partner_price",e)},expression:"addGoodsForm.partner_price"}},[r("template",{slot:"append"},[t._v("元")])],2)],1)],1)],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"钻石价:",prop:"team_price",rules:[t.simpleRule]}},[r("el-input",{attrs:{placeholder:"请输入钻石价格"},model:{value:t.addGoodsForm.team_price,callback:function(e){t.$set(t.addGoodsForm,"team_price",e)},expression:"addGoodsForm.team_price"}},[r("template",{slot:"append"},[t._v("元")])],2)],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"白银平级返利:",prop:"first_fee",rules:[t.simpleRule]}},[r("el-input",{attrs:{placeholder:"请输入白银平级返利"},model:{value:t.addGoodsForm.first_fee,callback:function(e){t.$set(t.addGoodsForm,"first_fee",e)},expression:"addGoodsForm.first_fee"}},[r("template",{slot:"append"},[t._v("元")])],2)],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"黄金平级返利:",prop:"team_angel1",rules:[t.simpleRule]}},[r("el-input",{attrs:{placeholder:"请输入黄金平级返利"},model:{value:t.addGoodsForm.team_angel1,callback:function(e){t.$set(t.addGoodsForm,"team_angel1",e)},expression:"addGoodsForm.team_angel1"}},[r("template",{slot:"append"},[t._v("元")])],2)],1)],1)],1),t._v(" "),r("el-row",{attrs:{gutter:20}})],2)]),t._v(" "),r("div",{staticClass:"imgs model describe"},[r("div",{staticClass:"title"},[t._v("商品描述")]),t._v(" "),r("div",{staticClass:"form"},[r("el-form-item",{staticClass:"item-flex",attrs:{label:"商品图片:"}},[r("multiImgUpload",{attrs:{topTitle:"商品主图",isNew:!0,hasMove:!0,limit:5,imgs:t.productImgs},on:{handlePreview:t.handlePreview,"update:imgs":function(e){t.productImgs=e}}}),t._v(" "),r("div",{staticClass:"prompt"},[r("div",[t._v("1.尺寸：800 x 800 像素")]),t._v(" "),r("div",[t._v("2.大小：3M以内")]),t._v(" "),r("div",[t._v("3.数量：限制在5张以内")])])],1),t._v(" "),r("el-form-item",{staticClass:"item-flex video",attrs:{label:"商品视频:"}},[r("FileUpload",{staticClass:"file-button",attrs:{isNew:!0,btnDesc:"点击上传",isBotton:!0,isOnly:!0,fileList:t.videoUrl?[{name:t.videoUrl,url:t.videoUrl}]:[],listType:"text"},on:{successUploadCBK:t.videoSuccessUploadCBK}},[t._v("视频上传")]),t._v(" "),r("span",{staticClass:"prompt"},[t._v("1.尺寸：此处可使用1：1或16：9比例视频 2.时长：≤60s，建议30秒以内 3.内容：突出商品1-2个核心卖点")])],1),t._v(" "),r("el-form-item",{staticClass:"item-flex",attrs:{label:"商品长图:"}},[r("div",[r("div",[r("FileUpload",{staticClass:"file-upload",attrs:{isOnly:!0,isNew:!0,fileList:t.long_thumb,width:"351px",height:"140px"},on:{successUploadCBK:function(e){return t.imgSuccessUploadCBK(e,"long_thumb")}}})],1)]),t._v(" "),r("div",{staticClass:"prompt"},[r("div",[t._v("1.尺寸：702 x 280 像素")]),t._v(" "),r("div",[t._v("2.大小：建议3M以内")]),t._v(" "),r("div",[t._v("3.格式：图片仅支持JPG,PNG格式")]),t._v(" "),r("div",[t._v("4.显示：展示在首页团购 长图模块 团购商品必须上传")])])]),t._v(" "),r("el-form-item",{attrs:{label:"图文详情:",prop:"content"}},[r("Tinymce",{ref:"editor",attrs:{height:400},model:{value:t.addGoodsForm.content,callback:function(e){t.$set(t.addGoodsForm,"content",e)},expression:"addGoodsForm.content"}})],1)],1)]),t._v(" "),r("div",{staticClass:"setting model"},[r("div",{staticClass:"title"},[t._v("功能设置")]),t._v(" "),r("div",{staticClass:"form"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"定时上架:",prop:"start_at"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",size:"mini",type:"datetime",placeholder:"选择定时上架时间"},model:{value:t.addGoodsForm.start_at,callback:function(e){t.$set(t.addGoodsForm,"start_at",e)},expression:"addGoodsForm.start_at"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"定时下架:",prop:"end_at"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",size:"mini",type:"datetime",placeholder:"选择定时下架时间"},model:{value:t.addGoodsForm.end_at,callback:function(e){t.$set(t.addGoodsForm,"end_at",e)},expression:"addGoodsForm.end_at"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"24h最大购买数:",prop:"day_max"}},[r("el-input",{attrs:{placeholder:"24h最大购买数"},model:{value:t.addGoodsForm.day_max,callback:function(e){t.$set(t.addGoodsForm,"day_max",e)},expression:"addGoodsForm.day_max"}})],1)],1)],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"单次最多购买:",prop:"single_max"}},[r("el-input",{attrs:{placeholder:"单次最多购买"},model:{value:t.addGoodsForm.single_max,callback:function(e){t.$set(t.addGoodsForm,"single_max",e)},expression:"addGoodsForm.single_max"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"单次最低购买:",prop:"single_min"}},[r("el-input",{attrs:{placeholder:"单次最低购买"},model:{value:t.addGoodsForm.single_min,callback:function(e){t.$set(t.addGoodsForm,"single_min",e)},expression:"addGoodsForm.single_min"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"最多购买:",prop:"limit_max"}},[r("el-input",{attrs:{placeholder:"最多购买"},model:{value:t.addGoodsForm.limit_max,callback:function(e){t.$set(t.addGoodsForm,"limit_max",e)},expression:"addGoodsForm.limit_max"}})],1)],1)],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"列表页标签:",prop:"label"}},[r("el-checkbox-group",{attrs:{min:0,max:2},model:{value:t.addGoodsForm.list_label_ids,callback:function(e){t.$set(t.addGoodsForm,"list_label_ids",e)},expression:"addGoodsForm.list_label_ids"}},t._l(t.labelData,function(e){return r("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.label))])}),1),t._v(" "),r("p",{staticClass:"tips"},[t._v("标签最多可设置两个")])],1)],1)],1)],1)]),t._v(" "),r("div",{staticClass:"sales model"},[r("div",{staticClass:"title"},[t._v("推荐促销")]),t._v(" "),r("div",{staticClass:"form"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"热销top榜:",prop:"label"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.addGoodsForm.is_quick,callback:function(e){t.$set(t.addGoodsForm,"is_quick",e)},expression:"addGoodsForm.is_quick"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"新品上新:",prop:"label"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.addGoodsForm.is_top,callback:function(e){t.$set(t.addGoodsForm,"is_top",e)},expression:"addGoodsForm.is_top"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"特价福利:",prop:"label"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.addGoodsForm.is_welfare,callback:function(e){t.$set(t.addGoodsForm,"is_welfare",e)},expression:"addGoodsForm.is_welfare"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"白银礼包:",prop:"label"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.addGoodsForm.is_gift,callback:function(e){t.$set(t.addGoodsForm,"is_gift",e)},expression:"addGoodsForm.is_gift"}})],1)],1)],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:4}},[r("el-form-item",{staticClass:"seckill-flag",attrs:{label:"添加秒杀:"}},[r("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},model:{value:t.seckill_flag,callback:function(e){t.seckill_flag=e},expression:"seckill_flag"}})],1)],1)],1),t._v(" "),t.seckill_flag?r("el-row",{attrs:{gutter:20}},[r("el-form-item",{attrs:{label:"秒杀时间:"}},[r("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:t.tuan_gou_time,callback:function(e){t.tuan_gou_time=e},expression:"tuan_gou_time"}})],1)],1):t._e()],1)])]),t._v(" "),r("div",{staticClass:"complete"},[r("el-button",{staticClass:"next",attrs:{type:"primary"},on:{click:function(e){return t.handleAddGoods("addGoodsForm")}}},[t._v("完成，提交商品")])],1),t._v(" "),r("PreviewImg",{attrs:{visible:t.visible,imgSrc:t.imgSrc},on:{"update:visible":function(e){t.visible=e}}}),t._v(" "),r("el-dialog",{attrs:{title:"添加商品属性值",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-form",{ref:"submit",attrs:{model:t.submit,rules:t.submitRules,"label-width":"150px","label-position":"right"}},[r("el-form-item",{attrs:{label:"属性名："}},[r("span",[t._v(t._s(t.attr_name))])]),t._v(" "),r("el-form-item",{attrs:{label:"参数值：",prop:"value"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:t.submit.value,callback:function(e){t.$set(t.submit,"value",e)},expression:"submit.value"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"是否设置单独sku图：",prop:"is_color"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.submit.is_color,callback:function(e){t.$set(t.submit,"is_color",e)},expression:"submit.is_color"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"色值："}},[r("el-input",{staticStyle:{width:"200px"},model:{value:t.submit.color,callback:function(e){t.$set(t.submit,"color",e)},expression:"submit.color"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.submit.sort,callback:function(e){t.$set(t.submit,"sort",e)},expression:"submit.sort"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1,t.resetForm("submit")}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.handleAddAttr}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var E={name:"AddProduct",components:{AddProductStep1:m,AddProductStep2:r("C7Lr")(A,j,!1,function(t){r("aLiO"),r("5Ccn"),r("Ob5N"),r("5aQG")},"data-v-283d570f",null).exports},data:function(){var t=this.$route.params;return{type:t.type,id:t.id,step:0,region:"",options:[],step1Data:{},step1EditData:{},step2EditData:{}}},watch:{$route:function(t){this.$refreshTab()}},created:function(){var t=this;this.id&&this.getdetail().then(function(e){e&&(t.step=1)})},methods:{step1CBK:function(t){this.step1Data=t},getdetail:function(){var t=this;return l()(i.a.mark(function e(){var r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.product.getdetail({id:t.id});case 3:return r=e.sent,o=r.data,t.step1Data.cat1={id:o.detail.cat_id1,label:o.detail.cat1_name},t.step1Data.cat2={id:o.detail.cat_id2,label:o.detail.cat2_name},t.step1Data.cat3={id:o.detail.cat_id3,label:o.detail.cat3_name},t.step2EditData=o,e.abrupt("return",n.a.resolve(!0));case 12:throw e.prev=12,e.t0=e.catch(0),new Error(e.t0);case 15:case"end":return e.stop()}},e,t,[[0,12]])}))()}}},N={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"add-product"},[!t.id||t.id&&t.step?r("AddProductStep2",{attrs:{id:t.id,editData:t.step2EditData,step1Data:{},active:t.step},on:{"update:active":function(e){t.step=e}}}):t._e()],1)},staticRenderFns:[]};var T=r("C7Lr")(E,N,!1,function(t){r("5QbT"),r("xU0l")},"data-v-230b9bf8",null);e.default=T.exports}});