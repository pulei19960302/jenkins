webpackJsonp([40],{RJt1:function(e,t){},qxrn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("aA9S"),r=a.n(n),s=a("lC5x"),i=a.n(s),o=a("J0Oq"),l=a.n(o),c=a("4YfN"),p=a.n(c),u=a("48sp"),d=a("FFUX"),f={name:"logisticsCompany",data:function(){return{loading:!1,isEdit:!1,dialogVisible:!1,current:1,pageSize:10,count:0,query:{},exportOptions:[],tableData:[],multipleSelection:[],searchOPtions:[{type:"input",key:"id",placeholder:"快递id"},{type:"input",key:"keywords",placeholder:"关键词"},{type:"select",key:"status",placeholder:"状态",options:[{label:"启用",value:10},{label:"禁用",value:0}]}],form:{},rules:{name:[{required:!0,message:"请输入",trigger:"change"}]}}},computed:p()({},Object(u.e)("user",["button_permissions"])),created:function(){this.getData()},methods:{changeStatus:function(e){var t=this,a=e.status,n=e.id;return l()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.setting.setStatusExpress({status:a,id:n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.tableData.map(function(e){e.id===n&&t.$set(e,"status",10==a?0:10)});case 8:case"end":return e.stop()}},e,t,[[0,5]])}))()},resetForm:function(){this.$refs.form.resetFields()},handelEdit:function(e){var t=e.name,a=e.express_code,n=e.phone,r=e.status,s=e.id;this.id=s,this.isEdit=!0,this.dialogVisible=!0,this.oldRowData={name:t,express_code:a,phone:n,status:r},this.form={name:t,express_code:a,phone:n,status:r}},AddLabel:function(e){var t,a=this;this.$refs.form.validate((t=l()(i.a.mark(function t(n){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=22;break}if(t.prev=1,s=r()({},a.form),!e){t.next=12;break}if(!d.e.isEqual(a.oldRowData,a.form)){t.next=7;break}return a.$message({message:"暂无数据变更",type:"warning"}),t.abrupt("return");case 7:return s.id=a.id,t.next=10,a.$api.setting.editExpress(s);case 10:t.next=14;break;case 12:return t.next=14,a.$api.setting.addExpress(s);case 14:a.isEdit=!1,a.dialogVisible=!1,a.getData(),t.next=22;break;case 19:throw t.prev=19,t.t0=t.catch(1),new Error(t.t0);case 22:case"end":return t.stop()}},t,a,[[1,19]])})),function(e){return t.apply(this,arguments)}))},handleSelectionChange:function(e){this.multipleSelection=e},handlePageChange:function(e){this.current=e,this.getData()},handleSizeChange:function(e){this.pageSize=e,this.getData()},handelSearch:function(e,t){var a=this;({search:function(){a.query=p()({},t),a.current=1,a.getData()},reset:function(){a.query={},a.pageSize=10,a.current=1,a.getData()}})[e]()},getData:function(){var e=this;return l()(i.a.mark(function t(){var a,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$api.setting.getExpressList(p()({},e.query,{pagesize:e.pageSize,page:e.current}));case 4:a=t.sent,n=a.data,e.tableData=n.items,e.count=n.count,e.exportOptions=n.fields||[],e.loading=!1,t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(0),e.loading=!1,new Error(t.t0);case 16:case"end":return t.stop()}},t,e,[[0,12]])}))()},handleDel:function(e){var t=this;this.$confirm("确认删除选中快递公司？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$api.setting.delExpress({ids:e});case 3:t.getData(),a.next=9;break;case 6:throw a.prev=6,a.t0=a.catch(0),new Error(a.t0);case 9:case"end":return a.stop()}},a,t,[[0,6]])})))}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"min-height":"calc(100vh - 135px)",background:"#fff"}},[a("Search",{attrs:{searchOPtions:e.searchOPtions},on:{searchCallback:e.handelSearch}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.setting.express.add],expression:"[$api.setting.express.add]"}],attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){e.dialogVisible=!0,e.form={status:0}}}},[e._v("添加")]),e._v(" "),a("Export",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.setting.express.export],expression:"[$api.setting.express.export]"}],attrs:{exportOptions:e.exportOptions,query:e.query,url:e.$api.setting.express.export}})],1),e._v(" "),[a("div",{staticStyle:{padding:"0 16px 16px 16px",background:"#fff","border-radius":"0 0 4px 4px",width:"100%"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","highlight-current-row":!0,border:"",data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"60",prop:"id",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{label:"快递名称",prop:"name","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"快递代码",prop:"express_code"}}),e._v(" "),a("el-table-column",{attrs:{label:"联系电话",prop:"phone"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e._f("validVal")(t.row.phone))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:!e.button_permissions.includes(e.$api.setting.express.edit),"active-value":10,"inactive-value":0},on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",prop:"updated_at"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e._f("validDateTime")(t.row.updated_at))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"120px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.setting.express.edit],expression:"[$api.setting.express.edit]"}],staticClass:"look-word",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.handelEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.setting.express.del],expression:"[$api.setting.express.del]"}],staticClass:"look-word",attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return e.handleDel(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("Pagination",{attrs:{current:e.current,pageSize:e.pageSize,count:e.count},on:{opreateCBK:e.handleDel,pageChangeCBK:e.handlePageChange,sizeChangeCBK:e.handleSizeChange}}),e._v(" "),a("el-dialog",{attrs:{title:"添加物流公司",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"快递名称：",prop:"name"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"快递代码：",prop:"express_code"}},[a("el-input",{staticStyle:{width:"70%"},model:{value:e.form.express_code,callback:function(t){e.$set(e.form,"express_code",t)},expression:"form.express_code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话：",prop:"phone"}},[a("el-input",{staticStyle:{width:"70%"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否启用：",prop:"status"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1,e.isEdit=!1,e.resetForm()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.AddLabel(e.isEdit)}}},[e._v("\n                    确定\n                ")])],1)],1)]],2)},staticRenderFns:[]};var h=a("C7Lr")(f,m,!1,function(e){a("RJt1")},"data-v-a4b57de0",null);t.default=h.exports}});