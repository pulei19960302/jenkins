webpackJsonp([25,7],{"3hZv":function(e,t){},"63ac":function(e,t){},A9kh:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("aA9S"),i=r.n(a),n=r("lC5x"),s=r.n(n),l=r("4YfN"),o=r.n(l),c=r("J0Oq"),u=r.n(c),d={name:"NewBrand",props:{show:[Boolean],id:{}},data:function(){return{visible:!1,ruleForm:{name:"",sort:"",display:0,is_maker:0,thumb:[{url:""}],imgs:[{url:""}],logo:[{url:""}],initial:"",description:"",cat_ids:"",cat_arr:[]},areaList:[],rules:{name:[{required:!0,message:"请输入",trigger:"blur"}],description:[{required:!0,message:"请输入",trigger:"blur"}],initial:[{required:!0,message:"请选择",trigger:"change"}],sort:[{required:!0,message:"请填写",trigger:"blur"}],describe:[{required:!0,message:"请填写",trigger:"blur"}],keywords:[{required:!0,message:"请填写",trigger:"blur"}],thumb:[{required:!0,message:"请上传",trigger:"change"}],logo:[{required:!0,message:"请上传",trigger:"change"}]},secondArycatoptions:[],imgWidth:"100px",imgHeight:"100px"}},created:function(){this.secondArycat()},watch:{visible:function(e){this.$emit("update:show",e)},show:function(e){this.visible=e},id:function(e){e&&this.getData(),e||(this.ruleForm={name:"",sort:"",display:0,is_maker:0,thumb:[{url:""}],imgs:[{url:""}],logo:[{url:""}],initial:"",description:"",cat_ids:"",cat_arr:[]})}},methods:{getData:function(){var e=this;return u()(s.a.mark(function t(){var r,a,i,n,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.product.brandDetail({id:e.id});case 3:for(r=t.sent,a=r.data,i=o()({},a),e.ruleForm=i,e.ruleForm.thumb=[{name:a.id,url:a.thumb}],e.ruleForm.logo=[{name:a.id,url:a.logo}],n=[],l=0;l<i.imgs.length;l++)n.push({name:i.imgs[l],url:i.imgs[l]});e.ruleForm.imgs=n,t.next=16;break;case 14:t.prev=14,t.t0=t.catch(0);case 16:case"end":return t.stop()}},t,e,[[0,14]])}))()},secondArycat:function(){var e=this;return u()(s.a.mark(function t(){var r,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.product.secondArycat();case 3:r=t.sent,a=r.data,e.secondArycatoptions=a,t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}},t,e,[[0,8]])}))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.save()})},save:function(){var e=this;return u()(s.a.mark(function t(){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=i()({},e.ruleForm);try{r.logo=r.logo[0].url,r.thumb=r.thumb[0].url}catch(e){}if(r.cat_ids=r.cat_arr,!e.id){t.next=8;break}return t.next=6,e.$api.product.brandEdit(r);case 6:t.next=10;break;case 8:return t.next=10,e.$api.product.brandAdd(r);case 10:e.$emit("fresh"),e.visible=!1;case 12:case"end":return t.stop()}},t,e)}))()},resetForm:function(e){this.$refs[e].resetFields()},getsuccessUpload:function(e){this.ruleForm.logo=[{name:e,url:e}]},getsuccessUploadImg:function(e){this.ruleForm.imgs={name:e,url:e}},getsuccessUploadthumb:function(e){this.ruleForm.thumb=[{name:e,url:e}]}}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("RightSidePopup",{attrs:{mask:"",visible:e.visible,width:"50%"},on:{"update:visible":function(t){e.visible=t}}},[r("div",{staticClass:"title",staticStyle:{"font-size":"20px","font-weight":"bold","margin-bottom":"40px"}},[e._v(e._s(this.id?"编辑品牌":"添加品牌"))]),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"160px"}},[r("el-form-item",{attrs:{label:"品牌名称：",prop:"name"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"品牌首字母：",prop:"initial"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.initial,callback:function(t){e.$set(e.ruleForm,"initial",t)},expression:"ruleForm.initial"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"包含的分类："}},[r("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.ruleForm.cat_arr,callback:function(t){e.$set(e.ruleForm,"cat_arr",t)},expression:"ruleForm.cat_arr"}},e._l(e.secondArycatoptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"品牌故事："}},[r("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:6},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否显示：",prop:"display_index"}},[r("el-radio-group",{model:{value:e.ruleForm.display,callback:function(t){e.$set(e.ruleForm,"display",t)},expression:"ruleForm.display"}},[r("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:0}},[e._v("否")])],1),e._v(" "),r("div",{staticClass:"tips"},[e._v("当品牌下还没有商品的时候，分类页的品牌区将不会显示该品牌")])],1),e._v(" "),r("el-form-item",{attrs:{label:"品牌制造商：",prop:"is_maker"}},[r("el-radio-group",{model:{value:e.ruleForm.is_maker,callback:function(t){e.$set(e.ruleForm,"is_maker",t)},expression:"ruleForm.is_maker"}},[r("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"品牌LOGO：",prop:"logo"}},[r("FileUpload",{attrs:{width:e.imgWidth,height:e.imgHeight,isOnly:!0,fileList:e.ruleForm.logo},on:{successUploadCBK:e.getsuccessUpload}})],1),e._v(" "),r("el-form-item",{staticClass:"thumb-class",attrs:{label:"缩略图：",prop:"thumb"}},[r("FileUpload",{attrs:{width:e.imgWidth,height:e.imgHeight,isOnly:!0,fileList:e.ruleForm.thumb},on:{successUploadCBK:e.getsuccessUploadthumb}})],1),e._v(" "),r("el-form-item",{attrs:{label:"图集："}},[r("FileUpload",{attrs:{width:e.imgWidth,height:e.imgHeight,isOnly:!0,fileList:e.ruleForm.imgs},on:{successUploadCBK:e.getsuccessUploadImg}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"100%","text-align":"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var m=r("C7Lr")(d,p,!1,function(e){r("3hZv")},"data-v-2ce77f97",null);t.default=m.exports},QP4P:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("lC5x"),i=r.n(a),n=r("J0Oq"),s=r.n(n),l=r("4YfN"),o=r.n(l),c=r("48sp"),u={name:"BrandManage",components:{NewBrand:r("A9kh").default},data:function(){return{showAdd:!1,id:void 0,exportOptions:[],opreate:"",show:!0,loading:!1,options:[{value:"del",label:"删除"}],searchOPtions:[{type:"input",key:"id",placeholder:"品牌id"},{type:"input",key:"keywords",placeholder:"品牌名称"},{type:"select",key:"display",placeholder:"状态",options:[{label:"启用",value:1},{label:"禁用",value:0}]}],query:{},current:1,pageSize:10,count:0,tableData:[],columnSelect:[]}},computed:o()({},Object(c.e)("user",["button_permissions"])),activated:function(){this.getData()},methods:{changeStatus:function(e){var t=this,r=e.display,a=e.id;return s()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.product.brandSetStatus({display:r,id:a});case 3:t.getData(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.tableData.map(function(e){e.id===a&&t.$set(e,"display",1==r?0:1)});case 9:case"end":return e.stop()}},e,t,[[0,6]])}))()},handelSearch:function(e,t){var r=this;({search:function(){r.query=o()({},t),r.current=1,r.getData()},reset:function(){r.query={},r.pageSize=10,r.current=1,r.getData()}})[e]()},getData:function(){var e=this;return s()(i.a.mark(function t(){var r,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.id=void 0,t.prev=1,e.loading=!0,t.next=5,e.$api.product.brandList(o()({},e.query,{pageSize:e.pageSize,page:e.current}));case 5:r=t.sent,a=r.data,e.tableData=a.items,e.count=a.count,e.exportOptions=a.fields||[],e.loading=!1,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),e.loading=!1;case 16:case"end":return t.stop()}},t,e,[[1,13]])}))()},handlePageChange:function(e){this.current=e,this.getData()},handleSizeChange:function(e){this.pageSize=e,this.getData()},handleSelectionChange:function(e){var t=[];e.length<1?this.columnSelect=[]:(e.map(function(e){t.push(e.id)}),this.columnSelect=t)},jumpTo:function(e,t,r){this.id=r,this.showAdd=!0},handleDel:function(e){var t=this;this.$confirm("确认删除选中品牌？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.del(e)}).catch(function(){})},del:function(e){var t=this;if("many"==e){if(this.columnSelect.length<1)return void this.$message({message:"请至少选择一条申请",type:"error"});this.$api.product.brandDelall({ids:this.columnSelect.join(",")}).then(function(){t.getData()})}else this.$api.product.brandDel({id:e}).then(function(){t.getData()})}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ad-list"},[r("Search",{attrs:{searchOPtions:e.searchOPtions},on:{searchCallback:e.handelSearch}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.product.brand.add],expression:"[$api.product.brand.add]"}],attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){return t.stopPropagation(),e.jumpTo("NewBrand","new",null)}}},[e._v("添 加")]),e._v(" "),r("Export",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.product.brand.export],expression:"[$api.product.brand.export]"}],attrs:{exportOptions:e.exportOptions,query:e.query,url:e.$api.product.brand.export}})],1),e._v(" "),r("div",{staticClass:"common-table-wrapper"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","highlight-current-row":!0,border:"",data:e.tableData,"tooltip-effect":"dark","header-cell-style":{background:"#fafafa",border:"none",borderBottom:"1px solid #e8e8e8"}},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"id",label:"编号"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"name",label:"品牌名称"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"initial",label:"品牌首字母"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"sort",label:"排序"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"是否是品牌制造商"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.is_maker?"是":"否")+"\n                ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"是否显示"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{disabled:!e.button_permissions.includes(e.$api.product.brand.edit),"active-value":1,"inactive-value":0},on:{change:function(r){return e.changeStatus(t.row)}},model:{value:t.row.display,callback:function(r){e.$set(t.row,"display",r)},expression:"scope.row.display"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.product.brand.edit],expression:"[$api.product.brand.edit]"}],staticClass:"look",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(r){return r.stopPropagation(),e.jumpTo("EditBrand","edit",t.row.id)}}},[e._v("编辑")]),e._v(" "),r("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.product.brand.del],expression:"[$api.product.brand.del]"}],staticClass:"look",attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(r){return e.handleDel(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),r("Pagination",{attrs:{current:e.current,pageSize:e.pageSize,count:e.count},on:{opreateCBK:function(t){return e.handleDel("many")},pageChangeCBK:e.handlePageChange,sizeChangeCBK:e.handleSizeChange}}),e._v(" "),r("NewBrand",{attrs:{show:e.showAdd,id:e.id},on:{fresh:e.getData,"update:show":function(t){e.showAdd=t}}})],1)},staticRenderFns:[]};var p=r("C7Lr")(u,d,!1,function(e){r("63ac")},"data-v-37a0d51c",null);t.default=p.exports}});