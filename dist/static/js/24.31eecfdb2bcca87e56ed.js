webpackJsonp([24,6],{OGf3:function(e,t){},akBI:function(e,t){},nRpk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("lC5x"),n=a.n(r),i=a("J0Oq"),l=a.n(i),o={name:"NewSupplier",props:{show:[Boolean],id:{}},data:function(){return{visible:!1,ruleForm:{name:"",en_name:"",brief:"",status:10,bank_name:"",open_name:"",alipay:"",weixin:"",sort:10},areaList:[],rules:{name:[{required:!0,message:"请输入",trigger:"blur"}],sort:[{required:!0,message:"请填写",trigger:"blur"}]}}},watch:{visible:function(e){this.$emit("update:show",e)},show:function(e){this.visible=e},id:function(e){this.resetForm("ruleForm"),e&&this.getData()}},methods:{getData:function(){var e=this;return l()(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.product.supplierDetail({id:e.id});case 3:a=t.sent,r=a.data,e.ruleForm=r,t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}},t,e,[[0,8]])}))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.save()})},save:function(){var e=this;return l()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=6;break}return e.ruleForm.id=e.id,t.next=4,e.$api.product.supplierEdit(e.ruleForm);case 4:t.next=8;break;case 6:return t.next=8,e.$api.product.supplierAdd(e.ruleForm);case 8:e.$emit("fresh"),e.visible=!1;case 10:case"end":return t.stop()}},t,e)}))()},resetForm:function(e){this.$refs[e].resetFields()}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("RightSidePopup",{attrs:{mask:"",visible:e.visible,width:"55%"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"title",staticStyle:{"font-size":"20px","font-weight":"bold","margin-bottom":"40px"}},[e._v(e._s(this.id?"编辑供应商":"添加供应商"))]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{inline:!0,model:e.ruleForm,rules:e.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"供应商名称：",prop:"name"}},[a("el-input",{staticStyle:{width:"180px"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商英文名称：",prop:"en_name"}},[a("el-input",{staticStyle:{width:"180px"},model:{value:e.ruleForm.en_name,callback:function(t){e.$set(e.ruleForm,"en_name",t)},expression:"ruleForm.en_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人：",prop:"contact"}},[a("el-input",{staticStyle:{width:"180px"},model:{value:e.ruleForm.contact,callback:function(t){e.$set(e.ruleForm,"contact",t)},expression:"ruleForm.contact"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话：",prop:"phone"}},[a("el-input",{staticStyle:{width:"180px"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行卡号：",prop:"bankno"}},[a("el-input",{staticStyle:{width:"180px"},model:{value:e.ruleForm.bankno,callback:function(t){e.$set(e.ruleForm,"bankno",t)},expression:"ruleForm.bankno"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行账户：",prop:"bank_name"}},[a("el-input",{staticStyle:{width:"180px"},model:{value:e.ruleForm.bank_name,callback:function(t){e.$set(e.ruleForm,"bank_name",t)},expression:"ruleForm.bank_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行开户行：",prop:"bank_name"}},[a("el-input",{staticStyle:{width:"180px"},model:{value:e.ruleForm.open_name,callback:function(t){e.$set(e.ruleForm,"open_name",t)},expression:"ruleForm.open_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付宝账号：",prop:"alipay"}},[a("el-input",{staticStyle:{width:"180px"},model:{value:e.ruleForm.alipay,callback:function(t){e.$set(e.ruleForm,"alipay",t)},expression:"ruleForm.alipay"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信号：",prop:"weixin"}},[a("el-input",{staticStyle:{width:"180px"},model:{value:e.ruleForm.weixin,callback:function(t){e.$set(e.ruleForm,"weixin",t)},expression:"ruleForm.weixin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址：",prop:"address"}},[a("el-input",{staticStyle:{width:"180px"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[a("el-input",{staticStyle:{width:"180px"},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"status"}},[a("el-radio-group",{staticStyle:{width:"180px",display:"flex",height:"32px","align-items":"center"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},[a("el-radio",{attrs:{label:10}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"简介：",prop:"brief"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{type:"textarea",rows:4},model:{value:e.ruleForm.brief,callback:function(t){e.$set(e.ruleForm,"brief",t)},expression:"ruleForm.brief"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"100%","text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(o,s,!1,function(e){a("OGf3")},"data-v-6640bb73",null);t.default=u.exports},uE83:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("lC5x"),n=a.n(r),i=a("J0Oq"),l=a.n(i),o=a("4YfN"),s=a.n(o),u=a("48sp"),p={name:"SupplierManage",components:{NewSupplier:a("nRpk").default},data:function(){return{showAdd:!1,id:void 0,exportOptions:[],opreate:"",loading:!1,show:!0,pageOptions:[{value:"del",label:"批量删除",type:"danger",permission:[this.$api.product.supplier.del]}],searchOPtions:[{type:"input",key:"keywords",placeholder:"供应商ID / 名称"},{type:"select",key:"status",label:"",placeholder:"状态",options:[{label:"启用",value:10},{label:"禁用",value:0}]}],query:{},current:1,pageSize:10,count:0,tableData:[],columnSelect:[]}},computed:s()({},Object(u.e)("user",["button_permissions"])),activated:function(){this.getData()},methods:{changeStatus:function(e){var t=this,a=e.status,r=e.id;return l()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.product.supplierSetStatus({status:a,id:r});case 3:t.getData(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.tableData.map(function(e){e.id===r&&t.$set(e,"status",10==a?0:10)});case 9:case"end":return e.stop()}},e,t,[[0,6]])}))()},handelSearch:function(e,t){var a=this;({search:function(){a.query=s()({},t),a.current=1,a.getData()},reset:function(){a.query={},a.pageSize=10,a.current=1,a.getData()}})[e]()},getData:function(){var e=this;return l()(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$api.product.supplierList(s()({},e.query,{pageSize:e.pageSize,page:e.current}));case 4:a=t.sent,r=a.data,e.tableData=r.items,e.count=r.count,e.exportOptions=r.fields||[],e.loading=!1,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.loading=!1;case 15:case"end":return t.stop()}},t,e,[[0,12]])}))()},handlePageChange:function(e){this.current=e,this.getData()},handleSizeChange:function(e){this.pageSize=e,this.getData()},handleSelectionChange:function(e){var t=[];e.length<1?this.columnSelect=[]:(e.map(function(e){t.push(e.id)}),this.columnSelect=t)},jumpTo:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.id=a,this.showAdd=!0},handleDel:function(e){var t=this;this.$confirm("确认删除选中供应商？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.del(e)})},del:function(e){var t=this;if("many"==e){if(this.columnSelect.length<1)return void this.$message({message:"请至少选择一条申请",type:"error"});this.$api.product.supplierDelall({ids:this.columnSelect.join(",")}).then(function(){t.getData()})}else this.$api.product.supplierDel({id:e}).then(function(){t.getData()})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ad-list"},[a("Search",{attrs:{searchOPtions:e.searchOPtions},on:{searchCallback:e.handelSearch}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.product.supplier.add],expression:"[$api.product.supplier.add]"}],attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){return t.stopPropagation(),e.jumpTo("NewSupplier","add")}}},[e._v("添 加")]),e._v(" "),a("Export",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.product.supplier.export],expression:"[$api.product.supplier.export]"}],attrs:{exportOptions:e.exportOptions,query:e.query,url:e.$api.product.supplier.export}})],1),e._v(" "),a("div",{staticClass:"common-table-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","highlight-current-row":!0,border:"",data:e.tableData,"tooltip-effect":"dark","header-cell-style":{background:"#fafafa",border:"none",borderBottom:"1px solid #e8e8e8"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"id",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"供应商名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"en_name",label:"英文名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("validVal")(t.row.en_name))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:!e.button_permissions.includes(e.$api.product.supplier.edit),"active-value":10,"inactive-value":0},on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.product.supplier.edit],expression:"[$api.product.supplier.edit]"}],staticClass:"look",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return a.stopPropagation(),e.jumpTo("EditSupplier","edit",t.row.id)}}},[e._v("编辑")]),e._v(" "),a("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.product.supplier.del],expression:"[$api.product.supplier.del]"}],staticClass:"look",attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return e.handleDel(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("Pagination",{attrs:{options:e.pageOptions,current:e.current,count:e.count,pageSize:e.pageSize},on:{opreateCBK:function(t){return e.handleDel("many")},pageChangeCBK:e.handlePageChange,sizeChangeCBK:e.handleSizeChange}}),e._v(" "),a("NewSupplier",{attrs:{show:e.showAdd,id:e.id},on:{fresh:e.getData,"update:show":function(t){e.showAdd=t}}})],1)},staticRenderFns:[]};var d=a("C7Lr")(p,c,!1,function(e){a("akBI")},"data-v-6f7b77fa",null);t.default=d.exports}});