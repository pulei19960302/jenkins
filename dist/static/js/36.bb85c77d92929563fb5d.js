webpackJsonp([36],{ZH03:function(e,t){},yGe4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("aA9S"),n=i.n(a),r=i("lC5x"),s=i.n(r),o=i("J0Oq"),l=i.n(o),c=i("4YfN"),d=i.n(c),u=i("FFUX"),p={name:"roleManagement",data:function(){return{pid:"",dialogVisible:!1,isEdit:!1,loading:!1,page:1,pageSize:10,count:0,tableData:[],oldRowData:{},form:{name:"",description:""},current:1,rules:{name:[{required:!0,message:"请输入",trigger:"change"}],description:[{required:!1,message:"请输入",trigger:"change"}]},name:null,query:{},searchOPtions:[{type:"input",key:"name",placeholder:"角色名称"}]}},created:function(){this.getData()},methods:{permissionsSettings:function(e){var t=e.name;this.$router.push({name:"permissions",params:{id:t}})},handelSearch:function(e,t){var i=this;({search:function(){i.query=d()({},t),i.current=1,i.getData()},reset:function(){i.query={},i.pageSize=10,i.current=1,i.getData()}})[e]()},handlePageChange:function(e){this.page=e,this.getData()},handleSizeChange:function(e){this.pageSize=e,this.getData()},getData:function(){var e=this;return l()(s.a.mark(function t(){var i,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$api.jurisdiction.getRoleList(d()({},e.query,{page:e.page,pageSize:e.pageSize}));case 4:i=t.sent,a=i.data,e.loading=!1,e.tableData=a.items,e.count=a.count,t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(0),e.loading=!1,new Error(t.t0);case 15:case"end":return t.stop()}},t,e,[[0,11]])}))()},resetForm:function(){this.$refs.form.resetFields()},AddAdminGroup:function(e){var t,i=this;this.$refs.form.validate((t=l()(s.a.mark(function t(a){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=23;break}if(t.prev=1,r=n()({},i.form),!e){t.next=12;break}if(!u.e.isEqual(i.oldRowData,i.form)){t.next=7;break}return i.$message({message:"暂无数据变更",type:"warning"}),t.abrupt("return");case 7:return r.name=i.name,t.next=10,i.$api.jurisdiction.EditRole(r);case 10:t.next=14;break;case 12:return t.next=14,i.$api.jurisdiction.AddRole(r);case 14:i.resetForm(),i.dialogVisible=!1,i.isEdit=!1,i.getData(),t.next=23;break;case 20:throw t.prev=20,t.t0=t.catch(1),new Error(t.t0);case 23:case"end":return t.stop()}},t,i,[[1,20]])})),function(e){return t.apply(this,arguments)}))},DelRole:function(e){var t=this,i=e.name;return l()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$confirm("确认删除该角色？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.jurisdiction.DelRole({name:i});case 3:t.getData(),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error(e.t0);case 9:case"end":return e.stop()}},e,t,[[0,6]])})));case 1:case"end":return e.stop()}},e,t)}))()},handleEdit:function(e){var t=e.name,i=e.description;this.name=t,this.oldRowData={name:t,description:i},this.form={name:t,description:i},this.dialogVisible=!0,this.isEdit=!0}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"min-height":"calc(100vh - 135px)",background:"#fff"}},[i("Search",{attrs:{searchOPtions:e.searchOPtions},on:{searchCallback:e.handelSearch}},[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.jurisdiction.role.add],expression:"[$api.jurisdiction.role.add]"}],attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!0,e.form={}}}},[e._v("\n            添 加\n        ")])],1),e._v(" "),[i("div",{staticClass:"contnet-product"},[i("div",{staticStyle:{padding:"0 16px 16px 16px",background:"#fff","border-radius":"0 0 4px 4px",width:"100%"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","highlight-current-row":!0,border:"",data:e.tableData,"tooltip-effect":"dark","header-cell-class-name":"n-table-header-cell-class","cell-class-name":"n-table-cell-class"}},[i("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),i("el-table-column",{attrs:{label:"角色描述",prop:"description"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("validVal")(t.row.description)))]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"300px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.jurisdiction.role.assign],expression:"[$api.jurisdiction.role.assign]"}],staticClass:"look-word",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(i){return e.permissionsSettings(t.row)}}},[e._v("\n                            权限设置\n                        ")]),e._v(" "),i("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.jurisdiction.role.edit],expression:"[$api.jurisdiction.role.edit]"}],staticClass:"look-word",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(i){return e.handleEdit(t.row)}}},[e._v("\n                            编辑\n                        ")]),e._v(" "),i("span",{directives:[{name:"permission",rawName:"v-permission",value:[e.$api.jurisdiction.role.del],expression:"[$api.jurisdiction.role.del]"}],staticClass:"look-word",attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(i){return e.DelRole(t.row)}}},[e._v("\n                            删除\n                        ")])]}}])})],1)],1)]),e._v(" "),i("Pagination",{attrs:{current:e.current,pageSize:e.pageSize,count:e.count},on:{pageChangeCBK:e.handlePageChange,sizeChangeCBK:e.handleSizeChange}})],e._v(" "),i("el-dialog",{attrs:{title:"添加角色",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px","label-position":"right"}},[i("el-form-item",{attrs:{label:"角色名称：",prop:"name"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{disabled:e.isEdit},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色描述：",prop:"description"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{type:"textarea",rows:4,autocomplete:"off"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1,e.isEdit=!1,e.resetForm()}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.AddAdminGroup(e.isEdit)}}},[e._v("确定")])],1)],1)],2)},staticRenderFns:[]};var f=i("C7Lr")(p,m,!1,function(e){i("ZH03")},"data-v-e2e78568",null);t.default=f.exports}});