webpackJsonp([71],{"6tYq":function(e,r){},MltV:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("lC5x"),s=t.n(a),o=t("aA9S"),n=t.n(o),l=t("J0Oq"),i=t.n(l),u=t("4YfN"),m=t.n(u),p=t("48sp"),c=t("FFUX"),d={name:"AccountSet",data:function(){var e=this;return{avatar:[],ruleForm:{name:"",email:"",password:"",newpassword:"",newpassword2:""},rules:{password:[{required:!1,trigger:"change",validator:function(r,t,a){!e.ruleForm.newpassword||e.ruleForm.password?a():a(new Error("请输入旧密码"))}}],newpassword:[{required:!1,trigger:"change",validator:function(r,t,a){!e.ruleForm.password||Object(c.d)("PASSWORD",t)?a():a(new Error("密码必须为6-20位"))}}],newpassword2:[{required:!1,trigger:"change",validator:function(r,t,a){e.ruleForm.newpassword===e.ruleForm.newpassword2?a():a(new Error("两次输入的密码不一致"))}}]}}},computed:m()({},Object(p.e)("user",["userInfo"])),mounted:function(){this.avatar=[{name:"avatar",url:this.userInfo.avatar}],this.ruleForm.name=this.userInfo.name,this.ruleForm.email=this.userInfo.email},methods:m()({},Object(p.b)("user",["GetUserInfo"]),{successUpload:function(e){this.avatar=[{name:"avatar",url:e[0]}]},submitForm:function(e){var r,t=this;this.$refs[e].validate((r=i()(s.a.mark(function e(r){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=12;break}return(a=n()({},t.ruleForm)).avatar=t.avatar[0].url,e.prev=3,e.next=6,t.$api.login.modifyInfo(a);case 6:t.GetUserInfo(),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(3),new Error(e.t0);case 12:case"end":return e.stop()}},e,t,[[3,9]])})),function(e){return r.apply(this,arguments)}))},resetForm:function(e){this.$refs[e].resetFields()}})},w={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"account-set"},[t("div",[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"上传头像："}},[t("FileUpload",{attrs:{isOnly:!0,fileList:e.avatar,width:"100px",height:"100px"},on:{successUploadCBK:e.successUpload}})],1),e._v(" "),t("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Email：",prop:"email"}},[t("el-input",{model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"旧密码：",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}}),e._v(" "),t("p",{staticClass:"tips"},[e._v("不修改密码可不填写")])],1),e._v(" "),t("el-form-item",{attrs:{label:"新密码：",prop:"newpassword"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.newpassword,callback:function(r){e.$set(e.ruleForm,"newpassword",r)},expression:"ruleForm.newpassword"}}),e._v(" "),t("p",{staticClass:"tips"},[e._v("不修改密码可不填写")])],1),e._v(" "),t("el-form-item",{attrs:{label:"确认新密码：",prop:"newpassword2"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.newpassword2,callback:function(r){e.$set(e.ruleForm,"newpassword2",r)},expression:"ruleForm.newpassword2"}}),e._v(" "),t("p",{staticClass:"tips"},[e._v("不修改密码可不填写")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("提 交")]),e._v(" "),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重 置")])],1)],1)],1)])},staticRenderFns:[]};var f=t("C7Lr")(d,w,!1,function(e){t("6tYq")},"data-v-199703f8",null);r.default=f.exports}});