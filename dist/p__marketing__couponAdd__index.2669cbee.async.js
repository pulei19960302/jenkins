(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[44],{mAuq:function(e,t,a){e.exports={usingCondition:"usingCondition___3YUrV",overType:"overType___2i7xU",radioBlock:"radioBlock___1wc5_",sendType:"sendType___217HB",radioGroup:"radioGroup___1l3TW",message:"message___3wEWq",messageCard:"messageCard___o9KwE",messageMax:"messageMax___2w56C",maxTooltip:"maxTooltip___gCBer",userType:"userType___3Suy-",userUpdate:"userUpdate___dA0bR",chooseBtn:"chooseBtn___228c7",chooseMore:"chooseMore___3NLIv",productImg:"productImg___310Qm",products:"products___2Pknq",product:"product___M3DCU",overlay:"overlay___39H50",close:"close___2I9k7",spinner:"spinner___GWBvI",spin:"spin___1u4Sn",mb_10:"mb_10___2A4VV",mb_15:"mb_15___38fPP",mb_5:"mb_5___TeMu9",mb_0:"mb_0___3UL1z",mr_10:"mr_10___2F4fP",ml_10:"ml_10___2NPhl",flex_1:"flex_1___3ZK23"}},yOjb:function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),o=(a("14J3"),a("BMrR")),r=(a("+L6B"),a("2/Rp")),c=a("jehZ"),s=a.n(c),i=(a("T2oS"),a("W9HT")),u=(a("miYZ"),a("tsqr")),l=a("Y/ft"),d=a.n(l),p=a("d6i3"),m=a.n(p),_=a("1l/V"),f=a.n(_),v=a("2Taf"),y=a.n(v),g=a("vZ4D"),E=a.n(g),h=a("MhPg"),b=a.n(h),C=a("l4Ni"),N=a.n(C),F=a("ujKo"),T=a.n(F),I=a("p0pE"),A=a.n(I),x=a("q1tI"),k=a.n(x),P=a("WsrF"),w=(a("XlDN"),a("MuoO")),S=a("wd/R"),U=a.n(S),R=a("Kvkj"),M=(a("7Kak"),a("9yH6")),D=(a("5NDa"),a("5rEg")),O=(a("jCWc"),a("kPKH")),L=(a("iQDF"),a("+eQT")),V=a("rogm"),B=a("mAuq"),H=a.n(B),j=a("7Qib");function q(e){return function(){var t,a=T()(e);if(Y()){var n=T()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return N()(this,t)}}function Y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var G,W,K,$=L["a"].RangePicker,Q=function(e){b()(a,e);var t=q(a);function a(){var e;y()(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),e.handleUpdateCouponForm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.props.dispatch;a({type:"couponAdd/updateCouponForm",payload:A()({},t)})},e.handleDisabledDate=function(e){return e<U()().startOf("day")},e.getCouponContents=function(t){var a=e.props,n=a.form.getFieldDecorator,r=a.couponForm,c=void 0===r?{}:r,s=c.waiverAmountCash,i=void 0===s?"":s,u=c.waiverAmountMoneyOff,l=c.maxAmount,d={rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u91d1\u989d"}]},p={};switch(t){case V["b"].CASH:p=k.a.createElement(P["a"].Item,{className:H.a.mb_0},k.a.createElement(o["a"],{type:"flex"},k.a.createElement(O["a"],{className:H.a.mr_10},"\u9762\u989d"),k.a.createElement(O["a"],{className:H.a.flex_1},n("waiver_amount_cash",A()({},d,{initialValue:i}))(k.a.createElement(R["p"],{addonAfter:"\u5143",formatter:function(e){return Object(j["c"])(e,2)},onChange:function(t){e.handleUpdateCouponForm({waiverAmountCash:t})}})))));break;case V["b"].MONEY_OFF:p=k.a.createElement("div",null,k.a.createElement(P["a"].Item,{className:H.a.mb_0},k.a.createElement(o["a"],{type:"flex"},k.a.createElement(O["a"],{className:H.a.mr_10},"\u9762\u989d"),k.a.createElement(O["a"],{className:H.a.flex_1},n("waiver_amount_money_off",A()({},d,{initialValue:u}))(k.a.createElement(R["p"],{addonAfter:"\u5143",formatter:function(e){return Object(j["c"])(e,2)},onChange:function(t){e.handleUpdateCouponForm({waiverAmountMoneyOff:t})}}))))),k.a.createElement(P["a"].Item,{className:H.a.mb_0},k.a.createElement(o["a"],{type:"flex"},k.a.createElement(O["a"],null,"\u6d88\u8d39\u6ee1"),k.a.createElement(O["a"],{className:H.a.messageMax},n("max",A()({},d,{initialValue:l}))(k.a.createElement(R["p"],{addonAfter:"\u5143",formatter:function(e){return Object(j["c"])(e,2)},onChange:function(t){e.handleUpdateCouponForm({maxAmount:t})}}))),k.a.createElement(O["a"],{style:{position:"relative"}},"\u4f7f\u7528",k.a.createElement("span",{className:H.a.maxTooltip},"(\u6ce8\uff1a\u4f7f\u7528\u6761\u4ef6\u9700\u8981\u5927\u4e8e\u6216\u7b49\u4e8e\u4f18\u60e0\u5238\u9762\u989d\uff09")))));break}return p},e.getOverTypeTimeContents=function(t){var a=e.props,n=a.form.getFieldDecorator,r=a.couponForm,c=void 0===r?{}:r,s=c.overTypeTime,i=void 0===s?"":s,u=c.days,l=void 0===u?"":u,d={rules:[{type:"array",required:!0,message:"\u8bf7\u9009\u62e9\u65f6\u95f4"}]};return t===V["e"].TIME?k.a.createElement(P["a"].Item,{className:H.a.mb_5},n("over_type_time",A()({},d,{initialValue:i}))(k.a.createElement($,{showTime:{format:"HH:mm",defaultValue:[U()("00:00","HH:mm"),U()("00:00","HH:mm")]},format:"YYYY-MM-DD HH:mm",onChange:function(t){e.handleUpdateCouponForm({overTypeTime:t})},disabledDate:e.handleDisabledDate,getPopupContainer:function(e){return e.parentNode}}))):t===V["e"].DAYS?k.a.createElement(P["a"].Item,{className:H.a.mb_5},k.a.createElement(o["a"],{type:"flex",justify:"space-between"},k.a.createElement(O["a"],{className:H.a.mr_10},"\u6709\u6548\u5929\u6570"),k.a.createElement(O["a"],{className:H.a.flex_1},n("days",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6709\u6548\u5929\u6570"}],initialValue:l})(k.a.createElement(R["p"],{addonAfter:"\u5929",formatter:function(e){return Object(j["c"])(e)},onChange:function(t){e.handleUpdateCouponForm({days:t})}}))))):void 0},e}return E()(a,[{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,a=e&&e.getFieldValue("type")||V["b"].CASH,o=e&&e.getFieldValue("be_over_type")||V["e"].TIME,r={rules:[{required:!0,message:"\u8bf7\u586b\u5199"}]},c=k.a.createElement("span",null,"\u6807\u9898");return k.a.createElement(n["a"],{title:"\u57fa\u672c\u4fe1\u606f"},k.a.createElement("div",{className:H.a.message},k.a.createElement(P["a"].Item,{label:c},t("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}]})(k.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898\uff0c\u4e0d\u8d85\u8fc720\u5b57\u7b26",maxLength:20,autoComplete:"off"}))),k.a.createElement(P["a"].Item,{label:"\u4f18\u60e0\u5238\u7c7b\u578b"},t("type",{initialValue:a},r)(k.a.createElement(M["a"].Group,{className:H.a.radioGroup},k.a.createElement(M["a"],{value:V["b"].CASH},"\u73b0\u91d1\u5238"),k.a.createElement(M["a"],{value:V["b"].MONEY_OFF,style:{minWidth:102}},"\u6ee1\u51cf\u5238"))),this.getCouponContents(a)),k.a.createElement(P["a"].Item,{label:"\u751f\u6548\u65e5\u671f"},t("be_over_type",{initialValue:o})(k.a.createElement(M["a"].Group,{className:H.a.radioGroup},k.a.createElement(M["a"],{value:V["e"].TIME},"\u56fa\u5b9a\u65f6\u95f4"),k.a.createElement(M["a"],{value:V["e"].DAYS},"\u9886\u53d6\u540e\u65f6\u95f4"))),this.getOverTypeTimeContents(o)),k.a.createElement(P["a"].Item,{label:"\u5e93\u5b58"},t("num",{rules:[{required:!0,pattern:/^[0-9]*[1-9][0-9]*$/,message:"\u8bf7\u586b\u5199\u5e93\u5b58\u6570 ( \u6b63\u6574\u6570 )"}]})(k.a.createElement(R["p"],{addonAfter:"\u5f20",formatter:function(e){return Object(j["c"])(e)}})))))}}]),a}(x["PureComponent"]),Z=Q,z=a("eHn4"),J=a.n(z),X=(a("sRBo"),a("kaz8")),ee=a("jN4g");function te(e){return function(){var t,a=T()(e);if(ae()){var n=T()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return N()(this,t)}}function ae(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var ne,oe,re,ce,se=(G=Object(w["connect"])(function(e){var t=e.couponAdd;return A()({},t)}),G((K=function(e){b()(a,e);var t=te(a);function a(e){var c;return y()(this,a),c=t.call(this,e),c.handleUpdateCouponForm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c.props.dispatch;t({type:"couponAdd/updateCouponForm",payload:A()({},e)})},c.toogleProductModal=function(){c.setState(function(e){return{showProductModal:!e.showProductModal}})},c.getRelatedProductByIds=function(){var e=c.props.couponForm.good_ids,t=void 0===e?"":e;c.getProduct(t)},c.getProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var t=c.props.dispatch,a=e.split(",");t({type:"couponAdd/getProductsByIds",payload:{goods_ids:a}})}},c.handleSelectedProduct=function(e,t){var a=c.props.dispatch;t&&a({type:"couponAdd/updateState",payload:{productList:t}})},c.handleDeleteProduct=function(e){var t=c.props,a=t.dispatch,n=t.productList,o=n&&n.filter(function(t){return t.goods_id!==e});a({type:"couponAdd/updateState",payload:{productList:o}})},c.getUserTypes=function(){var e=c.props,t=e.form,a=e.userContentFields,o=e.couponForm,r=void 0===o?{}:o,s=t.getFieldDecorator,i=a.length&&r.userType?r.userType:V["h"].ALL;return k.a.createElement("div",null,k.a.createElement(n["a"],{className:H.a.userType},s("user_type",{initialValue:i})(k.a.createElement(M["a"].Group,{onChange:function(e){var t=e&&e.target,a=t.value;c.handleUpdateCouponForm({userType:a})}},k.a.createElement(M["a"],{value:V["h"].ALL,className:H.a.radioBlock},"\u6240\u6709\u4eba"),k.a.createElement(M["a"],{value:V["h"].TYPE,className:"".concat(H.a.radioBlock," ").concat(H.a.userContents),disabled:!a.length},"\u6309\u7528\u6237\u7c7b\u578b",i===V["h"].TYPE&&c.getUserContents("user_type_content_initiative"))))))},c.getUserContents=function(e){var t,a,n=c.props,o=n.form.getFieldDecorator,r=n.userContentFields,s=n.couponForm,i=void 0===s?{}:s,u=i.userContentInitiative,l=void 0===u?[]:u,d=i.sendContentUpdate,p=void 0===d?[]:d,m={rules:[{type:"array",required:!0,message:"\u8bf7\u9009\u62e9\u7528\u6237\u7c7b\u578b"}]};if("user_type_content_initiative"===e?(t=l,a=function(e){c.handleUpdateCouponForm({userContentInitiative:e})}):"send_type_content_update"===e&&(t=p,a=function(e){c.handleUpdateCouponForm({sendContentUpdate:e})}),r.length)return k.a.createElement(P["a"].Item,{style:{marginLeft:25,marginBottom:-30}},o(e,A()({},m,{initialValue:t||[]}))(k.a.createElement(X["a"].Group,{onChange:a,className:H.a.userContents},r.map(function(e){return k.a.createElement(X["a"],{key:e.value,value:e.value},e.name)}))))},c.getSendContents=function(e){var t,a,r=c.props,s=r.form.getFieldDecorator,i=r.couponForm,u=void 0===i?{}:i,l=u.sendContentRecharge,d=u.sendContentConsume;return"send_type_content_recharge"===e?(t=l,a=function(e){c.handleUpdateCouponForm({sendContentRecharge:e})}):"send_type_content_consume"===e&&(t=d,a=function(e){c.handleUpdateCouponForm({sendContentConsume:e})}),k.a.createElement(n["a"],{className:H.a.messageCard},k.a.createElement(P["a"].Item,{className:H.a.mb_0},k.a.createElement(o["a"],{type:"flex",justify:"space-between",align:"middle"},k.a.createElement(O["a"],null,"\u6ee1"),k.a.createElement(O["a"],{className:"".concat(H.a.mr_10," ").concat(H.a.ml_10," ").concat(H.a.flex_1)},s(e,{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u91d1\u989d"}],initialValue:t})(k.a.createElement(R["p"],{addonAfter:"\u5143",onChange:a,formatter:function(e){return Object(j["c"])(e,2)}}))),k.a.createElement(O["a"],null,"\u9001"))))},c.getSelectedProduct=function(){var e=c.props.productList;if(e&&e.length){var t=e.map(function(e,t){var a=e.goods_id,n=e.title,o=e.main_img;e.shop_price,e.total_stock,e.checked;return k.a.createElement(O["a"],{key:a||t,span:6},k.a.createElement("div",{className:H.a.product},k.a.createElement("img",{src:o,className:H.a.productImg}),k.a.createElement("span",null,n),k.a.createElement(ee["a"],{className:H.a.close,onClick:function(){c.handleDeleteProduct(a)}})))});return k.a.createElement(o["a"],{className:H.a.products,gutter:24,type:"flex"},t,k.a.createElement(O["a"],{className:H.a.chooseMore},k.a.createElement(r["a"],{className:H.a.chooseBtn,onClick:c.toogleProductModal},"\u9009\u62e9\u5546\u54c1")))}return k.a.createElement(o["a"],{style:{marginTop:"-13px",marginBottom:"10px"}},k.a.createElement(O["a"],{push:2},k.a.createElement(r["a"],{className:H.a.chooseBtn,onClick:c.toogleProductModal},"\u9009\u62e9\u5546\u54c1")))},c.renderSendTypes=function(){var e=c.props,t=e.form,a=e.userContentFields,o=t.getFieldDecorator,r=t&&t.getFieldValue("send_type")||V["f"].INITIATIVE;return r!==V["f"].USER_UPDATE||a.length||(r=V["f"].INITIATIVE),k.a.createElement(P["a"].Item,{label:"\u53d1\u653e\u65b9\u5f0f"},o("send_type",{initialValue:r})(k.a.createElement(M["a"].Group,{className:H.a.sendType},k.a.createElement(M["a"],{value:V["f"].INITIATIVE,className:H.a.radioBlock},"\u4e3b\u52a8\u9886\u53d6",r===V["f"].INITIATIVE&&c.getUserTypes()),k.a.createElement(M["a"],{value:V["f"].NEW_USER,className:H.a.radioBlock,disabled:!0},"\u65b0\u7528\u6237\u6ce8\u518c"),k.a.createElement(M["a"],J()({value:V["f"].USER_UPDATE,className:H.a.radioBlock,disabled:!a.length},"disabled",!0),"\u7528\u6237\u5347\u7ea7\u4e3a",r===V["f"].USER_UPDATE&&k.a.createElement("div",null,k.a.createElement(n["a"],{className:"".concat(H.a.messageCard," ").concat(H.a.userUpdate)},c.getUserContents("send_type_content_update")))),k.a.createElement(M["a"],{value:V["f"].RECHARGE,className:H.a.radioBlock,disabled:!0},"\u5145\u503c\u6ee1\u9001",r===V["f"].RECHARGE&&c.getSendContents("send_type_content_recharge")),k.a.createElement(M["a"],{value:V["f"].CONSUME,className:H.a.radioBlock,disabled:!0},"\u6d88\u8d39\u6ee1\u9001",r===V["f"].CONSUME&&c.getSendContents("send_type_content_consume")))))},c.renderUsingProduct=function(){var e=c.props.form,t=e.getFieldDecorator,a=e.getFieldValue("good_type")||0;return k.a.createElement("div",null,k.a.createElement(P["a"].Item,{label:"\u9002\u7528\u5546\u54c1"},t("good_type",{initialValue:a})(k.a.createElement(M["a"].Group,{className:H.a.radioGroup},k.a.createElement(M["a"],{value:0},"\u5168\u90e8\u5546\u54c1"),k.a.createElement(M["a"],{value:1},"\u6307\u5b9a\u5546\u54c1")))),1===a&&c.getSelectedProduct())},c.state={showProductModal:!1},c}return E()(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.userContentFields;a.length||t({type:"couponAdd/getUserContentFields"}),this.getRelatedProductByIds()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.couponForm.good_ids,a=void 0===t?"":t,n=this.props.couponForm.good_ids,o=void 0===n?"":n;a!==o&&this.getProduct(a)}},{key:"render",value:function(){var e=this.state.showProductModal,t=this.props,a=t.form,o=t.productList,r=void 0===o?[]:o,c=a.getFieldDecorator,s=r&&r.map(function(e){return e.goods_id});return k.a.createElement(n["a"],{title:"\u53d1\u653e\u4f7f\u7528",style:{marginTop:"20px"}},k.a.createElement("div",{style:{width:"80%"}},k.a.createElement(P["a"].Item,{label:"\u6bcf\u4eba\u9650\u9886"},c("user_num",{rules:[{required:!0,pattern:/^[0-9]*[1-9][0-9]*$/,message:"\u8bf7\u586b\u5199\u9886\u53d6\u6570 ( \u6b63\u6574\u6570 )"}]})(k.a.createElement(R["p"],{addonAfter:"\u5f20",formatter:function(e){return Object(j["c"])(e)}}))),this.renderSendTypes(),this.renderUsingProduct()),k.a.createElement(R["e"],{visible:e,toogle:this.toogleProductModal,submit:this.handleSelectedProduct,choosed:s}))}}]),a}(x["PureComponent"]),W=K))||W),ie=se;function ue(e){return function(){var t,a=T()(e);if(le()){var n=T()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return N()(this,t)}}function le(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var de={labelCol:{span:2},wrapperCol:{span:6}},pe=(ne=P["a"].create(),oe=Object(w["connect"])(function(e){var t=e.couponAdd;return A()({},t)}),ne(re=oe((ce=function(e){b()(a,e);var t=ue(a);function a(e){var n;y()(this,a),n=t.call(this,e),n.toogleSaveLoading=function(e){n.setState({saveLoading:e})},n.tooglePubLoading=function(e){n.setState({pubLoading:e})},n.toogleLoading=function(){n.setState(function(e){return{loading:!e.loading}})},n.getCouponByIds=f()(m.a.mark(function e(){var t,a,o,r;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.props,a=t.dispatch,o=t.form,r=n.props.history.location.query.id,r){e.next=4;break}return e.abrupt("return",null);case 4:return n.toogleLoading(),e.next=7,$api.coupon.getCouponByIds({coupon_id_str:r}).then(function(e){var t=e||{},n=t.data,r=void 0===n?[]:n,c=r&&r[0],s=c.name,i=void 0===s?"":s,u=c.type,l=void 0===u?"":u,d=c.waiver_amount,p=void 0===d?"":d,m=c.max,_=void 0===m?"":m,f=c.be_over_type,v=void 0===f?"":f,y=c.num,g=void 0===y?"":y,E=c.start_at,h=void 0===E?"":E,b=c.end_at,C=void 0===b?"":b,N=c.days,F=void 0===N?"":N,T=c.user_num,I=void 0===T?"":T,A=c.send_type,x=void 0===A?"":A,k=c.user_type,P=void 0===k?"":k,w=c.user_type_content,S=void 0===w?"":w,R=c.send_type_content,M=void 0===R?"":R,D=c.good_type,O=void 0===D?"":D,L=c.good_ids,B=void 0===L?"":L,H=l===V["b"].CASH&&p||"",j=l===V["b"].MONEY_OFF&&p||"",q=l===V["b"].MONEY_OFF&&_||"",Y=v===V["e"].TIME&&h&&C&&[U()(h,V["g"]),U()(C,V["g"])]||"",G=x===V["f"].INITIATIVE&&P===V["h"].TYPE&&S&&S.split(",").map(function(e){return+e}),W=x===V["f"].USER_UPDATE&&M&&M.split(",").map(function(e){return+e}),K=x===V["f"].RECHARGE&&M||"",$=x===V["f"].CONSUME&&M||"";o.setFieldsValue({name:i,type:l,be_over_type:v,num:g,user_num:I,send_type:x,good_type:O}),a({type:"couponAdd/updateCouponForm",payload:{waiverAmountCash:H,waiverAmountMoneyOff:j,maxAmount:q,overTypeTime:Y,days:v===V["e"].DAYS&&F||0,userType:P,userContentInitiative:G,sendContentUpdate:W,sendContentRecharge:K,sendContentConsume:$,good_ids:B}})});case 7:n.toogleLoading();case 8:case"end":return e.stop()}},e)})),n.save=function(e){var t=n.props.productList,a=void 0===t?[]:t,o=a&&a.map(function(e){return e.goods_id});n.props.form.validateFields(function(){var t=f()(m.a.mark(function t(a,r){var c,s,i,l,p,_,f,v,y,g,E,h,b,C,N,F,T,I,x,k,P,w,S,U,R,M,D,O;return m.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:c=n.props.history.location.query,s=c.id,i=c.copy,l=void 0===i?"":i,p=o&&o.join(","),_=r.over_type_time,f=r.user_type,v=r.user_type_content_initiative,y=r.send_type_content_update,g=r.type,E=r.waiver_amount_cash,h=r.waiver_amount_money_off,b=r.good_num,C=r.send_type,N=r.send_type_content_recharge,F=r.send_type_content_consume,T=r.max,I=r.user_num,x=r.good_type,k=r.discount,P=d()(r,["over_type_time","user_type","user_type_content_initiative","send_type_content_update","type","waiver_amount_cash","waiver_amount_money_off","good_num","send_type","send_type_content_recharge","send_type_content_consume","max","user_num","good_type","discount"]),w=_&&_[0].format(V["d"]),S=_&&_[1].format(V["d"]),t.t0=g,t.next=t.t0===V["b"].CASH?10:t.t0===V["b"].MONEY_OFF?12:14;break;case 10:return U=E,t.abrupt("break",15);case 12:return U=h,t.abrupt("break",15);case 14:return t.abrupt("break",15);case 15:t.t1=C,t.next=t.t1===V["f"].INITIATIVE?18:t.t1===V["f"].USER_UPDATE?20:t.t1===V["f"].RECHARGE?22:t.t1===V["f"].CONSUME?24:26;break;case 18:return R=v&&v.join(","),t.abrupt("break",27);case 20:return M=y&&y.join(","),t.abrupt("break",27);case 22:return M=N&&N.toString(),t.abrupt("break",27);case 24:return M=F&&F.toString(),t.abrupt("break",27);case 26:return t.abrupt("break",27);case 27:if(D=A()({},P,{type:g,start_at:w||"",end_at:S||"",user_type:f||0,send_type:C||0,user_type_content:R||"",send_type_content:M||"",max:T||0,user_num:I||0,good_type:x||0,waiver_amount:U||0,good_num:b||0,discount:k||0,status:e?V["c"].PUBLISH:V["c"].SAVE,good_id_str:p||""}),O=e?n.tooglePubLoading:n.toogleSaveLoading,1!==x||p){t.next=32;break}return u["a"].warning("\u8bf7\u9009\u62e9\u5546\u54c1"),t.abrupt("return");case 32:if(!(g===V["b"].MONEY_OFF&&T<U)){t.next=35;break}return u["a"].warning("\u4f7f\u7528\u6761\u4ef6\u9700\u8981\u5927\u4e8e\u6216\u7b49\u4e8e\u4f18\u60e0\u5238\u9762\u989d"),t.abrupt("return");case 35:if(void 0===s||l){t.next=40;break}return t.next=38,$api.coupon.editCoupon(A()({coupon_id:parseInt(s)},D),{success:!0,loadingFn:O});case 38:t.next=42;break;case 40:return t.next=42,$api.coupon.addCoupon(D,{success:!0,loadingFn:O});case 42:n.props.history.push({pathname:"/marketing/couponList"}),n.props.dispatch({type:"couponAdd/updateState",payload:{couponForm:{},productList:[]}});case 44:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}())};var o=n.props.history.location.query.view;return n.state={saveLoading:!1,pubLoading:!1,loading:!1,view:o},n}return E()(a,[{key:"componentDidMount",value:function(){this.getCouponByIds()}},{key:"render",value:function(){var e=this,t=this.state,a=t.saveLoading,c=t.pubLoading,u=t.view,l=t.loading,d=this.props,p=d.form,m=d.dispatch,_=this.props.history.location.query,f=_.create,v=(_.id,this.props.couponForm),y=void 0===v?{}:v;return y=f?{}:y,u?k.a.createElement(R["x"],null,l&&k.a.createElement("div",{className:H.a.spinner},k.a.createElement(i["a"],{className:H.a.spin})),k.a.createElement(P["a"],s()({},de,{labelAlign:"left",colon:!1,style:{position:"relative"}}),k.a.createElement(Z,{form:p,couponForm:y}),k.a.createElement(ie,{form:p}),k.a.createElement("div",{className:H.a.overlay}))):k.a.createElement(R["x"],null,l&&k.a.createElement("div",{className:H.a.spinner},k.a.createElement(i["a"],{className:H.a.spin})),k.a.createElement(P["a"],s()({},de,{labelAlign:"left",colon:!1,autoComplete:"off"}),k.a.createElement(Z,{form:p,couponForm:y,dispatch:m}),k.a.createElement(ie,{form:p}),k.a.createElement(n["a"],{style:{marginTop:"20px"}},k.a.createElement(o["a"],{type:"flex",justify:"center"},k.a.createElement(r["a"],{style:{marginRight:"20px"},onClick:function(){e.save()},loading:a},"\u4fdd\u5b58"),k.a.createElement(r["a"],{type:"primary",style:{marginLeft:"20px"},onClick:function(){e.save("publish")},loading:c},"\u53d1\u5e03")))))}}]),a}(x["PureComponent"]),re=ce))||re)||re);t["default"]=pe}}]);