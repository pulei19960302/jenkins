(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[97],{"X4s+":function(e,t,n){"use strict";n.r(t);var r,a,i,o=n("2Taf"),u=n.n(o),s=n("vZ4D"),c=n.n(s),l=n("MhPg"),p=n.n(l),d=n("l4Ni"),f=n.n(d),g=n("ujKo"),h=n.n(g),m=n("MuoO"),v=n("q1tI"),y=n.n(v),k=n("Kvkj"),G=n("KLZ9"),D=(n("P2fV"),n("NJEC")),E=(n("/zsF"),n("PArb")),b=[{key:"keywords",placeholder:"\u8bf7\u8f93\u5165\u7fa4\u7ec4\u540d\u79f0\u6216\u5ba2\u6237\u8d26\u53f7"}],x=function(){var e=this;return[{title:"\u793e\u7fa4\u540d\u79f0",dataIndex:"name"},{title:"\u7528\u6237\u6570",dataIndex:"user_num"},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updated_at",width:200},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created_at",width:200},{title:"\u64cd\u4f5c",dataIndex:"operation",fixed:"right",width:180,render:function(t,n){return y.a.createElement("div",null,$api.user.groupEdit.permission()&&y.a.createElement("a",{onClick:function(){e.toogleAddGroup(!0,n)}},"\u7f16\u8f91"),y.a.createElement(E["a"],{type:"vertical"}),$api.user.groupDel.permission()&&y.a.createElement(D["a"],{placement:"topRight",title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){e.del(n.id)},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},y.a.createElement("a",{className:"fcred5"},"\u5220\u9664")))}}]},L=(n("2qtc"),n("kLXV")),C=(n("5NDa"),n("5rEg")),w=n("p0pE"),R=n.n(w),S=n("d6i3"),F=n.n(S),V=n("1l/V"),P=n.n(V),A=n("WsrF");n("XlDN");function I(e){return function(){var t,n=h()(e);if(O()){var r=h()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f()(this,t)}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var $,N,j,T=A["a"].Item,q=(r=A["a"].create(),r((i=function(e){p()(n,e);var t=I(n);function n(e){var r;return u()(this,n),r=t.call(this,e),r.handleOk=function(){var e=r.props,t=e.toogle,n=e.form,a=e.getList,i=r.state.editGroupData;n.validateFields(function(){var e=P()(F.a.mark(function e(o){return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o){e.next=10;break}if(!i.id){e.next=6;break}return e.next=4,$api.user.groupEdit(Object.assign(n.getFieldsValue(),{id:i.id}),{success:!0,loadingFn:r.toogleLoading});case 4:e.next=8;break;case 6:return e.next=8,$api.user.groupAdd(n.getFieldsValue(),{success:!0,loadingFn:r.toogleLoading});case 8:t(!1),a({page:1});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},r.handleCancel=function(){var e=r.props.toogle;e(!1)},r.toogleLoading=function(e){r.setState({loading:e})},r.state={editGroupData:{},loading:!1},r}return c()(n,[{key:"render",value:function(){var e={labelCol:{span:4},wrapperCol:{span:14}},t=this.props,n=t.form,r=t.visible,a=n.getFieldDecorator,i=this.state,o=i.loading,u=i.editGroupData,s={rules:[{required:!0,message:"\u8bf7\u586b\u5199"}]};return y.a.createElement(L["a"],{title:"\u6dfb\u52a0\u7fa4\u7ec4",visible:r,onOk:this.handleOk,onCancel:this.handleCancel,confirmLoading:o,destroyOnClose:!0},y.a.createElement(A["a"],e,y.a.createElement(T,{label:"\u7fa4\u7ec4\u540d\u79f0"},a("name",R()({initialValue:u.name},s))(y.a.createElement(C["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),y.a.createElement(T,{label:"\u7fa4\u7ec4\u63cf\u8ff0"},a("desc")(y.a.createElement(C["a"].TextArea,{placeholder:"\u8bf7\u8f93\u5165"})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.editGroupData,r=t.editGroupData;return n!==r?{editGroupData:n}:null}}]),n}(v["PureComponent"]),a=i))||a),J=q;function K(e){return function(){var t,n=h()(e);if(X()){var r=h()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f()(this,t)}}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _=($=Object(m["connect"])(function(e){var t=e.loading,n=e.userGroup;return{loading:t,userGroup:n}}),$((j=function(e){p()(n,e);var t=K(n);function n(e){var r;return u()(this,n),r=t.call(this,e),r.mutipulClick=function(){},r.onSearch=function(e){var t=r.props.dispatch;t({type:"userGroup/onSearch",payload:e}),t({type:"userGroup/getList",payload:e})},r.getList=function(e){var t=r.props.dispatch;t({type:"userGroup/getList",payload:e})},r.toogleAddGroup=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.setState({addGroupVisible:e}),r.setState({editGroupData:t})},r.toogleLinkUser=function(){},r.del=function(e){$api.user.groupDel({id:e},{success:!0}).then(function(e){r.getList()})},r.state={addGroupVisible:!1,editGroupData:{}},r}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.userGroup,r=n.list,a=n.pagination,i=this.getList,o=this.mutipulClick,u=this.onSearch,s=this.toogleAddGroup,c=this.state,l=c.addGroupVisible,p=c.editGroupData,d=[{name:"\u6279\u91cf\u5220\u9664",key:"del",permission:$api.user.groupDel.permission()}].filter(function(e){return e.permission});return y.a.createElement(k["x"],{inner:!0},y.a.createElement(k["y"],{btns:[{icon:"plus",name:"\u65b0\u5efa\u7fa4\u7ec4",type:"primary",permission:$api.user.groupAdd.permission(),handleClick:function(){s(!0)}}].filter(function(e){return e.permission})}),y.a.createElement(G["a"],{dataSource:r,getList:i,pagination:a,loading:t.effects["userGroup/getList"],columns:x.call(this),searchFields:b,onSearch:u,mutipulClick:o,mutipulBtns:d}),y.a.createElement(J,{getList:i,visible:l,toogle:s,editGroupData:p}))}}]),n}(v["PureComponent"]),N=j))||N);t["default"]=_}}]);