(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[102],{hOcg:function(e,t,s){"use strict";s.r(t);s("2qtc");var r,a,i,o=s("kLXV"),n=s("2Taf"),u=s.n(n),l=s("vZ4D"),c=s.n(l),p=s("MhPg"),h=s.n(p),g=s("l4Ni"),d=s.n(g),y=s("ujKo"),f=s.n(y),m=s("MuoO"),U=s("q1tI"),v=s.n(U),L=s("Kvkj"),b=s("KLZ9"),k=s("z8T1"),w=s("i7Q3"),D=s("C0B8"),S=s("EexO"),T=s("5knx");function E(e){return function(){var t,s=f()(e);if(I()){var r=f()(this).constructor;t=Reflect.construct(s,arguments,r)}else t=s.apply(this,arguments);return d()(this,t)}}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var M=(r=Object(m["connect"])(function(e){var t=e.user,s=e.userList,r=e.loading;return{user:t,loading:r,userList:s}}),r((i=function(e){h()(s,e);var t=E(s);function s(e){var r;return u()(this,s),r=t.call(this,e),r.tableMoreClick=function(e,t){var s=t.id;switch(e){case"del":r.userDel(s);break;case"up":r.toogleUserStatus(s,1);break;case"disable":r.toogleUserStatus(s,2);break;case"type":r.toogleUserTypeModal(!0,s,t.member_type_id);break;case"switch":r.toogleUserLevelModal(!0,s);break;case"switch_intergral":r.toogleUserIntergral(!0,[s]);break}},r.toogleEdit=function(e,t){r.setState({showUserEdit:e}),t&&r.setState({userData:t})},r.goDetail=function(e){r.props.history.push({pathname:"/user/userDetail/".concat(e)})},r.mutipulClick=function(e,t){var s=t.join(",");switch(e){case"del":r.userDel(s);break;case"up":r.toogleUserStatus(s,1);break;case"disable":r.toogleUserStatus(s,2);break;case"type":r.toogleUserTypeModal(!0,s);break;case"switch":r.toogleUserLevelModal(!0,s);break;case"switch_intergral":r.toogleUserIntergral(!0,s.split(","));break}},r.userDel=function(e){o["a"].confirm({title:"\u786e\u8ba4\u5220\u9664\u6240\u9009\u7528\u6237\u4e48?",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){$api.user.userDel({member_id_str:"".concat(e)},{success:!0}).then(function(e){r.props.dispatch({type:"userList/getList"})})}})},r.tabsChange=function(e){r.props.dispatch({type:"userList/updateState",payload:{tabsKey:e.value}}),r.props.dispatch({type:"userList/getList"})},r.toogleUserTypeModal=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r.setState({showUserType:e}),t&&r.setState({userTypeData:{id:t,member_type_id:s}})},r.toogleUserLevelModal=function(e,t){r.setState({showUserLevel:e}),t&&r.setState({userLevelData:{id:t}})},r.toogleUserIntergral=function(e,t){r.setState({showUserUpIntergral:e}),t&&r.setState({userUpIntergralUid:t})},r.getList=function(e){var t=r.props.dispatch;t({type:"userList/getList",payload:e})},r.onSearch=function(e){var t=r.props.dispatch;t({type:"userList/onSearch",payload:e}),t({type:"userList/getList",payload:e})},r.state={showUserEdit:!1,userData:{},showUserType:!1,userTypeData:{},showUserLevel:!1,userLevelData:{},showUserUpIntergral:!1,userUpIntergralUid:0},r}return c()(s,[{key:"toogleUserStatus",value:function(e,t){var s=this;$api.user.userType({member_id_str:"".concat(e),status:t},{success:!0}).then(function(e){s.props.dispatch({type:"userList/getList"})})}},{key:"render",value:function(){var e=this.state,t=e.showUserEdit,s=e.userData,r=e.userTypeData,a=e.showUserType,i=e.showUserLevel,o=e.userLevelData,n=e.userUpIntergralUid,u=e.showUserUpIntergral,l=this.toogleEdit,c=this.mutipulClick,p=this.toogleUserTypeModal,h=this.toogleUserLevelModal,g=this.getList,d=this.onSearch,y=this.toogleUserIntergral,f=this.props,m=f.userList,U=f.loading,E=m.tabs,I=m.tabsKey,M=m.query,_=m.list,C=m.pagination,$=m.tabsEnum,x={tabs:E,onChange:this.tabsChange,defaultActiveKey:I},K=[{name:"\u542f\u7528",key:"up",permission:$api.user.userType.permission()},{name:"\u7981\u7528",key:"disable",permission:$api.user.userType.permission()},{name:"\u4fee\u6539\u7c7b\u578b",key:"type",permission:$api.user.userChangeType.permission()},{name:"\u8c03\u6574\u4e0a\u7ea7",key:"switch",permission:$api.user.userUpLevel.permission()},{name:"\u8c03\u6574\u79ef\u5206",key:"switch_intergral",permission:$api.user.userUpIntergral.permission()},{name:"\u5220\u9664",key:"del",permission:$api.user.userDel.permission()}].filter(function(e){return e.permission||void 0===e.permission}),O={search:M};return v.a.createElement(L["x"],{inner:!0},v.a.createElement(L["E"],x),v.a.createElement(b["a"],{dataSource:_,getList:g,onSearch:d,pagination:C,loading:U.effects["userList/getList"],columns:k["a"].call(this,$),searchFields:k["b"],mutipulClick:c,mutipulBtns:K,searchProp:O}),v.a.createElement(w["a"],{userData:s,toogle:l,visible:t,getList:g}),v.a.createElement(D["a"],{userTypeData:r,toogle:p,visible:a,getList:g}),v.a.createElement(S["a"],{userLevelData:o,toogle:h,visible:i,getList:g}),v.a.createElement(T["a"],{uid:n,visible:u,toogle:y,fresh:g}))}}]),s}(U["PureComponent"]),a=i))||a);t["default"]=M}}]);