(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[65],{x5ji:function(e,t,a){"use strict";a.r(t);var r=a("d6i3"),n=a.n(r),u=a("p0pE"),c=a.n(u),s=a("GIZZ"),i=a.n(s),p=a("3Unq"),o=a("7Qib"),d=a("hm3N");t["default"]=i()(p["a"],p["b"],{namespace:"newCategory",state:{treeData:[],selectedKeys:[],expandedKeys:[],list:[],currentId:null,currentStatus:d["SWITCH_TYPE"].ENABLE},subscriptions:{setup:function(e){var t=e.dispatch,a=e.history;a.listen(function(e){var a=e.pathname;Object(o["g"])("/product/categoryList",a)&&t({type:"getTreeData"})})}},reducers:{updateCurrentStatus:function(e,t){var a=t.payload,r=e.treeData,n=r.filter(function(e){return String(e.id)===a.currentId});return c()({},e,{currentStatus:n&&n[0].status})}},effects:{getTreeData:n.a.mark(function e(t,a){var r,u,s,i,p,o,d,l,y,g,f;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,u=a.put,s=a.call,i=a.select,p=c()({pid:0,type:0},r),e.next=5,i(function(e){return e.newCategory});case 5:return o=e.sent,d=o.currentId,e.next=9,s($api.category.categoryList,p);case 9:return l=e.sent,y=l.data,g=y.item,console.log(d,"currentId"),f=d?String(d):String(g[0].id),e.next=16,u({type:"updateState",payload:{treeData:g,currentId:f,selectedKeys:[f]}});case 16:return e.next=18,u({type:"updateCurrentStatus",payload:{currentId:f}});case 18:return e.next=20,u({type:"getList",payload:{pid:f}});case 20:case"end":return e.stop()}},e)}),getList:n.a.mark(function e(t,a){var r,u,s,i,p,o,d,l,y,g,f,w,S;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,u=a.put,s=a.call,i=a.select,e.next=4,i(function(e){return e.newCategory});case 4:return p=e.sent,o=p.query,d=p.pagination,l=p.currentId,y=d.pageSize,g=d.current,f=c()({pageSize:y,page:g},o,r,{pid:l,type:0}),e.next=12,s($api.category.categoryList,f);case 12:return w=e.sent,S=w.data,e.next=16,u({type:"updateState",payload:{list:S&&S.item,pagination:c()({},d,{total:S&&S.total,current:f.page,pageSize:f.pageSize})}});case 16:case"end":return e.stop()}},e)})}})}}]);