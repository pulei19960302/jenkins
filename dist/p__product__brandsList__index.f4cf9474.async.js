(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[62],{G87n:function(e,t,a){"use strict";a.r(t);a("2qtc");var n,i,s,r=a("kLXV"),o=(a("7Kak"),a("9yH6")),l=a("2Taf"),c=a.n(l),d=a("vZ4D"),u=a.n(d),p=a("MhPg"),f=a.n(p),m=a("l4Ni"),h=a.n(m),b=a("ujKo"),g=a.n(b),v=a("MuoO"),y=a("q1tI"),E=a.n(y),D=a("Kvkj"),S=a("KLZ9"),k=a("2FaR"),C=a("y7cI"),L=a.n(C);function R(e){return function(){var t,a=g()(e);if(B()){var n=g()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return h()(this,t)}}function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _,N,w,T,x=(n=Object(v["connect"])(function(e){var t=e.loading;return{loading:t}}),n((s=function(e){f()(a,e);var t=R(a);function a(e){var n;return c()(this,a),n=t.call(this,e),n.handleCancel=function(){n.props.details(!1)},n.state={detailsData:{}},n}return u()(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.props.brandsData!==e.brandsData&&void 0!==e.brandsData){var t=e.brandsData;this.setState({detailsData:t})}}},{key:"render",value:function(){var e=this.props.visible,t=this.state.detailsData;return E.a.createElement(r["a"],{title:"\u54c1\u724c\u8be6\u60c5",visible:e,onCancel:this.handleCancel,footer:null},E.a.createElement("div",{className:"clearfix"},E.a.createElement("div",{className:"clearfix"},E.a.createElement("p",{className:L.a.details_title},"\u6392\u5e8f\uff1a"),E.a.createElement("p",{className:L.a.details_content},t.sort)),E.a.createElement("div",{className:"clearfix"},E.a.createElement("p",{className:L.a.details_title},"\u54c1\u724c\u540d\u79f0\uff1a"),E.a.createElement("p",{className:L.a.details_content},t.name)),E.a.createElement("div",{className:"clearfix"},E.a.createElement("p",{className:L.a.details_title},"\u54c1\u724c\u522b\u540d\uff1a"),E.a.createElement("p",{className:L.a.details_content},t.alias)),E.a.createElement("div",{className:"clearfix"},E.a.createElement("p",{className:L.a.details_title},"\u54c1\u724cLOGO\uff1a"),E.a.createElement("p",{className:L.a.details_content},E.a.createElement("img",{src:t.logo,alt:"",width:"100",onClick:function(){Object(D["A"])({imgUrl:t.logo})}}))),E.a.createElement("div",{className:"clearfix"},E.a.createElement("p",{className:L.a.details_title},"\u54c1\u724c\u63cf\u8ff0\uff1a"),E.a.createElement("p",{className:L.a.details_content},t.description))))}}]),a}(y["PureComponent"]),i=s))||i),O=x,V=(a("giR+"),a("fyUT")),F=(a("5NDa"),a("5rEg")),I=a("WsrF");a("XlDN");function $(e){return function(){var t,a=g()(e);if(j()){var n=g()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return h()(this,t)}}function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var P,q,A,G=I["a"].Item,z=F["a"].TextArea,K=(_=I["a"].create(),N=Object(v["connect"])(function(e){var t=e.loading;return{loading:t}}),_(w=N((T=function(e){f()(a,e);var t=$(a);function a(e){var n;return c()(this,a),n=t.call(this,e),n.handleCancel=function(){n.props.toogle(!1)},n.handleOk=function(){var e=n.state.id;n.props.form.validateFields(function(t,a){if(!t){var i=e?Object.assign(a,e):a;n.props.create(i)}})},n.state={editData:{},logoData:[],id:null},n}return u()(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.props.editData!==e.editData){var t=e.editData,a=t.id,n=t.name,i=t.alias,s=t.logo,r=t.description,o=t.sort;this.props.form.setFieldsValue({name:n,alias:i,logo:s,description:r,sort:o}),s?this.setState({logoData:s,id:a}):this.setState({logoData:"",id:a})}}},{key:"logoChange",value:function(e){this.setState({logoData:e}),this.props.form.setFieldsValue({logo:e[0]})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.form,n=(e.create,a.getFieldDecorator),i=this.state.logoData,s={labelCol:{span:6},wrapperCol:{span:14}},o={pic:i,fileTotalCount:1,dataChange:this.logoChange.bind(this)};return E.a.createElement(r["a"],{title:"\u54c1\u724c\u65b0\u589e/\u7f16\u8f91",visible:t,onOk:this.handleOk,onCancel:this.handleCancel,width:"550px"},E.a.createElement(I["a"],s,E.a.createElement(G,{label:"\u54c1\u724c\u540d\u79f0",help:"\u82e5\u540c\u65f6\u542b\u6709\u4e2d\u82f1\u6587\uff0c\u5efa\u8bae\u6309\u7167\u4e2d\u6587\uff08\u82f1\u6587\uff09\u7684\u683c\u5f0f\u8fdb\u884c\u8f93\u5165"},n("name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u54c1\u724c\u540d\u79f0"}]})(E.a.createElement(F["a"],{placeholder:"\u8bf7\u8f93\u5165\u54c1\u724c\u540d\u79f0",maxLength:30}))),E.a.createElement(G,{label:"\u54c1\u724c\u522b\u540d"},n("alias",{rules:[{required:!1,message:"\u8bf7\u586b\u5199\u54c1\u724c\u522b\u540d"}]})(E.a.createElement(F["a"],{placeholder:"\u8bf7\u8f93\u5165\u54c1\u724c\u522b\u540d",maxLength:30}))),E.a.createElement(G,{label:"\u54c1\u724cLOGO"},n("logo",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u54c1\u724cLOGO"}]})(E.a.createElement(D["G"],o))),E.a.createElement(G,{label:"\u54c1\u724c\u63cf\u8ff0"},n("description",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u54c1\u724c\u63cf\u8ff0"}]})(E.a.createElement(z,{placeholder:"\u8bf7\u8f93\u5165\u54c1\u724c\u63cf\u8ff0",autoSize:{minRows:4,maxRows:10}}))),E.a.createElement(G,{label:"\u6392\u5e8f"},n("sort",{rules:[{required:!1,message:"\u8bf7\u586b\u5199\u54c1\u724c\u522b\u540d"}]})(E.a.createElement(V["a"],{min:1,max:10,precision:0})))))}}]),a}(y["PureComponent"]),w=T))||w)||w),U=K;function M(e){return function(){var t,a=g()(e);if(W()){var n=g()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return h()(this,t)}}function W(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var J=(P=Object(v["connect"])(function(e){var t=e.user,a=e.brandsList,n=e.loading;return{user:t,loading:n,brandsList:a}}),P((A=function(e){f()(a,e);var t=M(a);function a(e){var n;return c()(this,a),n=t.call(this,e),n.saveFormRef=function(e){n.formRef=e},n.tableMoreClick=function(e,t){var a=t.id;switch(n.setState({operationId:a,confirmStatus:0}),e){case"del":n.setState({modalTitle:"\u5220\u9664\u54c1\u724c",modalContent:"\u5220\u9664\u54c1\u724c\u65f6\u662f\u5426\u9700\u8981\u4e0b\u67b6\u76f8\u5173\u7684\u5546\u54c1\uff1f",affirmVisible:!0,confirmType:"del"});break;case"up":n.toogleBrandsStatus(a,1,0);break;case"disable":n.setState({modalTitle:"\u7981\u7528\u54c1\u724c",modalContent:"\u7981\u7528\u54c1\u724c\u65f6\u662f\u5426\u9700\u8981\u4e0b\u67b6\u76f8\u5173\u7684\u5546\u54c1\uff1f",affirmVisible:!0,confirmType:"disable"});break}},n.toogleCreate=function(e){var t=n.state,a=t.operationType,i=t.operationId;"create"===a&&$api.brands.brandsAdd(e,{success:!0}).then(function(e){n.toogleEdit(!1),n.props.dispatch({type:"brandsList/getList"})}),"edit"===a&&(e.id=i,$api.brands.brandsEdit(e,{success:!0}).then(function(e){n.toogleEdit(!1),n.props.dispatch({type:"brandsList/getList"})}))},n.modalRadioChange=function(e){n.setState({confirmStatus:e.target.value})},n.affirmOk=function(){var e=n.state,t=e.confirmType,a=e.operationId,i=e.confirmStatus;switch(t){case"del":n.brandsDel(a,i);break;case"disable":n.toogleBrandsStatus(a,2,i);break;case"batchDel":n.batchBrandsDel(a,i);break;case"batchDisable":n.toogleBatchBrandsStatus(a,2,i);break}},n.affirmCancel=function(){n.setState({affirmVisible:!1})},n.toogleEdit=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.setState({showBrandsEdit:e,editBrandsData:a,operationType:t}),Object.keys(a.length>0)&&n.setState({operationId:a.id})},n.goDetail=function(e,t){n.setState({showBrandsDetails:e,brandsData:t})},n.mutipulClick=function(e,t){var a=t.join(",");switch(n.setState({operationId:a,confirmStatus:0}),e){case"del":n.setState({modalTitle:"\u5220\u9664\u54c1\u724c",modalContent:"\u5220\u9664\u54c1\u724c\u65f6\u662f\u5426\u9700\u8981\u4e0b\u67b6\u76f8\u5173\u7684\u5546\u54c1\uff1f",affirmVisible:!0,confirmType:"batchDel"});break;case"up":n.toogleBatchBrandsStatus(a,1,0);break;case"disable":n.setState({modalTitle:"\u7981\u7528\u54c1\u724c",modalContent:"\u7981\u7528\u54c1\u724c\u65f6\u662f\u5426\u9700\u8981\u4e0b\u67b6\u76f8\u5173\u7684\u5546\u54c1\uff1f",affirmVisible:!0,confirmType:"batchDisable"});break}},n.brandsDel=function(e,t){$api.brands.brandsDel({id:e,confirm:t},{success:!0}).then(function(e){n.setState({affirmVisible:!1}),n.props.dispatch({type:"brandsList/getList"})})},n.batchBrandsDel=function(e,t){$api.brands.brandsBatchDel({ids:e,confirm:t},{success:!0}).then(function(e){n.setState({affirmVisible:!1}),n.props.dispatch({type:"brandsList/getList"})})},n.getList=function(e){var t=e.page,a=e.pageSize,i=n.props.dispatch;i({type:"brandsList/getList",payload:{page:t,pageSize:a}})},n.onSearch=function(e){var t=n.props.dispatch;t({type:"brandsList/onSearch",payload:e}),t({type:"brandsList/getList",payload:e})},n.state={showBrandsDetails:!1,brandsData:{},showBrandsEdit:!1,editBrandsData:{},operationType:"",operationId:"",modalTitle:"",modalContent:"",affirmVisible:!1,confirmStatus:0,confirmType:""},n}return u()(a,[{key:"toogleBrandsStatus",value:function(e,t,a){var n=this;$api.brands.brandsStatus({id:e,status:t,confirm:a},{success:!0}).then(function(e){n.setState({affirmVisible:!1}),n.props.dispatch({type:"brandsList/getList"})})}},{key:"toogleBatchBrandsStatus",value:function(e,t,a){var n=this;$api.brands.brandsBatchStatus({ids:e,status:t,confirm:a},{success:!0}).then(function(e){n.setState({affirmVisible:!1}),n.props.dispatch({type:"brandsList/getList"})})}},{key:"render",value:function(){var e=this.state,t=e.showBrandsDetails,a=e.brandsData,n=e.operationType,i=e.editBrandsData,s=e.showBrandsEdit,l=e.modalTitle,c=e.modalContent,d=e.affirmVisible,u=e.confirmStatus,p=this.goDetail,f=this.toogleEdit,m=this.mutipulClick,h=this.getList,b=this.onSearch,g=this.toogleCreate,v=this.affirmOk,y=this.affirmCancel,C=this.props,L=C.brandsList,R=C.loading,B=L.list,_=L.pagination,N=$api.brands.brandsAdd.permission()?[{icon:"plus",type:"primary",name:"\u65b0\u589e\u54c1\u724c",handleClick:this.toogleEdit.bind(this,!0,"create")}]:[],w=[{name:"\u542f\u7528",key:"up",permission:$api.brands.brandsBatchStatus.permission()},{name:"\u7981\u7528",key:"disable",permission:$api.brands.brandsBatchStatus.permission()},{name:"\u5220\u9664",key:"del",permission:$api.brands.brandsBatchDel.permission()}].filter(function(e){return e.permission||void 0===e.permission});return E.a.createElement(D["x"],{inner:!0},E.a.createElement(D["y"],{btns:N}),E.a.createElement(S["a"],{dataSource:B,getList:h,onSearch:b,pagination:_,loading:R.effects["brandsList/getList"],columns:k["a"].call(this),searchFields:k["b"],mutipulClick:m,mutipulBtns:w}),E.a.createElement(O,{brandsData:a,details:p,visible:t}),E.a.createElement(U,{wrappedComponentRef:this.saveFormRef,editData:i,toogle:f,create:g,visible:s,type:n}),E.a.createElement(r["a"],{title:l,visible:d,onOk:v,onCancel:y},E.a.createElement("div",null,c,E.a.createElement(o["a"].Group,{onChange:this.modalRadioChange,value:u},E.a.createElement(o["a"],{value:1},"\u662f"),E.a.createElement(o["a"],{value:0},"\u5426")))))}}]),a}(y["PureComponent"]),q=A))||q);t["default"]=J},y7cI:function(e,t,a){e.exports={content_box:"content_box___BnN5z",details_title:"details_title___-a8QR",details_content:"details_content___tQa5T"}}}]);