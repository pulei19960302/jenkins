(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[72],{CPth:function(e,a,t){e.exports={title_font:"title_font___3RwgI",uploadHint_content:"uploadHint_content___2dwZF",supplierEdit:"supplierEdit___1_zzR"}},"xgf+":function(e,a,t){"use strict";t.r(a);var n,r,l,s,i=t("jehZ"),c=t.n(i),d=(t("+L6B"),t("2/Rp")),o=(t("7Kak"),t("9yH6")),p=(t("14J3"),t("BMrR")),m=(t("jCWc"),t("kPKH")),u=(t("/zsF"),t("PArb")),h=t("p0pE"),g=t.n(h),_=t("2Taf"),E=t.n(_),f=t("vZ4D"),y=t.n(f),b=t("MhPg"),v=t.n(b),C=t("l4Ni"),L=t.n(C),k=t("ujKo"),D=t.n(k),x=(t("5NDa"),t("5rEg")),S=(t("nRaC"),t("5RzL")),q=(t("OaEy"),t("2fM7")),w=t("MuoO"),R=t("q1tI"),N=t.n(R),P=t("Kvkj"),F=t("YP4+"),j=t("CPth"),O=t.n(j),A=t("WsrF");t("XlDN");function H(e){return function(){var a,t=D()(e);if(I()){var n=D()(this).constructor;a=Reflect.construct(t,arguments,n)}else a=t.apply(this,arguments);return L()(this,a)}}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var J=A["a"].Item,M=q["a"].Option,T=(S["a"].SHOW_ALL,x["a"].TextArea),z={labelCol:{span:4},wrapperCol:{span:14}},B=(n=A["a"].create(),r=Object(w["connect"])(function(e){var a=e.user,t=e.supplierDetail,n=e.loading;return{user:a,loading:n,supplierDetail:t}}),n(l=r((s=function(e){v()(t,e);var a=H(t);function t(e){var n;E()(this,t),n=a.call(this,e),n.getBrandsList=function(){$api.supplier.supplierBrandsList({}).then(function(e){n.setState({brandsList:e.data})})},n.getCategoryList=function(){$api.supplier.supplierCategoryList({}).then(function(e){for(var a=0;a<e.data.length;a++){e.data[a].title=e.data[a].name,e.data[a].value=e.data[a].id,e.data[a].key=e.data[a].id;for(var t=0;t<e.data[a].sub.length;t++)e.data[a].sub[t].title=e.data[a].sub[t].name,e.data[a].sub[t].value=e.data[a].sub[t].id,e.data[a].sub[t].key=e.data[a].sub[t].id;e.data[a].children=e.data[a].sub,delete e.data[a].sub}n.setState({categoryList:e.data})})},n.handleChangeAddressLabel=function(e){var a=e.province,t=void 0===a?"":a,r=e.city,l=void 0===r?"":r,s=e.district,i=void 0===s?"":s;n.setState({province:t,city:l,district:i})},n.submitForm=function(e){var a=n.state,t=a.id,r=a.brandsList,l=(a.categoryList,a.province),s=a.city,i=a.district,c=a.sale_text;e.preventDefault(),n.props.form.validateFields(function(e,a){if(!e){var d=JSON.parse(JSON.stringify(a));delete d.addresses;var o=Object.assign(d,g()({},a.addresses,{province:l,city:s,district:i}));if(o.brand_ids){for(var p=[],m=0;m<o.brand_ids.length;m++)for(var u=0;u<r.length;u++)o.brand_ids[m]===r[u].id&&p.push(r[u].name);o.brand_text=p.join(","),o.brand_ids=o.brand_ids.join(",")}o.sale_type&&(o.sale_type=o.sale_type.join(","),o.sale_text=c&&c.join(",")),o.images&&(o.images=o.images.join(",")),0!==t?(o.id=t,$api.supplier.supplierEdit(o,{success:!0}).then(function(e){n.props.history.push({pathname:"/product/supplierList"})})):$api.supplier.supplierAdd(o,{success:!0}).then(function(e){n.props.history.push({pathname:"/product/supplierList"})})}})},n.resetForm=function(){n.props.form.resetFields()},n.getDetails=function(e){$api.supplier.supplierDetail({id:e}).then(function(e){if(""!==e.data.brand_ids){e.data.brand_ids=e.data.brand_ids.split(",");for(var a=0;a<e.data.brand_ids.length;a++)e.data.brand_ids[a]=parseInt(e.data.brand_ids[a])}else e.data.brand_ids=void 0;if(""!==e.data.sale_type){e.data.sale_type=e.data.sale_type.split(",");for(var t=0;t<e.data.sale_type.length;t++)e.data.sale_type[t]=parseInt(e.data.sale_type[t])}else e.data.sale_type=void 0;""!==e.data.license_img?e.data.license_img=e.data.license_img.split(","):e.data.license_img=void 0;var r=e.data,l=r.name,s=r.short_name,i=r.alipay,c=r.contact,d=r.phone,o=r.address,p=r.company_type,m=r.bank_name,u=r.bankno,h=r.open_name,g=r.brand_ids,_=r.sale_type,E=r.province_id,f=r.city_id,y=r.district_id,b=r.license_img,v=r.province,C=void 0===v?"":v,L=r.district,k=void 0===L?"":L,D=r.city,x=void 0===D?"":D,S=r.sale_text,q=void 0===S?"":S,w={province_id:E,city_id:f,district_id:y};n.props.form.setFieldsValue({name:l,short_name:s,alipay:i,contact:c,phone:d,address:o,company_type:p,bank_name:m,bankno:u,open_name:h,brand_ids:g,sale_type:_,addresses:w}),n.setState({province:C,district:k,city:x,imagesData:b,sale_text:q&&q.split(",")})})},n.handleChangeSaleText=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&arguments[2];console.log(a),n.setState({sale_text:a})};var r=parseInt(n.props.match.params.id);return n.state={id:r,brandsList:[],categoryList:[],province:"",city:"",district:"",imagesData:[],sale_text:[]},n}return y()(t,[{key:"componentDidMount",value:function(){var e=this.state.id;this.getBrandsList(),this.getCategoryList(),0!==e&&this.getDetails(e)}},{key:"logoChange",value:function(e){this.setState({imagesData:e}),this.props.form.setFieldsValue({images:e})}},{key:"render",value:function(){var e=this.resetForm,a=this.state,t=a.brandsList,n=a.categoryList,r=a.imagesData,l=this.props.form,s=l.getFieldDecorator,i={pic:r,fileTotalCount:9,dataChange:this.logoChange.bind(this)};return N.a.createElement(P["x"],{className:O.a.supplierEdit,style:{backgroundColor:"#fff"},inner:!0},N.a.createElement(P["y"],null),N.a.createElement(u["a"],null),N.a.createElement(A["a"],c()({},z,{onSubmit:this.submitForm}),N.a.createElement("p",{className:O.a.title_font},"\u57fa\u672c\u4fe1\u606f"),N.a.createElement(p["a"],null,N.a.createElement(m["a"],{span:12},N.a.createElement(J,{label:"\u4f9b\u5e94\u5546\u540d\u79f0"},s("name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u4f9b\u5e94\u5546\u540d\u79f0"}]})(N.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165\u4f9b\u5e94\u5546\u540d\u79f0",autoComplete:"off"})))),N.a.createElement(m["a"],{span:12},N.a.createElement(J,{label:"\u7b80\u79f0"},s("short_name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7b80\u79f0"}]})(N.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165\u7b80\u79f0"})))),N.a.createElement(m["a"],{span:12},N.a.createElement(J,{label:"\u652f\u4ed8\u5b9d\u53f7(\u5bf9\u516c)"},s("alipay",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u652f\u4ed8\u5b9d\u53f7(\u5bf9\u516c)"}]})(N.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165\u652f\u4ed8\u5b9d\u53f7(\u5bf9\u516c)"})))),N.a.createElement(m["a"],{span:12})),N.a.createElement("p",{className:O.a.title_font},"\u8054\u7cfb\u65b9\u5f0f"),N.a.createElement(p["a"],null,N.a.createElement(m["a"],{span:12},N.a.createElement(J,{label:"\u8054\u7cfb\u4eba"},s("contact",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8054\u7cfb\u4eba"}]})(N.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba"})))),N.a.createElement(m["a"],{span:12},N.a.createElement(J,{label:"\u8054\u7cfb\u7535\u8bdd"},s("phone",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8054\u7cfb\u7535\u8bdd"},{pattern:F["c"],message:"\u624b\u673a\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e"}]})(N.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"})))),N.a.createElement(m["a"],{span:12},N.a.createElement(J,{label:"\u53d1\u8d27\u5730\u5740"},s("addresses",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7701/\u5e02/\u533a"}]})(N.a.createElement(P["b"],{getPopupContainer:function(e){return e.parentElement},placeholder:"\u8bf7\u9009\u62e9\u5730\u5740",onChangeLabel:this.handleChangeAddressLabel})))),N.a.createElement(m["a"],{span:24,pull:2},N.a.createElement(J,{label:"\u8be6\u7ec6\u5730\u5740"},s("address",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u53d1\u8d27\u5730\u5740"}]})(N.a.createElement(T,{autoSize:{minRows:4,maxRows:6},maxLength:300,style:{width:"50%"},placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"})))),N.a.createElement(m["a"],{span:24,pull:2},N.a.createElement(J,{label:"\u4f9b\u5e94\u5546\u7c7b\u578b",help:"\u4f9b\u5e94\u5546\u7c7b\u578b\u4e3a\u4ee3\u53d1\u65f6\uff0c\u5bf9\u5e94\u7684\u5546\u54c1\u8ba2\u5355\u5c06\u4f1a\u6d41\u8f6c\u81f3\u4f9b\u5e94\u5546\u7cfb\u7edf\uff0c\u7531\u4f9b\u5e94\u5546\u7cfb\u7edf\u8fdb\u884c\u53d1\u8d27"},s("company_type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4f9b\u5e94\u5546\u7c7b\u578b"}]})(N.a.createElement(o["a"].Group,{onChange:this.typeChange},N.a.createElement(o["a"],{value:1},"\u81ea\u8425"),N.a.createElement(o["a"],{value:2},"\u4ee3\u53d1")))))),N.a.createElement("p",{className:O.a.title_font},"\u94f6\u884c\u8d26\u53f7"),N.a.createElement(p["a"],null,N.a.createElement(m["a"],{span:12},N.a.createElement(J,{label:"\u94f6\u884c\u540d\u79f0"},s("bank_name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u94f6\u884c\u540d\u79f0"}]})(N.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165\u94f6\u884c\u540d\u79f0"})))),N.a.createElement(m["a"],{span:12},N.a.createElement(J,{label:"\u94f6\u884c\u8d26\u53f7"},s("bankno",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u94f6\u884c\u8d26\u53f7"},{pattern:F["a"],message:"\u94f6\u884c\u8d26\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e"}]})(N.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165\u94f6\u884c\u8d26\u53f7"})))),N.a.createElement(m["a"],{span:12},N.a.createElement(J,{label:"\u5f00\u6237\u540d\u79f0"},s("open_name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5f00\u6237\u540d\u79f0"}]})(N.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165\u5f00\u6237\u540d\u79f0"})))),N.a.createElement(m["a"],{span:12})),N.a.createElement("p",{className:O.a.title_font},"\u7ecf\u8425\u8303\u56f4"),N.a.createElement(p["a"],null,N.a.createElement(m["a"],{span:12},N.a.createElement(J,{label:"\u54c1\u724c"},s("brand_ids",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u54c1\u724c"}]})(N.a.createElement(q["a"],{mode:"multiple",style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u54c1\u724c",getPopupContainer:function(e){return e.parentElement}},t&&t.map(function(e){return N.a.createElement(M,{value:e.id,key:e.id},e.name)}))))),N.a.createElement(m["a"],{span:12},N.a.createElement(J,{label:"\u7c7b\u76ee"},s("sale_type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7c7b\u76ee"}]})(N.a.createElement(S["a"],{treeData:n,treeCheckable:!0,showCheckedStrategy:"SHOW_ALL",searchPlaceholder:"\u8bf7\u9009\u62e9\u7c7b\u76ee",style:{width:"100%"},onChange:this.handleChangeSaleText}))))),N.a.createElement("p",{className:O.a.title_font},"\u7ecf\u8425\u8d44\u8d28"),N.a.createElement(p["a"],null,N.a.createElement(m["a"],{span:12},N.a.createElement(J,{label:"\u7ecf\u8425\u8d44\u8d28"},s("images",{rules:[{required:!1,message:"\u8bf7\u4e0a\u4f20\u7ecf\u8425\u8d44\u8d28"}]})(N.a.createElement("div",null,N.a.createElement(P["G"],i),N.a.createElement("div",{className:O.a.uploadHint_content},N.a.createElement("p",null,"1.\u683c\u5f0f\uff1a\u56fe\u7247\u4ec5\u652f\u6301JPG\uff0cPNG\u683c\u5f0f"),N.a.createElement("p",null,"2.\u5927\u5c0f\uff1a\u5efa\u8bae1M\u4ee5\u5185"))))))),N.a.createElement(p["a"],null,N.a.createElement(m["a"],{span:8,push:2},N.a.createElement(A["a"].Item,null,N.a.createElement(d["a"],{type:"primary",htmlType:"submit",style:{marginRight:10}},"\u63d0\u4ea4"),N.a.createElement(d["a"],{onClick:e,style:{marginRight:10}},"\u91cd\u7f6e"))))))}}]),t}(R["PureComponent"]),l=s))||l)||l);a["default"]=B}}]);