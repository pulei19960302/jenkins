(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[77],{"89OX":function(e,t,n){"use strict";n.r(t);var a,i,r,l,o,s,c,u=n("p0pE"),d=n.n(u),p=n("2Taf"),f=n.n(p),m=n("vZ4D"),h=n.n(m),v=n("MhPg"),g=n.n(v),E=n("l4Ni"),y=n.n(E),x=n("ujKo"),L=n.n(x),S=n("q1tI"),I=n.n(S),k=n("MuoO"),D=n("Kvkj"),b=n("eHn4"),C=n.n(b),w={TEMPLATE:1,EXPRESS:2,INSURANCE:3},_={NUMBER:1,WEIGHT:2},R=(a={},C()(a,_.NUMBER,"\u6309\u4ef6\u6570"),C()(a,_.WEIGHT,"\u6309\u91cd\u91cf"),a),A={DISABLED:1,ENABLED:2},M=(i={},C()(i,A.DISABLED,"\u7981\u7528"),C()(i,A.ENABLED,"\u542f\u7528"),i),T={DISABLED:1,ENABLED:2},N=(r={},C()(r,T.DISABLED,"\u7981\u7528"),C()(r,T.ENABLED,"\u542f\u7528"),r),B={DISABLED:1,ENABLED:2},O=(l={},C()(l,B.DISABLED,"\u7981\u7528"),C()(l,B.ENABLED,"\u542f\u7528"),l),P={swicthTemplateStatus:{permission:$api.shipping.swicthTemplateStatus.permission()},deleteTemplates:{permission:$api.shipping.deleteTemplates.permission()},addTemplate:{permission:$api.shipping.addTemplate.permission()},templateDetails:{permission:$api.shipping.templateDetails.permission()},updateTemplate:{permission:$api.shipping.updateTemplate.permission()},switchExpressStatus:{permission:$api.shipping.switchExpressStatus.permission()},deleteExpress:{permission:$api.shipping.deleteExpress.permission()},updateExpress:{permission:$api.shipping.updateExpress.permission()},addExpress:{permission:$api.shipping.addExpress.permission()},switchInsuranceStatus:{permission:$api.shipping.switchInsuranceStatus.permission()},deleteInsurance:{permission:$api.shipping.deleteInsurance.permission()},addInsurance:{permission:$api.shipping.addInsurance.permission()},updateInsurance:{permission:$api.shipping.updateInsurance.permission()}},U=function(e){return!!e&&P[e].permission},V=[{title:"\u8fd0\u8d39\u6a21\u677f",value:w.TEMPLATE,key:"template"},{title:"\u7269\u6d41\u516c\u53f8",value:w.EXPRESS,key:"express"},{title:"\u8fd0\u8d39\u9669",value:w.INSURANCE,key:"insurance"}],$=(n("+L6B"),n("2/Rp")),F=(n("2qtc"),n("kLXV")),H=(n("miYZ"),n("tsqr")),j=(n("/zsF"),n("PArb")),Y=n("gWZ8"),J=n.n(Y),q=(n("giR+"),n("fyUT")),K=(n("nRaC"),n("5RzL")),W=n("wd/R"),Q=n.n(W),X=n("7Qib"),G=n("xAag"),z=n.n(G),Z=K["a"].SHOW_PARENT,ee="YYYY-MM-DD HH:mm:ss",te=function(e,t){var n=this;return[{title:"\u914d\u9001\u533a\u57df",dataIndex:"area_ids",width:350,render:function(t,a){var i=a.id,r=void 0===i?"":i,l="area_ids";return I.a.createElement(K["a"],{defaultValue:t,treeData:e,treeCheckable:!0,showCheckedStrategy:Z,style:{width:"320px"},allowClear:!0,onChange:function(e){var t=e&&n.getSelectedAreas(e);n.handleUpdateRegion({id:r,name:l,value:t})}})}},{title:function(){return I.a.createElement("span",null,"\u9996",t)},dataIndex:"first_num",render:function(e,t){var a=t.id,i=void 0===a?"":a,r="first_num";return I.a.createElement(q["a"],{max:99999,maxLength:5,defaultValue:e,formatter:function(e){return Object(X["c"])(e)},onChange:function(e){n.handleUpdateRegion({id:i,name:r,value:e})}})}},{title:"\u9996\u8d39 (\u5143)",dataIndex:"first_price",render:function(e,t){var a=t.id,i=void 0===a?"":a,r="first_price";return I.a.createElement(q["a"],{max:99999,maxLength:8,defaultValue:e,formatter:function(e){return Object(X["c"])(e,2)},onChange:function(e){n.handleUpdateRegion({id:i,name:r,value:e})}})}},{title:function(){return I.a.createElement("span",null,"\u7eed",t)},dataIndex:"follow_num",render:function(e,t){var a=t.id,i=void 0===a?"":a,r="follow_num";return I.a.createElement(q["a"],{max:99999,maxLength:5,defaultValue:e,formatter:function(e){return Object(X["c"])(e)},onChange:function(e){n.handleUpdateRegion({id:i,name:r,value:e})}})}},{title:"\u7eed\u8d39 (\u5143)",dataIndex:"follow_price",render:function(e,t){var a=t.id,i=void 0===a?"":a,r="follow_price";return I.a.createElement(q["a"],{max:99999,maxLength:8,defaultValue:e,formatter:function(e){return Object(X["c"])(e,2)},onChange:function(e){n.handleUpdateRegion({id:i,name:r,value:e})}})}},{title:"\u64cd\u4f5c",dataIndex:"operation",render:function(e,t){var a=t||{},i=a.id,r=void 0===i?"":i;return I.a.createElement("a",{onClick:function(){n.handleDeleteRegion(r)}},"\u5220\u9664")}}]},ne=function(e,t){return[{title:"\u914d\u9001\u533a\u57df",dataIndex:"area_ids",width:350,render:function(t,n){return I.a.createElement("div",{className:z.a.areas},I.a.createElement(K["a"],{defaultValue:t,treeData:e,treeCheckable:!0,showCheckedStrategy:Z,style:{width:"320px"},disabled:!0}))}},{title:function(){return I.a.createElement("span",null,"\u9996",t)},dataIndex:"first_num",render:function(e){return I.a.createElement("span",null,e)}},{title:"\u9996\u8d39 (\u5143)",dataIndex:"first_price",render:function(e){return I.a.createElement("span",null,e)}},{title:function(){return I.a.createElement("span",null,"\u7eed",t)},dataIndex:"follow_num",render:function(e){return I.a.createElement("span",null,e)}},{title:"\u7eed\u8d39 (\u5143)",dataIndex:"follow_price",render:function(e){return I.a.createElement("span",null,e)}}]},ae=function(){var e=R&&Object.keys(R).reduce(function(e,t){return e.concat([{value:t,name:R[t]}])},[]),t=M&&Object.keys(M).reduce(function(e,t){return e.concat([{value:t,name:M[t]}])},[]);return[{key:"name",placeholder:"\u8bf7\u8f93\u5165\u8fd0\u8d39\u6a21\u677f\u540d\u79f0"},{key:"type",placeholder:"\u5168\u90e8\u8ba1\u4ef7\u65b9\u5f0f",type:"enum",enums:[{value:"",name:"\u5168\u90e8\u8ba1\u4ef7\u65b9\u5f0f"}].concat(J()(e||{}))},{key:"status",placeholder:"\u72b6\u6001",type:"enum",enums:[{value:"-1",name:"\u5168\u90e8\u72b6\u6001"}].concat(J()(t||{}))}]},ie=function(){var e=this;return[{title:"\u7f16\u53f7",dataIndex:"id"},{title:"\u6a21\u677f\u540d\u79f0",dataIndex:"name"},{title:"\u8ba1\u4ef7\u65b9\u5f0f",dataIndex:"show_type"},{title:"\u72b6\u6001",dataIndex:"status",render:function(t,n){var a=n.id,i=void 0===a?"":a,r=[i];return I.a.createElement(D["m"],{values:[A.ENABLED,A.DISABLED],texts:["\u542f\u7528","\u7981\u7528"],value:t,onChange:function(t){e.handleSwitchStatus(t,r)},disabled:!U("swicthTemplateStatus")})}},{title:"\u4fee\u6539\u4eba",dataIndex:"update_username",render:function(e,t){return I.a.createElement("span",null,e||t&&t.create_username)}},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updated_at",render:function(e,t){var n=t.created_at,a=void 0===n?"":n;return I.a.createElement("span",null,e?Q()(e).format(ee):a&&Q()(a).format(ee))}},{title:"\u64cd\u4f5c",dateIndex:"operation",render:function(t,n){var a=n.id,i=void 0===a?"":a,r=n.status,l=void 0===r?"":r,o=[i];return l===A.ENABLED?I.a.createElement("a",{onClick:function(){e.toggleViewTemplate(i)}},"\u67e5\u770b"):I.a.createElement("div",null,U("updateTemplate")&&I.a.createElement("span",null,I.a.createElement("a",{onClick:function(){e.toggleTemplateModal(i)}},"\u7f16\u8f91"),I.a.createElement(j["a"],{type:"vertical"})),U("deleteTemplates")&&I.a.createElement("a",{onClick:function(){e.handleDeleteTemplates(o)}},"\u5220\u9664"))}}]},re=(n("bbsP"),n("/wGt")),le=(n("T2oS"),n("W9HT")),oe=(n("g9YV"),n("wCAj")),se=(n("7Kak"),n("9yH6")),ce=(n("5NDa"),n("5rEg")),ue=n("d6i3"),de=n.n(ue),pe=n("E+oP"),fe=n.n(pe),me=n("Y/ft"),he=n.n(me),ve=n("1l/V"),ge=n.n(ve),Ee=n("WsrF");n("XlDN");function ye(e){return function(){var t,n=L()(e);if(xe()){var a=L()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return y()(this,t)}}function xe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Le=K["a"].SHOW_PARENT,Se=K["a"].SHOW_CHILD,Ie=(o=Ee["a"].create(),o((c=function(e){g()(n,e);var t=ye(n);function n(e){var a;return f()(this,n),a=t.call(this,e),a.getDetails=function(e){a.toggleLoading(),$api.shipping.templateDetails({id:e}).then(function(e){var t=e||{},n=t.data,i=void 0===n?{}:n,r=i||{},l=r.transports,o=void 0===l?[]:l,s=r.name,c=void 0===s?"":s,u=r.type,d=void 0===u?"":u;a.props.form.setFieldsValue({name:c,type:d}),a.toggleLoading(),a.setState({transports:o})}).catch(function(e){a.toggleLoading()})},a.toggleLoading=function(){a.setState(function(e){return{loading:!e.loading}})},a.handleClose=function(){a.setState(a.buildInitialState());var e=a.props.onCancel;e&&e()},a.handleOk=function(){var e,t=a.props,n=t.form,i=t.onOk,r=t.id,l=void 0===r?"":r,o=a.state.transports,s=void 0===o?[]:o;if(s&&s.length){var c=s.some(function(e){var t=e.area_ids,n=void 0===t?"":t,a=e.first_num,i=void 0===a?"":a,r=e.first_price,l=void 0===r?"":r,o=e.follow_num,s=void 0===o?"":o,c=e.follow_price,u=void 0===c?"":c;if(n||i||0===i||l||0===l||s||0===s||u||0===u)return!n||!i&&0!==i||!l&&0!==l||!s&&0!==s||!u&&0!==u}),u=s.some(function(e){var t=e.area_ids,n=void 0===t?"":t,a=e.first_num,i=void 0===a?"":a,r=e.first_price,l=void 0===r?"":r,o=e.follow_num,s=void 0===o?"":o,c=e.follow_price,u=void 0===c?"":c;return n&&(i||0===i)&&(l||0===l)&&(s||0===s)&&(u||0===u)});e=c||!u}else e=!0;n.validateFields(function(){var t=ge()(de.a.mark(function t(r,o){var c,u,p,f,m,h,v,g;return de.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=2;break}return t.abrupt("return");case 2:if(!e){t.next=5;break}return H["a"].warn("\u8bf7\u586b\u5199\u5b8c\u6574\u7684\u7269\u6d41\u4fe1\u606f"),t.abrupt("return");case 5:c=n.getFieldsValue(["name","type"]),u=c.name,p=void 0===u?"":u,f=c.type,m=void 0===f?"":f,h=[],s.forEach(function(e){var t=e.id,n=void 0===t?"":t,a=he()(e,["id"]);fe()(a)||(/add/g.test(n)?h.push(d()({},a)):h.push(d()({},e)))}),v={name:p,type:m,status:A.DISABLED,config:h},a.toggleLoading(),g=l?$api.shipping.updateTemplate(d()({id:l},v)):$api.shipping.addTemplate(v),g.then(function(e){a.toggleLoading(),i&&i()}).catch(function(e){a.toggleLoading()});case 12:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},a.handleAddRegion=function(){var e=a.state,t=e.transports,n=void 0===t?[]:t,i=e.count;a.setState({transports:[].concat(J()(n),[{id:"add-".concat(i)}]),count:i+1})},a.handleDeleteRegion=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var t=a.state.transports,n=void 0===t?[]:t,i=n.filter(function(t){return t.id!==e});a.setState({transports:J()(i)})}},a.handleUpdateRegion=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=void 0===t?"":t,i=e.name,r=void 0===i?"":i,l=e.value,o=void 0===l?"":l;if(n){var s=a.state.transports,c=s.findIndex(function(e){return e.id===n}),u=JSON.parse(JSON.stringify(s));r&&(u[c][r]=o),a.setState({transports:u})}},a.getSelectedAreas=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&e.length){var t=[],n=a.props.areasList,i=void 0===n?[]:n;return e.forEach(function(e){var n=i.find(function(t){return t.value===e});if(n){var a=n||{},r=a.children;r&&r.forEach(function(e){var n=e.value,a=void 0===n?"":n;a&&t.push(a)})}else t.push(e)}),t}},a.getTreeCheckedStrategy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=a.props.areasList,n=void 0===t?[]:t,i=e&&e.some(function(e){var t=n.some(function(t){return t.value===e});return t&&t.length});return i?Se:Le},a.state=a.buildInitialState(),a}return h()(n,[{key:"buildInitialState",value:function(){return{loading:!1,transports:[],count:0}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.visible,n=e.visible,a=e.id;!t&&n&&(a?this.getDetails(a):this.setState({transports:[]}))}},{key:"renderInfos",value:function(){var e=this.props.form,t=e.getFieldDecorator;return I.a.createElement(S["Fragment"],null,I.a.createElement(Ee["a"].Item,{label:"\u6a21\u677f\u540d\u79f0",style:{marginBottom:"5px"}},t("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8fd0\u8d39\u6a21\u677f\u540d\u79f0"}]})(I.a.createElement(ce["a"],{maxLength:20,placeholder:"\u8bf7\u8f93\u5165\u8fd0\u8d39\u6a21\u677f\u540d\u79f0(\u5c11\u4e8e20\u5b57\u7b26)",style:{width:"400px"},autoComplete:"off"}))),I.a.createElement(Ee["a"].Item,{label:"\u5bc4\u4ef6\u65b9\u5f0f"},t("type",{rules:[{required:!0}],initialValue:_.NUMBER})(I.a.createElement(se["a"].Group,null,I.a.createElement(se["a"],{value:_.NUMBER},"\u6309\u4ef6\u6570"),I.a.createElement(se["a"],{value:_.WEIGHT},"\u6309\u91cd\u91cf")))))}},{key:"renderRegions",value:function(){var e=this.state.transports,t=void 0===e?[]:e,n=this.props,a=n.areasList,i=void 0===a?[]:a,r=n.form,l=r&&r.getFieldValue("type"),o=l===_.NUMBER?"\u4ef6":"\u91cd\u91cf (kg)";return I.a.createElement("div",{className:z.a.regions},I.a.createElement("div",{className:z.a.title},I.a.createElement("span",null,"\u533a\u57df\u53ca\u8fd0\u8d39\u8bbe\u7f6e:"),I.a.createElement("a",{onClick:this.handleAddRegion},I.a.createElement("span",{style:{marginRight:"5px"}},"+"),"\u65b0\u589e\u533a\u57df")),I.a.createElement(oe["a"],{columns:te.call(this,i,o),bordered:!0,pagination:!1,dataSource:t,scroll:{y:"calc(100vh - 350px)"},rowKey:"id",rowClassName:X["d"]}))}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.id,a=this.state.loading,i=n?"\u7f16\u8f91\u8fd0\u8d39\u6a21\u677f":"\u65b0\u589e\u8fd0\u8d39\u6a21\u677f";return I.a.createElement(re["a"],{title:i,visible:t,placement:"right",width:"1000",headerStyle:{background:"#f5f5f5"},maskClosable:!1,destroyOnClose:!0,onClose:this.handleClose},a&&I.a.createElement("div",{className:z.a.spin},I.a.createElement(le["a"],null)),I.a.createElement(Ee["a"],{autoComplete:"off"},this.renderInfos(),this.renderRegions()),I.a.createElement(D["j"],{onOk:this.handleOk,onCancel:this.handleClose}))}}]),n}(S["PureComponent"]),s=c))||s),ke=Ie,De=(n("14J3"),n("BMrR")),be=(n("jCWc"),n("kPKH")),Ce=n("rlhR"),we=n.n(Ce);function _e(e){return function(){var t,n=L()(e);if(Re()){var a=L()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return y()(this,t)}}function Re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Ae=function(e){g()(n,e);var t=_e(n);function n(e){var a;return f()(this,n),a=t.call(this,e),a.getDetails=function(e){$api.shipping.templateDetails({id:e}).then(function(e){var t=e.data,n=void 0===t?{}:t;a.setState({details:n})})},a.handleClose=function(){var e=a.props.onCancel;e&&e()},a.renderInfos=function(){var e=a.state.details,t=void 0===e?{}:e,n=t.name,i=void 0===n?"":n,r=t.type,l=void 0===r?"":r;return I.a.createElement("div",{className:z.a.infos},I.a.createElement(De["a"],{type:"flex"},I.a.createElement(be["a"],null,I.a.createElement("strong",null,"\u6a21\u677f\u540d\u79f0\xa0:\xa0")),I.a.createElement(be["a"],null,i)),I.a.createElement(De["a"],{type:"flex"},I.a.createElement(be["a"],null,I.a.createElement("strong",null,"\u5bc4\u4ef6\u65b9\u5f0f\xa0:\xa0")),I.a.createElement(be["a"],null,R[l])))},a.renderRegions=function(){var e=a.props.areasList,t=void 0===e?[]:e,n=a.state.details,i=void 0===n?{}:n,r=i.transports,l=void 0===r?[]:r,o=i.type,s=void 0===o?"":o,c=s===_.NUMBER?"\u4ef6":"\u91cd\u91cf (kg)";return I.a.createElement("div",{className:"".concat(z.a.regions," ").concat(z.a.view)},I.a.createElement("div",{className:z.a.title},I.a.createElement("strong",null,"\u533a\u57df\u53ca\u8fd0\u8d39\u8bbe\u7f6e:")),I.a.createElement(oe["a"],{columns:ne.call(we()(a),t,c),bordered:!0,pagination:!1,dataSource:l,scroll:{y:"calc(100vh - 350px)"},rowKey:function(e,t){return t},rowClassName:X["d"]}))},a.state={details:{}},a}return h()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.visible,n=e.visible,a=e.id;!t&&n&&a&&this.getDetails(a)}},{key:"render",value:function(){var e=this.props.visible;return I.a.createElement(re["a"],{title:"\u8fd0\u8d39\u6a21\u677f",visible:e,placement:"right",width:"1000",headerStyle:{background:"#f5f5f5"},maskClosable:!1,destroyOnClose:!0,onClose:this.handleClose},this.renderInfos(),this.renderRegions())}}]),n}(S["PureComponent"]),Me=Ae;function Te(e){return function(){var t,n=L()(e);if(Ne()){var a=L()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return y()(this,t)}}function Ne(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Be,Oe,Pe,Ue=function(e){g()(n,e);var t=Te(n);function n(e){var a;return f()(this,n),a=t.call(this,e),a.toggleTemplateModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a.setState(function(t){return{templateModal:!t.templateModal,id:e}})},a.toggleViewTemplate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a.setState(function(t){return{viewTemplate:!t.viewTemplate,id:e}})},a.onSearch=function(e){var t=a.props.dispatch;t({type:"delivery/updateState",payload:{templateQuery:e}}),t({type:"delivery/getTemplateList",query:e})},a.getList=function(e){var t=a.props.dispatch;t({type:"delivery/getTemplateList",payload:e})},a.mutipulClick=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(arguments.length>2&&arguments[2],a.props.delivery),l=void 0===r?{}:r,o=l.list,s=void 0===o?[]:o,c=s.filter(function(e){return i&&i.includes(e.id)}),u=i||[];switch(e){case"enabled":t="\u5f53\u524d\u5b58\u5728\u542f\u7528\u4e2d\u7684\u6a21\u677f\uff0c\u8bf7\u786e\u8ba4\u540e\u64cd\u4f5c",n=function(){a.handleSwitchStatus(A.ENABLED,u)},a.handleJudgeMultipul(c,A.ENABLED,t,n);break;case"disabled":t="\u5f53\u524d\u5b58\u5728\u5df2\u505c\u7528\u7684\u6a21\u677f\uff0c\u8bf7\u786e\u8ba4\u540e\u64cd\u4f5c",n=function(){a.handleSwitchStatus(A.DISABLED,u)},a.handleJudgeMultipul(c,A.DISABLED,t,n);break;case"delete":t="\u5f53\u524d\u5b58\u5728\u542f\u7528\u4e2d\u7684\u6a21\u677f\uff0c\u8bf7\u786e\u8ba4\u540e\u5220\u9664",n=function(){a.handleDeleteTemplates(u,c)},a.handleJudgeMultipul(c,A.ENABLED,t,n);break}},a.handleJudgeMultipul=function(e,t,n,a){var i=e&&e.some(function(e){return e.status===t});i?H["a"].warn(n):a&&a()},a.handleSwitchStatus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];a.setState({loading:!0}),$api.shipping.swicthTemplateStatus({status:e,ids:t}).then(function(e){a.getList(),a.setState({loading:!1})})},a.handleDeleteTemplates=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];arguments.length>1&&void 0!==arguments[1]&&arguments[1];F["a"].confirm({title:"\u786e\u8ba4\u5220\u9664\u6240\u9009\u6a21\u677f\u4e48?",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){$api.shipping.deleteTemplates({ids:e}).then(function(e){a.getList()})}})},a.state={loading:!1,templateModal:!1,viewTemplate:!1,treeData:[]},a}return h()(n,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.templateModal,a=t.id,i=t.viewTemplate,r=this.props,l=r.delivery,o=void 0===l?{}:l,s=r.loading,c=o||{},u=c.list,d=void 0===u?[]:u,p=c.pagination,f=c.templateQuery,m=void 0===f?{}:f,h=c.areasList,v=void 0===h?[]:h,g={search:m},E=s.effects["delivery/getTemplateList"]||this.state.loading,y=[{name:"\u6279\u91cf\u542f\u7528",key:"enabled",permission:U("swicthTemplateStatus")},{name:"\u6279\u91cf\u505c\u7528",key:"disabled",permission:U("swicthTemplateStatus")},{name:"\u6279\u91cf\u5220\u9664",key:"delete",permission:U("deleteTemplates")}].filter(function(e){return e.permission});return I.a.createElement("div",null,U("addTemplate")&&I.a.createElement($["a"],{type:"primary",className:z.a.btn,onClick:function(){e.toggleTemplateModal()}},I.a.createElement("span",{style:{marginRight:"8px"}},"+"),"\u65b0\u589e\u8fd0\u8d39\u6a21\u677f"),I.a.createElement(D["i"],{dataSource:d,pagination:p,searchProp:g,searchFields:ae(),columns:ie.call(this),loading:E,mutipulBtns:y,mutipulClick:this.mutipulClick,onSearch:this.onSearch,getList:this.getList}),I.a.createElement(ke,{visible:n,areasList:v,id:a,onCancel:this.toggleTemplateModal,onOk:function(){e.toggleTemplateModal(),e.getList()}}),I.a.createElement(Me,{id:a,areasList:v,visible:i,onCancel:this.toggleViewTemplate}))}}]),n}(S["PureComponent"]),Ve=Ue,$e="YYYY-MM-DD HH:mm:ss",Fe=function(){var e=N&&Object.keys(N).reduce(function(e,t){return e.concat([{value:t,name:N[t]}])},[]);return[{key:"name",placeholder:"\u8bf7\u8f93\u5165\u7269\u6d41\u516c\u53f8\u540d\u79f0\u641c\u7d22"},{key:"phone",placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u65b9\u5f0f\u641c\u7d22"},{key:"status",placeholder:"\u5168\u90e8\u72b6\u6001",type:"enum",enums:[{value:"",name:"\u5168\u90e8\u72b6\u6001"}].concat(J()(e||{}))}]},He=function(e,t){var n=this;return[{title:"\u7269\u6d41\u516c\u53f8",dataIndex:"name",width:200,render:function(e,t){return I.a.createElement("div",{style:{width:"200px"}},I.a.createElement(D["r"],{text:e,maxLine:"1"}))}},{title:"\u7269\u6d41\u4ee3\u7801",dataIndex:"express_code",width:200,render:function(e,t){return I.a.createElement("div",{style:{width:"200px"}},I.a.createElement(D["r"],{text:e,maxLine:"1"}))}},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"phone",width:200,render:function(a,i){var r=e.id,l=void 0===r?"":r,o=i.id,s=void 0===o?"":o,c="phone";return l===s?I.a.createElement(ce["a"],{type:"phone",maxLength:20,defaultValue:a,value:t,style:{},onChange:function(e){var t=e.target,a=void 0===t?{}:t,i=a||{},r=i.value,l=void 0===r?"":r;n.handleFormatPhone(l),n.handleUpdateFields({name:c,value:l})}}):I.a.createElement("div",{style:{width:"200px"}},I.a.createElement(D["r"],{text:a,maxLine:"1"}))}},{title:"\u72b6\u6001",dataIndex:"status",render:function(e,t){var a=t.id,i=void 0===a?"":a,r=[i];return I.a.createElement(D["m"],{values:[T.ENABLED,T.DISABLED],texts:["\u542f\u7528","\u7981\u7528"],value:e,onChange:function(e){n.handleSwitchStatus(e,r)},disabled:!U("switchExpressStatus")})}},{title:"\u4fee\u6539\u4eba",dataIndex:"update_username",render:function(e,t){var n=t.create_username,a=void 0===n?"":n;return I.a.createElement("span",null,e||a)}},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updated_at",render:function(e,t){var n=t.created_at,a=void 0===n?"":n;return I.a.createElement("span",null,e?Q()(e).format($e):a&&Q()(a).format($e))}},{title:"\u64cd\u4f5c",dataIndex:"operation",render:function(t,a){var i=a.id,r=void 0===i?"":i,l=a.status,o=void 0===l?"":l,s=e.id,c=void 0===s?"":s;return o===T.ENABLED?null:r===c?I.a.createElement("div",null,I.a.createElement("a",{onClick:function(){n.handleUpdateExpress()}},"\u786e\u5b9a"),I.a.createElement(j["a"],{type:"vertical"}),I.a.createElement("a",{onClick:function(){n.handleEditExpress()}},"\u53d6\u6d88")):I.a.createElement("div",null,U("updateExpress")&&I.a.createElement("span",null,I.a.createElement("a",{onClick:function(){n.handleEditExpress(a)}},"\u7f16\u8f91"),I.a.createElement(j["a"],{type:"vertical"})),U("deleteExpress")&&I.a.createElement("a",{onClick:function(){n.handleDeleteExpress([r])}},"\u5220\u9664"))}}]},je=n("jehZ"),Ye=n.n(je),Je=(n("OaEy"),n("2fM7")),qe=n("oHbi"),Ke=n.n(qe);function We(e){return function(){var t,n=L()(e);if(Qe()){var a=L()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return y()(this,t)}}function Qe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Xe={labelCol:{span:6},wrapperCol:{span:14}},Ge=(Be=Ee["a"].create(),Be((Pe=function(e){g()(n,e);var t=We(n);function n(e){var a;return f()(this,n),a=t.call(this,e),a.toggleLoading=function(){a.setState(function(e){return{loading:!e.loading}})},a.handleModalOK=function(){var e=a.props,t=e.form,n=e.onOk;t.validateFields(function(e,t){if(!e){a.toggleLoading();var i=d()({},t,{bird_code:"111",status:T.DISABLED});$api.shipping.addExpress(i).then(function(e){n&&n()}).finally(function(e){a.toggleLoading()})}})},a.handleModalCancel=function(){var e=a.props.onCancel;e&&e()},a.handleCheckExpress=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.code,i=void 0===n?"":n;a.props.form.setFieldsValue({express_code:i})},a.state={loading:!1,expressList:[]},a}return h()(n,[{key:"componentDidMount",value:function(){var e=this;$api.shipping.expressList().then(function(t){var n=t.data,a=void 0===n?[]:n;e.setState({expressList:a||[]})})}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.form,a=n.getFieldDecorator,i=this.state,r=i.loading,l=i.expressList,o=n.getFieldValue("express_code");return I.a.createElement(F["a"],{title:"\u65b0\u5efa\u7269\u6d41\u516c\u53f8",maskClosable:!1,destroyOnClose:!0,centered:!0,visible:t,onOk:this.handleModalOK,onCancel:this.handleModalCancel,confirmLoading:r},I.a.createElement(Ee["a"],Ye()({className:Ke.a.addInfos,autoComplete:"off"},Xe),I.a.createElement(Ee["a"].Item,{label:"\u7269\u6d41\u516c\u53f8"},a("name",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7269\u6d41\u516c\u53f8"}]})(I.a.createElement(Je["a"],{showSearch:!0,showArrow:!0,onChange:this.handleCheckExpress,disabled:!l||!l.length},l&&l.map(function(e){return I.a.createElement(Je["a"].Option,{key:e.id,code:e.code,value:e.name},e.name)})))),I.a.createElement(Ee["a"].Item,{label:"\u7269\u6d41\u4ee3\u7801"},a("express_code",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7269\u6d41\u516c\u53f8"}]})(I.a.createElement(ce["a"],{placeholder:"\u9009\u62e9\u7269\u6d41\u516c\u53f8\u540e\u81ea\u52a8\u751f\u6210",maxLength:32,readOnly:!0,disabled:!o,style:{cursor:"default"}}))),I.a.createElement(Ee["a"].Item,{label:"\u8054\u7cfb\u65b9\u5f0f"},a("phone",{rules:[{pattern:/^(\d|\-){0,}$/g,message:"\u683c\u5f0f\u4e0d\u6b63\u786e"}]})(I.a.createElement(ce["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u65b9\u5f0f",maxLength:20})))))}}]),n}(S["PureComponent"]),Oe=Pe))||Oe),ze=Ge;function Ze(e){return function(){var t,n=L()(e);if(et()){var a=L()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return y()(this,t)}}function et(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var tt,nt,at,it=function(e){g()(n,e);var t=Ze(n);function n(e){var a;return f()(this,n),a=t.call(this,e),a.toggleLoading=function(){a.setState(function(e){return{loading:!e.loading}})},a.toggleAddExpress=function(){a.setState(function(e){return{addExpressModal:!e.addExpressModal}})},a.onSearch=function(e){var t=a.props.dispatch;t({type:"delivery/updateState",payload:{expressQuery:e}}),t({type:"delivery/getExpressList",query:e})},a.getList=function(e){var t=a.props.dispatch;t({type:"delivery/getExpressList",payload:e}).then(function(e){a.handleEditExpress({})})},a.mutipulClick=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(arguments.length>2&&arguments[2],a.props.delivery),l=void 0===r?{}:r,o=l.list,s=void 0===o?[]:o,c=s.filter(function(e){return i&&i.includes(e.id)}),u=i||[];switch(e){case"enabled":t="\u5f53\u524d\u5b58\u5728\u542f\u7528\u4e2d\u7684\u7269\u6d41\uff0c\u8bf7\u786e\u8ba4\u540e\u64cd\u4f5c",n=function(){a.handleSwitchStatus(T.ENABLED,u)},a.handleJudgeMultipul(c,T.ENABLED,t,n);break;case"disabled":t="\u5f53\u524d\u5b58\u5728\u5df2\u505c\u7528\u7684\u7269\u6d41\uff0c\u8bf7\u786e\u8ba4\u540e\u64cd\u4f5c",n=function(){a.handleSwitchStatus(T.DISABLED,u)},a.handleJudgeMultipul(c,T.DISABLED,t,n);break;case"delete":t="\u5f53\u524d\u5b58\u5728\u542f\u7528\u4e2d\u7684\u7269\u6d41\uff0c\u8bf7\u786e\u8ba4\u540e\u5220\u9664",n=function(){a.handleDeleteExpress(u,c)},a.handleJudgeMultipul(c,T.ENABLED,t,n);break}},a.handleJudgeMultipul=function(e,t,n,a){console.log("rows",e);var i=e&&e.some(function(e){return e.status===t});i?H["a"].warn(n):a&&a()},a.handleFormatPhone=function(e){var t=/[^(0-9)(\-)]/g,n=e&&e.replace(t,"");a.setState({phoneValue:n})},a.handleSwitchStatus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];a.toggleLoading(),$api.shipping.switchExpressStatus({status:e,ids:t}).then(function(e){a.getList(),a.toggleLoading()})},a.handleEditExpress=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.phone,n=void 0===t?"":t;a.setState({editingExpress:e,phoneValue:n})},a.handleUpdateFields=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t,i=e.value,r=void 0===i?"":i,l=a.state.editingExpress,o=d()({},l,C()({},n,r));a.setState({editingExpress:o})},a.handleDeleteExpress=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];F["a"].confirm({title:"\u786e\u8ba4\u5220\u9664\u6240\u9009\u5feb\u9012\u4e48?",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){$api.shipping.deleteExpress({ids:e}).then(function(e){a.getList()})}})},a.handleUpdateExpress=function(){var e=a.state.editingExpress,t=e||{},n=t.name,i=void 0===n?"":n;i?(a.toggleLoading(),$api.shipping.updateExpress(e).then(function(e){a.toggleLoading(),a.getList()}).catch(function(e){a.toggleLoading()})):H["a"].warn("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7269\u6d41\u4fe1\u606f")},a.state={loading:!1,editingExpress:{},addExpressModal:!1,phoneValue:""},a}return h()(n,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.editingExpress,a=t.addExpressModal,i=t.phoneValue,r=this.props,l=r.delivery,o=void 0===l?{}:l,s=r.loading,c=o||{},u=c.list,d=void 0===u?[]:u,p=c.pagination,f=c.expressQuery,m=void 0===f?{}:f,h={search:m},v=s.effects["delivery/getExpressList"]||this.state.loading,g=[{name:"\u6279\u91cf\u542f\u7528",key:"enabled",permission:U("switchExpressStatus")},{name:"\u6279\u91cf\u505c\u7528",key:"disabled",permission:U("switchExpressStatus")},{name:"\u6279\u91cf\u5220\u9664",key:"delete",permission:U("deleteExpress")}].filter(function(e){return e.permission});return I.a.createElement("div",{className:Ke.a.list},U("addExpress")&&I.a.createElement($["a"],{type:"primary",className:Ke.a.btn,onClick:this.toggleAddExpress},I.a.createElement("span",{style:{marginRight:"8px"}},"+"),"\u65b0\u589e\u7269\u6d41\u516c\u53f8"),I.a.createElement(D["i"],{dataSource:d,pagination:p,searchProp:h,searchFields:Fe(),columns:He.call(this,n,i),loading:v,mutipulBtns:g,mutipulClick:this.mutipulClick,onSearch:this.onSearch,getList:this.getList}),I.a.createElement(ze,{visible:a,onCancel:this.toggleAddExpress,onOk:function(){e.toggleAddExpress(),e.getList()}}))}}]),n}(S["PureComponent"]),rt=it,lt=n("9UV2"),ot=n.n(lt),st="YYYY-MM-DD HH:mm:ss",ct=function(){var e=O&&Object.keys(O).reduce(function(e,t){return e.concat([{value:t,name:O[t]}])},[]);return[{key:"name",placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0"},{key:"status",placeholder:"\u5168\u90e8\u72b6\u6001",type:"enum",enums:[{value:"",name:"\u5168\u90e8\u72b6\u6001"}].concat(J()(e||{}))}]},ut=function(e){var t=this;return[{title:"\u6a21\u677f\u540d\u79f0",dataIndex:"name",width:200,render:function(n,a){var i=e.id,r=void 0===i?"":i,l=a.id,o=void 0===l?"":l,s="name";return r===o?I.a.createElement(ce["a"],{maxLength:30,defaultValue:n,onChange:function(e){var n=e.target,a=void 0===n?{}:n,i=a||{},r=i.value,l=void 0===r?"":r;t.handleUpdateFields({name:s,value:l})}}):I.a.createElement("div",{style:{width:"200px"}},I.a.createElement(D["r"],{text:n,maxLine:"1"}))}},{title:"\u8fd0\u8d39\u9669",dataIndex:"money",width:150,render:function(n,a){var i=e.id,r=void 0===i?"":i,l=a.id,o=void 0===l?"":l,s="money";return r===o?I.a.createElement(q["a"],{maxLength:20,defaultValue:n,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.handleUpdateFields({name:s,value:e})},formatter:function(e){return Object(X["c"])(e,2)}}):I.a.createElement("span",null,ot.a.formatMoney(n,"\uffe5"))}},{title:"\u8d54\u4ed8\u91d1\u989d",dataIndex:"compensate",width:150,render:function(n,a){var i=e.id,r=void 0===i?"":i,l=a.id,o=void 0===l?"":l,s="compensate";return r===o?I.a.createElement(q["a"],{maxLength:20,defaultValue:n,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.handleUpdateFields({name:s,value:e})},formatter:function(e){return Object(X["c"])(e,2)}}):I.a.createElement("span",null,ot.a.formatMoney(n,"\uffe5"))}},{title:"\u72b6\u6001",dataIndex:"status",render:function(e,n){var a=n.id,i=void 0===a?"":a,r=[i];return I.a.createElement(D["m"],{values:[B.ENABLED,B.DISABLED],texts:["\u542f\u7528","\u7981\u7528"],value:e,onChange:function(e){t.handleSwitchStatus(e,r)},disabled:!U("switchInsuranceStatus")})}},{title:"\u4fee\u6539\u4eba",dataIndex:"update_username",render:function(e,t){var n=t.create_username,a=void 0===n?"":n;return I.a.createElement("span",null,e||a)}},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updated_at",render:function(e,t){var n=t.created_at,a=void 0===n?"":n;return I.a.createElement("span",null,e?Q()(e).format(st):a&&Q()(a).format(st))}},{title:"\u64cd\u4f5c",dataIndex:"operation",render:function(n,a){var i=a.id,r=void 0===i?"":i,l=a.status,o=void 0===l?"":l,s=e.id,c=void 0===s?"":s;return o===B.ENABLED?null:r===c?I.a.createElement("div",null,I.a.createElement("a",{onClick:function(){t.handleUpdateInsurance()}},"\u786e\u5b9a"),I.a.createElement(j["a"],{type:"vertical"}),I.a.createElement("a",{onClick:function(){t.handleEditInsurance()}},"\u53d6\u6d88")):I.a.createElement("div",null,U("updateInsurance")&&I.a.createElement("span",null,I.a.createElement("a",{onClick:function(){t.handleEditInsurance(a)}},"\u7f16\u8f91"),I.a.createElement(j["a"],{type:"vertical"})),U("deleteInsurance")&&I.a.createElement("a",{onClick:function(){t.handleDeleteInsurance([r])}},"\u5220\u9664"))}}]},dt=n("EOCY"),pt=n.n(dt);function ft(e){return function(){var t,n=L()(e);if(mt()){var a=L()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return y()(this,t)}}function mt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var ht={labelCol:{span:6},wrapperCol:{span:14}},vt=(tt=Ee["a"].create(),tt((at=function(e){g()(n,e);var t=ft(n);function n(e){var a;return f()(this,n),a=t.call(this,e),a.toggleLoading=function(){a.setState(function(e){return{loading:!e.loading}})},a.handleModalOK=function(){var e=a.props,t=e.form,n=e.onOk;t.validateFields(function(e,t){e||(a.toggleLoading(),$api.shipping.addInsurance(t).then(function(e){n&&n()}).finally(function(e){a.toggleLoading()}))})},a.handleModalCancel=function(){var e=a.props.onCancel;e&&e()},a.state={loading:!1},a}return h()(n,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.form.getFieldDecorator,a=this.state.loading;return I.a.createElement(F["a"],{title:"\u65b0\u589e\u8fd0\u8d39\u9669",maskClosable:!1,destroyOnClose:!0,centered:!0,visible:t,onOk:this.handleModalOK,onCancel:this.handleModalCancel,confirmLoading:a},I.a.createElement(Ee["a"],Ye()({className:pt.a.addInfos,autoComplete:"off"},ht),I.a.createElement(Ee["a"].Item,{label:"\u6a21\u677f\u540d\u79f0"},n("name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6a21\u677f\u540d\u79f0"}]})(I.a.createElement(ce["a"],{placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0",maxLength:30,autoComplete:"off"}))),I.a.createElement(Ee["a"].Item,{label:"\u8fd0\u8d39\u9669\u4ef7\u683c"},n("money",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8fd0\u8d39\u9669\u4ef7\u683c"}]})(I.a.createElement(q["a"],{placeholder:"\u8bf7\u8f93\u5165\u8fd0\u8d39\u9669\u4ef7\u683c",maxLength:20,formatter:function(e){return Object(X["c"])(e,2)}}))),I.a.createElement(Ee["a"].Item,{label:"\u8d54\u4ed8\u91d1\u989d"},n("compensate",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d54\u4ed8\u91d1\u989d"}]})(I.a.createElement(q["a"],{placeholder:"\u8bf7\u8f93\u5165\u8d54\u4ed8\u91d1\u989d",maxLength:20,formatter:function(e){return Object(X["c"])(e,2)}}))),I.a.createElement(Ee["a"].Item,{label:"\u72b6\u6001"},n("status",{rules:[{required:!0}],initialValue:B.ENABLED})(I.a.createElement(D["m"],{values:[B.ENABLED,B.DISABLED],texts:["\u542f\u7528","\u7981\u7528"]})))))}}]),n}(S["PureComponent"]),nt=at))||nt),gt=vt;function Et(e){return function(){var t,n=L()(e);if(yt()){var a=L()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return y()(this,t)}}function yt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var xt,Lt,St,It=function(e){g()(n,e);var t=Et(n);function n(e){var a;return f()(this,n),a=t.call(this,e),a.toggleLoading=function(){a.setState(function(e){return{loading:!e.loading}})},a.toggleAddInsurance=function(){a.setState(function(e){return{addInsuranceModal:!e.addInsuranceModal}})},a.onSearch=function(e){var t=a.props.dispatch;t({type:"delivery/updateState",payload:{insuranceQuery:e}}),t({type:"delivery/getInsuranceList",query:e})},a.getList=function(e){var t=a.props.dispatch;t({type:"delivery/getInsuranceList",payload:e}).then(function(e){a.handleEditInsurance({})})},a.mutipulClick=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(arguments.length>2&&arguments[2],a.props.delivery),l=void 0===r?{}:r,o=l.list,s=void 0===o?[]:o,c=s.filter(function(e){return i&&i.includes(e.id)}),u=i||[];switch(e){case"enabled":t="\u5f53\u524d\u5b58\u5728\u542f\u7528\u4e2d\u7684\u8fd0\u8d39\u9669\uff0c\u8bf7\u786e\u8ba4\u540e\u64cd\u4f5c",n=function(){a.handleSwitchStatus(B.ENABLED,u)},a.handleJudgeMultipul(c,B.ENABLED,t,n);break;case"disabled":t="\u5f53\u524d\u5b58\u5728\u5df2\u505c\u7528\u7684\u8fd0\u8d39\u9669\uff0c\u8bf7\u786e\u8ba4\u540e\u64cd\u4f5c",n=function(){a.handleSwitchStatus(B.DISABLED,u)},a.handleJudgeMultipul(c,B.DISABLED,t,n);break;case"delete":t="\u5f53\u524d\u5b58\u5728\u542f\u7528\u4e2d\u7684\u8fd0\u8d39\u9669\uff0c\u8bf7\u786e\u8ba4\u540e\u5220\u9664",n=function(){a.handleDeleteInsurance(u,c)},a.handleJudgeMultipul(c,B.ENABLED,t,n);break}},a.handleJudgeMultipul=function(e,t,n,a){var i=e&&e.some(function(e){return e.status===t});i?H["a"].warn(n):a&&a()},a.handleSwitchStatus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];a.toggleLoading(),$api.shipping.switchInsuranceStatus({status:e,ids:t}).then(function(e){a.getList(),a.toggleLoading()})},a.handleEditInsurance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.setState({editingInsurance:e})},a.handleUpdateFields=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t,i=e.value,r=void 0===i?"":i,l=a.state.editingInsurance,o=d()({},l,C()({},n,r));a.setState({editingInsurance:o})},a.handleDeleteInsurance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];F["a"].confirm({title:"\u786e\u8ba4\u5220\u9664\u6240\u9009\u6a21\u677f\u4e48?",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){$api.shipping.deleteInsurance({ids:e}).then(function(e){a.getList()})}})},a.handleUpdateInsurance=function(){var e=a.state.editingInsurance,t=e||{},n=t.name,i=void 0===n?"":n;i?(a.toggleLoading(),$api.shipping.updateInsurance(e).then(function(e){a.toggleLoading(),a.getList()}).catch(function(e){a.toggleLoading()})):H["a"].warn("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8fd0\u8d39\u9669\u4fe1\u606f")},a.state={loading:!1,editingInsurance:{},addInsuranceModal:!1},a}return h()(n,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.editingInsurance,a=t.addInsuranceModal,i=this.props,r=i.delivery,l=void 0===r?{}:r,o=i.loading,s=l||{},c=s.list,u=void 0===c?[]:c,d=s.pagination,p=s.insuranceQuery,f=void 0===p?{}:p,m={search:f},h=o.effects["delivery/getInsuranceList"]||this.state.loading,v=[{name:"\u6279\u91cf\u542f\u7528",key:"enabled",permission:U("switchInsuranceStatus")},{name:"\u6279\u91cf\u505c\u7528",key:"disabled",permission:U("switchInsuranceStatus")},{name:"\u6279\u91cf\u5220\u9664",key:"delete",permission:U("deleteInsurance")}].filter(function(e){return e.permission});return I.a.createElement("div",{className:pt.a.list},U("addInsurance")&&I.a.createElement($["a"],{type:"primary",className:pt.a.btn,onClick:this.toggleAddInsurance},I.a.createElement("span",{style:{marginRight:"8px"}},"+"),"\u65b0\u589e\u8fd0\u8d39\u9669"),I.a.createElement(D["i"],{dataSource:u,pagination:d,searchProp:m,searchFields:ct(),columns:ut.call(this,n),loading:h,mutipulBtns:v,mutipulClick:this.mutipulClick,onSearch:this.onSearch,getList:this.getList}),I.a.createElement(gt,{visible:a,onCancel:this.toggleAddInsurance,onOk:function(){e.toggleAddInsurance(),e.getList()}}))}}]),n}(S["PureComponent"]),kt=It;function Dt(e){return function(){var t,n=L()(e);if(bt()){var a=L()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return y()(this,t)}}function bt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Ct=(xt=Object(k["connect"])(function(e){var t=e.delivery,n=e.loading;return{delivery:t,loading:n}}),xt((St=function(e){g()(n,e);var t=Dt(n);function n(e){var a;return f()(this,n),a=t.call(this,e),a.handleReset=function(){var e=a.props,t=e.delivery,n=void 0===t?{}:t,i=e.dispatch,r=n.pagination,l=void 0===r?{}:r,o={list:[],pagination:d()({},l,{total:0,current:1})};i({type:"delivery/updateState",payload:o})},a.onTabsChange=function(e){var t=e.value;a.setState({tab:t}),a.handleReset()},a.getTemplateList=function(){var e=a.props.dispatch;e({type:"delivery/getTemplateList"})},a.state={tab:w.TEMPLATE},a}return h()(n,[{key:"renderList",value:function(){var e=this.props,t=e.delivery,n=void 0===t?{}:t,a=e.dispatch,i=e.loading,r=this.state.tab;switch(r){case w.TEMPLATE:return I.a.createElement(Ve,{delivery:n,dispatch:a,loading:i});case w.EXPRESS:return I.a.createElement(rt,{delivery:n,dispatch:a,loading:i});case w.INSURANCE:return I.a.createElement(kt,{delivery:n,dispatch:a,loading:i})}}},{key:"render",value:function(){return I.a.createElement("div",null,I.a.createElement(D["x"],{inner:!0},I.a.createElement(D["E"],{defaultActiveKey:"template",tabs:V,onChange:this.onTabsChange}),this.renderList()))}}]),n}(S["PureComponent"]),Lt=St))||Lt);t["default"]=Ct},EOCY:function(e,t,n){e.exports={list:"list___1gF5X",btn:"btn___sMB45",addInfos:"addInfos___3M1KL"}},oHbi:function(e,t,n){e.exports={list:"list___1VtJB",btn:"btn___2iYn7",addInfos:"addInfos___186or"}},xAag:function(e,t,n){e.exports={infos:"infos___3axc2",regions:"regions___2yIKz",title:"title___bcD_O",view:"view___2dbN_",areas:"areas___vYSiI",spin:"spin___1zHiD",btn:"btn___1N-_6"}}}]);